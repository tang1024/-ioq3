<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ioquake3 doxygen: C:/entry/dev/ioq3/code/qcommon/files.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ioquake3 doxygen
   &#160;<span id="projectnumber">1.0 dev</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('d8/d8c/files_8c.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">files.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>File system (handle based) for Quake III Arena.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../de/d01/q__shared_8h_source.html">q_shared.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/df7/qcommon_8h_source.html">qcommon.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d5c/unzip_8h_source.html">unzip.h</a>&quot;</code><br />
</div>
<p><a href="../../d8/d8c/files_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/dad/structpack__t.html">pack_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/de3/structdirectory__t.html">directory_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/da7/structsearchpath__s.html">searchpath_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d60/unionqfile__gus.html">qfile_gus</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d47/structqfile__us.html">qfile_us</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/dbc/structfile_handle_data__t.html">fileHandleData_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7be0ae4731fad3841a854c2de22ef3b6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a7be0ae4731fad3841a854c2de22ef3b6">DEMO_PAK0_CHECKSUM</a>&#160;&#160;&#160;2985612116u</td></tr>
<tr class="memdesc:a7be0ae4731fad3841a854c2de22ef3b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Every time a new demo pk3 file is built, this checksum must be updated.  <a href="../../d8/d8c/files_8c.html#a7be0ae4731fad3841a854c2de22ef3b6">More...</a><br /></td></tr>
<tr class="separator:a7be0ae4731fad3841a854c2de22ef3b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7385f187221b07141649520937000a15"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a7385f187221b07141649520937000a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae74f0bcfc73dfe6783333835b1ea27ba"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:ae74f0bcfc73dfe6783333835b1ea27ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92854eddea9f8e06383c850a57ac918a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a92854eddea9f8e06383c850a57ac918a">MAX_FILEHASH_SIZE</a>&#160;&#160;&#160;1024</td></tr>
<tr class="separator:a92854eddea9f8e06383c850a57ac918a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6e1cf1a8d53f38471e9e9db3faf740"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>&#160;&#160;&#160;&quot;(unknown)&quot;</td></tr>
<tr class="separator:a7d6e1cf1a8d53f38471e9e9db3faf740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fbd31416bb8711f264a06d133a9273d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3fbd31416bb8711f264a06d133a9273d">PK3_SEEK_BUFFER_SIZE</a>&#160;&#160;&#160;65536</td></tr>
<tr class="separator:a3fbd31416bb8711f264a06d133a9273d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5b07871465d84bfd80a97dc24093151"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad5b07871465d84bfd80a97dc24093151">MAX_FOUND_FILES</a>&#160;&#160;&#160;0x1000</td></tr>
<tr class="separator:ad5b07871465d84bfd80a97dc24093151"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a17b0350b6ca9a5cbdddb50ba177f9862"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a17b0350b6ca9a5cbdddb50ba177f9862">fileInPack_t</a></td></tr>
<tr class="separator:a17b0350b6ca9a5cbdddb50ba177f9862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad981c40cf85a47ca73156ece3fe32c31"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../df/da7/structsearchpath__s.html">searchpath_s</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad981c40cf85a47ca73156ece3fe32c31">searchpath_t</a></td></tr>
<tr class="separator:ad981c40cf85a47ca73156ece3fe32c31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a6b97c86e853e512209767b84d7f124"><td class="memItemLeft" align="right" valign="top">typedef union <a class="el" href="../../d4/d60/unionqfile__gus.html">qfile_gus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2a6b97c86e853e512209767b84d7f124">qfile_gut</a></td></tr>
<tr class="separator:a2a6b97c86e853e512209767b84d7f124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aff03be7fea44d4a4c8d51a8df6fa7d"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="../../de/d47/structqfile__us.html">qfile_us</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a6aff03be7fea44d4a4c8d51a8df6fa7d">qfile_ut</a></td></tr>
<tr class="separator:a6aff03be7fea44d4a4c8d51a8df6fa7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af5da17e7070d410478748895e29c3dd1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#af5da17e7070d410478748895e29c3dd1">FS_Initialized</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:af5da17e7070d410478748895e29c3dd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">If fs_searchpaths.  <a href="../../d8/d8c/files_8c.html#af5da17e7070d410478748895e29c3dd1">More...</a><br /></td></tr>
<tr class="separator:af5da17e7070d410478748895e29c3dd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2774c2469ce0036a9f1b09737eed5066"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure</a> (<a class="el" href="../../dc/dad/structpack__t.html">pack_t</a> *pack)</td></tr>
<tr class="separator:a2774c2469ce0036a9f1b09737eed5066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f965c88a2d5272bf0ee4f0d10b2b3c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a9f965c88a2d5272bf0ee4f0d10b2b3c1">FS_LoadStack</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:a9f965c88a2d5272bf0ee4f0d10b2b3c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">return load stack.  <a href="../../d8/d8c/files_8c.html#a9f965c88a2d5272bf0ee4f0d10b2b3c1">More...</a><br /></td></tr>
<tr class="separator:a9f965c88a2d5272bf0ee4f0d10b2b3c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41577d0c844f4e801242c4c17343e0da"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName</a> (const char *fname, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> hashSize)</td></tr>
<tr class="memdesc:a41577d0c844f4e801242c4c17343e0da"><td class="mdescLeft">&#160;</td><td class="mdescRight">return a hash value for the filename.  <a href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">More...</a><br /></td></tr>
<tr class="separator:a41577d0c844f4e801242c4c17343e0da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ced81260ee2821fa8d398830e55855"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="separator:a78ced81260ee2821fa8d398830e55855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62c89198cb4fe6dce52715350cb5017"><td class="memItemLeft" align="right" valign="top">static FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f)</td></tr>
<tr class="separator:ae62c89198cb4fe6dce52715350cb5017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52005b87fc757d0609a63d1e63c015c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a52005b87fc757d0609a63d1e63c015c1">FS_ForceFlush</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f)</td></tr>
<tr class="memdesc:a52005b87fc757d0609a63d1e63c015c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">forces flush on files we're writing to.  <a href="../../d8/d8c/files_8c.html#a52005b87fc757d0609a63d1e63c015c1">More...</a><br /></td></tr>
<tr class="separator:a52005b87fc757d0609a63d1e63c015c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c412643fabf5a6d0a2b30ac3f7876f6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a8c412643fabf5a6d0a2b30ac3f7876f6">FS_fplength</a> (FILE *h)</td></tr>
<tr class="separator:a8c412643fabf5a6d0a2b30ac3f7876f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94716234fc9383efe0af2b1286b4a677"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a94716234fc9383efe0af2b1286b4a677">FS_filelength</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f)</td></tr>
<tr class="memdesc:a94716234fc9383efe0af2b1286b4a677"><td class="mdescLeft">&#160;</td><td class="mdescRight">doesn't work for files that are opened from a pack file.  <a href="../../d8/d8c/files_8c.html#a94716234fc9383efe0af2b1286b4a677">More...</a><br /></td></tr>
<tr class="separator:a94716234fc9383efe0af2b1286b4a677"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97842b2a865eb7cfbcc222ae71c35063"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a97842b2a865eb7cfbcc222ae71c35063">FS_ReplaceSeparators</a> (char *path)</td></tr>
<tr class="memdesc:a97842b2a865eb7cfbcc222ae71c35063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fix things up differently for win/unix/mac.  <a href="../../d8/d8c/files_8c.html#a97842b2a865eb7cfbcc222ae71c35063">More...</a><br /></td></tr>
<tr class="separator:a97842b2a865eb7cfbcc222ae71c35063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad68e370f10bfef0736c91e2fc74a86"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a> (const char *base, const char *game, const char *qpath)</td></tr>
<tr class="memdesc:a8ad68e370f10bfef0736c91e2fc74a86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Qpath may have either forward or backwards slashes.  <a href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">More...</a><br /></td></tr>
<tr class="separator:a8ad68e370f10bfef0736c91e2fc74a86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a893ba65b550aec713c7954e948bad98f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath</a> (char *OSPath)</td></tr>
<tr class="memdesc:a893ba65b550aec713c7954e948bad98f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates any directories needed to store the given filename.  <a href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">More...</a><br /></td></tr>
<tr class="separator:a893ba65b550aec713c7954e948bad98f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabc6200b9a726797dfbed9738199459c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, const char *function)</td></tr>
<tr class="memdesc:aabc6200b9a726797dfbed9738199459c"><td class="mdescLeft">&#160;</td><td class="mdescRight">ERR_FATAL if trying to maniuplate a file with the platform library, QVM, or pk3 extension.  <a href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">More...</a><br /></td></tr>
<tr class="separator:aabc6200b9a726797dfbed9738199459c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6c5a67161e29cb78b2261240dc4da9f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae6c5a67161e29cb78b2261240dc4da9f">FS_Remove</a> (const char *osPath)</td></tr>
<tr class="separator:ae6c5a67161e29cb78b2261240dc4da9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7669ed35dabfd22231b3651cda65cc37"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a7669ed35dabfd22231b3651cda65cc37">FS_HomeRemove</a> (const char *<a class="el" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>)</td></tr>
<tr class="separator:a7669ed35dabfd22231b3651cda65cc37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58f6907cd9c9231ef7991b341ddf5807"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists</a> (const char *testpath)</td></tr>
<tr class="memdesc:a58f6907cd9c9231ef7991b341ddf5807"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests if path and file exists.  <a href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">More...</a><br /></td></tr>
<tr class="separator:a58f6907cd9c9231ef7991b341ddf5807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a966590935244c0d031a419129bf844a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a966590935244c0d031a419129bf844a6">FS_FileExists</a> (const char *file)</td></tr>
<tr class="memdesc:a966590935244c0d031a419129bf844a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests if the file exists in the current gamedir, this DOES NOT search the paths.  <a href="../../d8/d8c/files_8c.html#a966590935244c0d031a419129bf844a6">More...</a><br /></td></tr>
<tr class="separator:a966590935244c0d031a419129bf844a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e74b378ce96e91964bf188fd77ad59"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists</a> (const char *file)</td></tr>
<tr class="memdesc:a06e74b378ce96e91964bf188fd77ad59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests if the file exists.  <a href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">More...</a><br /></td></tr>
<tr class="separator:a06e74b378ce96e91964bf188fd77ad59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf7e97bd1e6ce97117806e79a016be9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)</td></tr>
<tr class="separator:a3cf7e97bd1e6ce97117806e79a016be9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad406d41c306abb12491df47192457990"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *fp)</td></tr>
<tr class="memdesc:ad406d41c306abb12491df47192457990"><td class="mdescLeft">&#160;</td><td class="mdescRight">Search for a file somewhere below the home path then base path in that order.  <a href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">More...</a><br /></td></tr>
<tr class="separator:ad406d41c306abb12491df47192457990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae79db0585126e3d1cc1062c31b0c6df2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae79db0585126e3d1cc1062c31b0c6df2">FS_SV_Rename</a> (const char *from, const char *to, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> safe)</td></tr>
<tr class="separator:ae79db0585126e3d1cc1062c31b0c6df2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a264d0d65ff0b17851b2861f8a5311042"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a264d0d65ff0b17851b2861f8a5311042">FS_Rename</a> (const char *from, const char *to)</td></tr>
<tr class="separator:a264d0d65ff0b17851b2861f8a5311042"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c4ec3bde86c3cb7549952febebbbc9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f)</td></tr>
<tr class="memdesc:a3c4ec3bde86c3cb7549952febebbbc9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the FILE pointer is an open pak file, leave it open.  <a href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">More...</a><br /></td></tr>
<tr class="separator:a3c4ec3bde86c3cb7549952febebbbc9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53b5e83245e636947c7b951c869fd91e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a53b5e83245e636947c7b951c869fd91e">FS_FOpenFileWrite</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)</td></tr>
<tr class="separator:a53b5e83245e636947c7b951c869fd91e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f8d7dda752ca630c38cc2abcb44a95f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)</td></tr>
<tr class="separator:a2f8d7dda752ca630c38cc2abcb44a95f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd15f3ba87302abddf2d7466af52ed8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)</td></tr>
<tr class="memdesc:a6fd15f3ba87302abddf2d7466af52ed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Will properly create any needed paths and deal with seperater character issues.  <a href="../../d8/d8c/files_8c.html#a6fd15f3ba87302abddf2d7466af52ed8">More...</a><br /></td></tr>
<tr class="separator:a6fd15f3ba87302abddf2d7466af52ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3a6b4d4279a3b9029391ddf12f1610f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a> (const char *s1, const char *s2)</td></tr>
<tr class="memdesc:af3a6b4d4279a3b9029391ddf12f1610f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignore case and seprator char distinctions.  <a href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">More...</a><br /></td></tr>
<tr class="separator:af3a6b4d4279a3b9029391ddf12f1610f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95f53b203279a4babb672e39ddac3f83"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, const char *ext, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> namelen)</td></tr>
<tr class="memdesc:a95f53b203279a4babb672e39ddac3f83"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return qtrue if ext matches file extension filename.  <a href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">More...</a><br /></td></tr>
<tr class="separator:a95f53b203279a4babb672e39ddac3f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2381b59cd3dba516a289108f96b77d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad2381b59cd3dba516a289108f96b77d3">FS_IsDemoExt</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> namelen)</td></tr>
<tr class="memdesc:ad2381b59cd3dba516a289108f96b77d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return qtrue if filename has a demo extension.  <a href="../../d8/d8c/files_8c.html#ad2381b59cd3dba516a289108f96b77d3">More...</a><br /></td></tr>
<tr class="separator:ad2381b59cd3dba516a289108f96b77d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55de3ab916ba6dfd40c0f5f819dbb37b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad981c40cf85a47ca73156ece3fe32c31">searchpath_t</a> *search, <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *file, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> uniqueFILE, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> unpure)</td></tr>
<tr class="memdesc:a55de3ab916ba6dfd40c0f5f819dbb37b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tries opening file "filename" in searchpath "search".  <a href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">More...</a><br /></td></tr>
<tr class="separator:a55de3ab916ba6dfd40c0f5f819dbb37b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5f39eddf80c89df5f1f9f0b6b48b482"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *file, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> uniqueFILE)</td></tr>
<tr class="memdesc:ac5f39eddf80c89df5f1f9f0b6b48b482"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the file in the search path.  <a href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">More...</a><br /></td></tr>
<tr class="separator:ac5f39eddf80c89df5f1f9f0b6b48b482"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad71dab25afd483c3ef8457a060c77076"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad71dab25afd483c3ef8457a060c77076">FS_FindVM</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> **startSearch, char *found, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> foundlen, const char *name, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> enableDll)</td></tr>
<tr class="memdesc:ad71dab25afd483c3ef8457a060c77076"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find a suitable VM file in search path order.  <a href="../../d8/d8c/files_8c.html#ad71dab25afd483c3ef8457a060c77076">More...</a><br /></td></tr>
<tr class="separator:ad71dab25afd483c3ef8457a060c77076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e635a7a368bbd1ef3dbd99140c69e39"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *<a class="el" href="../../d5/daf/snd__mem_8c.html#a75f40ee6a814276c095e1efe24b73517">buffer</a>, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> len, <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f)</td></tr>
<tr class="memdesc:a4e635a7a368bbd1ef3dbd99140c69e39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Properly handles partial reads.  <a href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">More...</a><br /></td></tr>
<tr class="separator:a4e635a7a368bbd1ef3dbd99140c69e39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2f02a32d713bda5d8907bb011c22b75"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a> (const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *<a class="el" href="../../d5/daf/snd__mem_8c.html#a75f40ee6a814276c095e1efe24b73517">buffer</a>, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> len, <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> h)</td></tr>
<tr class="memdesc:af2f02a32d713bda5d8907bb011c22b75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Properly handles partial writes.  <a href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">More...</a><br /></td></tr>
<tr class="separator:af2f02a32d713bda5d8907bb011c22b75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28fb7a9d3ddf3b9761d7578add3377b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> <a class="el" href="../../d7/de2/q__platform_8h.html#af8273ae2b4cacc8b918137c2c3f097b1">QDECL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a28fb7a9d3ddf3b9761d7578add3377b3">FS_Printf</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> h, const char *fmt,...)</td></tr>
<tr class="memdesc:a28fb7a9d3ddf3b9761d7578add3377b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">like fprintf.  <a href="../../d8/d8c/files_8c.html#a28fb7a9d3ddf3b9761d7578add3377b3">More...</a><br /></td></tr>
<tr class="separator:a28fb7a9d3ddf3b9761d7578add3377b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50a6dfd18abd85eb58f5778d8f4a9ce4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a50a6dfd18abd85eb58f5778d8f4a9ce4">FS_Seek</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f, <a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> <a class="el" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> <a class="el" href="../../d2/db7/ioapi_8h.html#a6ad5e17860121e666df109329b95c83e">origin</a>)</td></tr>
<tr class="memdesc:a50a6dfd18abd85eb58f5778d8f4a9ce4"><td class="mdescLeft">&#160;</td><td class="mdescRight">seek on a file.  <a href="../../d8/d8c/files_8c.html#a50a6dfd18abd85eb58f5778d8f4a9ce4">More...</a><br /></td></tr>
<tr class="separator:a50a6dfd18abd85eb58f5778d8f4a9ce4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762b35729743799fe79df7acd009f3b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a762b35729743799fe79df7acd009f3b7">FS_FileIsInPAK</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *pChecksum)</td></tr>
<tr class="memdesc:a762b35729743799fe79df7acd009f3b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns 1 if a file is in the PAK file, otherwise -1.  <a href="../../d8/d8c/files_8c.html#a762b35729743799fe79df7acd009f3b7">More...</a><br /></td></tr>
<tr class="separator:a762b35729743799fe79df7acd009f3b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1815394d013a4db34e8f7910039ba0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir</a> (const char *qpath, <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *searchPath, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> unpure, <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> **<a class="el" href="../../d5/daf/snd__mem_8c.html#a75f40ee6a814276c095e1efe24b73517">buffer</a>)</td></tr>
<tr class="memdesc:a1c1815394d013a4db34e8f7910039ba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the file directory.  <a href="../../d8/d8c/files_8c.html#a1c1815394d013a4db34e8f7910039ba0">More...</a><br /></td></tr>
<tr class="separator:a1c1815394d013a4db34e8f7910039ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a671ffbf506ea8d57d193c072ade04343"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a671ffbf506ea8d57d193c072ade04343">FS_ReadFile</a> (const char *qpath, <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> **<a class="el" href="../../d5/daf/snd__mem_8c.html#a75f40ee6a814276c095e1efe24b73517">buffer</a>)</td></tr>
<tr class="memdesc:a671ffbf506ea8d57d193c072ade04343"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the file.  <a href="../../d8/d8c/files_8c.html#a671ffbf506ea8d57d193c072ade04343">More...</a><br /></td></tr>
<tr class="separator:a671ffbf506ea8d57d193c072ade04343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a896eee490bab9dfb635454e2ea979e41"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a896eee490bab9dfb635454e2ea979e41">FS_FreeFile</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *<a class="el" href="../../d5/daf/snd__mem_8c.html#a75f40ee6a814276c095e1efe24b73517">buffer</a>)</td></tr>
<tr class="memdesc:a896eee490bab9dfb635454e2ea979e41"><td class="mdescLeft">&#160;</td><td class="mdescRight">frees the memory returned by FS_ReadFile.  <a href="../../d8/d8c/files_8c.html#a896eee490bab9dfb635454e2ea979e41">More...</a><br /></td></tr>
<tr class="separator:a896eee490bab9dfb635454e2ea979e41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5bb678d83f1c6291ddfe69eb4267030"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#af5bb678d83f1c6291ddfe69eb4267030">FS_WriteFile</a> (const char *qpath, const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *<a class="el" href="../../d5/daf/snd__mem_8c.html#a75f40ee6a814276c095e1efe24b73517">buffer</a>, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> <a class="el" href="../../d2/db7/ioapi_8h.html#a014d89bd76f74ef3a29c8f04b473eb76">size</a>)</td></tr>
<tr class="memdesc:af5bb678d83f1c6291ddfe69eb4267030"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a complete file, creating any subdirectories needed.  <a href="../../d8/d8c/files_8c.html#af5bb678d83f1c6291ddfe69eb4267030">More...</a><br /></td></tr>
<tr class="separator:af5bb678d83f1c6291ddfe69eb4267030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83603ac5600d0e36b364125755ebacca"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dc/dad/structpack__t.html">pack_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile</a> (const char *zipfile, const char *basename)</td></tr>
<tr class="memdesc:a83603ac5600d0e36b364125755ebacca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new pak_t in the search chain for the contents of a zip file.  <a href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">More...</a><br /></td></tr>
<tr class="separator:a83603ac5600d0e36b364125755ebacca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1cd6e2d2ec0cfb811788155f7c52689"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#aa1cd6e2d2ec0cfb811788155f7c52689">FS_FreePak</a> (<a class="el" href="../../dc/dad/structpack__t.html">pack_t</a> *thepak)</td></tr>
<tr class="memdesc:aa1cd6e2d2ec0cfb811788155f7c52689"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a pak structure and releases all associated resources.  <a href="../../d8/d8c/files_8c.html#aa1cd6e2d2ec0cfb811788155f7c52689">More...</a><br /></td></tr>
<tr class="separator:aa1cd6e2d2ec0cfb811788155f7c52689"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adef5a7e7eb51f7c6231a399c8c43ee51"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#adef5a7e7eb51f7c6231a399c8c43ee51">FS_CompareZipChecksum</a> (const char *zipfile)</td></tr>
<tr class="memdesc:adef5a7e7eb51f7c6231a399c8c43ee51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compares whether the given pak file matches a referenced checksum.  <a href="../../d8/d8c/files_8c.html#adef5a7e7eb51f7c6231a399c8c43ee51">More...</a><br /></td></tr>
<tr class="separator:adef5a7e7eb51f7c6231a399c8c43ee51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60b9d8c773b74225a800532bbb0a3779"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a60b9d8c773b74225a800532bbb0a3779">FS_ReturnPath</a> (const char *zname, char *zpath, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *depth)</td></tr>
<tr class="separator:a60b9d8c773b74225a800532bbb0a3779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a146c14808e970bc75796397ccec06eb5"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a146c14808e970bc75796397ccec06eb5">FS_AddFileToList</a> (char *name, char *list[<a class="el" href="../../db/db6/sys__win32_8c.html#ad5b07871465d84bfd80a97dc24093151">MAX_FOUND_FILES</a>], <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> nfiles)</td></tr>
<tr class="separator:a146c14808e970bc75796397ccec06eb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3776903aa012bf28a0107683c8d9a1b7"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles</a> (const char *path, const char *extension, char *filter, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *numfiles, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> allowNonPureFilesOnDisk)</td></tr>
<tr class="memdesc:a3776903aa012bf28a0107683c8d9a1b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a uniqued list of files that match the given criteria from all search paths.  <a href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">More...</a><br /></td></tr>
<tr class="separator:a3776903aa012bf28a0107683c8d9a1b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57f26ffcc37676a8213c96762a07458a"><td class="memItemLeft" align="right" valign="top">char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a57f26ffcc37676a8213c96762a07458a">FS_ListFiles</a> (const char *path, const char *extension, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *numfiles)</td></tr>
<tr class="memdesc:a57f26ffcc37676a8213c96762a07458a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Directory should not have either a leading or trailing '/' , if extension is "/", only subdirectories will be returned.  <a href="../../d8/d8c/files_8c.html#a57f26ffcc37676a8213c96762a07458a">More...</a><br /></td></tr>
<tr class="separator:a57f26ffcc37676a8213c96762a07458a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e0550cf0dc49189ddff506b01687d38"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList</a> (char **list)</td></tr>
<tr class="separator:a6e0550cf0dc49189ddff506b01687d38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9e3a61cb246fd92cece14039e09dd80"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#aa9e3a61cb246fd92cece14039e09dd80">FS_GetFileList</a> (const char *path, const char *extension, char *listbuf, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> bufsize)</td></tr>
<tr class="separator:aa9e3a61cb246fd92cece14039e09dd80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a1f8b60e7b74de9e8370a54c0e13fb6"><td class="memItemLeft" align="right" valign="top">static unsigned <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">Sys_CountFileList</a> (char **list)</td></tr>
<tr class="memdesc:a1a1f8b60e7b74de9e8370a54c0e13fb6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Count file list.  <a href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">More...</a><br /></td></tr>
<tr class="separator:a1a1f8b60e7b74de9e8370a54c0e13fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad06f3a08b27ffe3a721b0d726e0fa8f7"><td class="memItemLeft" align="right" valign="top">static char **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad06f3a08b27ffe3a721b0d726e0fa8f7">Sys_ConcatenateFileLists</a> (char **list0, char **list1)</td></tr>
<tr class="memdesc:ad06f3a08b27ffe3a721b0d726e0fa8f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">mkv: Naive implementation.  <a href="../../d8/d8c/files_8c.html#ad06f3a08b27ffe3a721b0d726e0fa8f7">More...</a><br /></td></tr>
<tr class="separator:ad06f3a08b27ffe3a721b0d726e0fa8f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d35e4aedee94ce5450b455873bfca2e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a6d35e4aedee94ce5450b455873bfca2e">FS_GetModDescription</a> (const char *modDir, char *description, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> descriptionLen)</td></tr>
<tr class="separator:a6d35e4aedee94ce5450b455873bfca2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13b37fc93130136e7921cf1f1a4283f1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList</a> (char *listbuf, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> bufsize)</td></tr>
<tr class="memdesc:a13b37fc93130136e7921cf1f1a4283f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a list of mod directory names.  <a href="../../d8/d8c/files_8c.html#a13b37fc93130136e7921cf1f1a4283f1">More...</a><br /></td></tr>
<tr class="separator:a13b37fc93130136e7921cf1f1a4283f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14db47fd7a399697847cdd67685c5426"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a14db47fd7a399697847cdd67685c5426">FS_Dir_f</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="separator:a14db47fd7a399697847cdd67685c5426"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b74272893392639294195e6e3b07914"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a6b74272893392639294195e6e3b07914">FS_ConvertPath</a> (char *<a class="el" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>)</td></tr>
<tr class="separator:a6b74272893392639294195e6e3b07914"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2a6bd66a22d9da08effd972d87e9f5b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#af2a6bd66a22d9da08effd972d87e9f5b">FS_PathCmp</a> (const char *s1, const char *s2)</td></tr>
<tr class="memdesc:af2a6bd66a22d9da08effd972d87e9f5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ignore case and seprator char distinctions.  <a href="../../d8/d8c/files_8c.html#af2a6bd66a22d9da08effd972d87e9f5b">More...</a><br /></td></tr>
<tr class="separator:af2a6bd66a22d9da08effd972d87e9f5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b00bf6d8a82595ed18b1d40f7a00fa9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a4b00bf6d8a82595ed18b1d40f7a00fa9">FS_SortFileList</a> (char **filelist, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> numfiles)</td></tr>
<tr class="separator:a4b00bf6d8a82595ed18b1d40f7a00fa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3c0fdcf6f42a8c443fc5c924b72e40d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:af3c0fdcf6f42a8c443fc5c924b72e40d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cmd_AddCommand("fdir", FS_NewDir_f);.  <a href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">More...</a><br /></td></tr>
<tr class="separator:af3c0fdcf6f42a8c443fc5c924b72e40d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed9b00d4e7637e781a7757538adf1dd2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="separator:aed9b00d4e7637e781a7757538adf1dd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab003187b06c3851b2e4650616ba8d67d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ab003187b06c3851b2e4650616ba8d67d">FS_TouchFile_f</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="separator:ab003187b06c3851b2e4650616ba8d67d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ff51d1c7623edd3d80b4b46fb56d467"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a9ff51d1c7623edd3d80b4b46fb56d467">FS_Which</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *searchPath)</td></tr>
<tr class="separator:a9ff51d1c7623edd3d80b4b46fb56d467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e9ce2243dcda4094a06df205ec3f24d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2e9ce2243dcda4094a06df205ec3f24d">FS_Which_f</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="separator:a2e9ce2243dcda4094a06df205ec3f24d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25a8e0c344d0b412acb449c3076d5274"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> <a class="el" href="../../d7/de2/q__platform_8h.html#af8273ae2b4cacc8b918137c2c3f097b1">QDECL</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a25a8e0c344d0b412acb449c3076d5274">paksort</a> (const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *<a class="el" href="../../de/d9f/snd__wavelet_8c.html#a09ebd310e71d5c5075c8631ceee3033d">a</a>, const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *b)</td></tr>
<tr class="separator:a25a8e0c344d0b412acb449c3076d5274"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae393231887d5369c01fda36cdf1d2af8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a> (const char *path, const char *dir)</td></tr>
<tr class="memdesc:ae393231887d5369c01fda36cdf1d2af8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets fs_gamedir, adds the directory to the head of the path, then loads the zip headers.  <a href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">More...</a><br /></td></tr>
<tr class="separator:ae393231887d5369c01fda36cdf1d2af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3c5469d16b3b5b09a1e0fa39c2a0e24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#aa3c5469d16b3b5b09a1e0fa39c2a0e24">FS_idPak</a> (char *pak, char *base, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> numPaks)</td></tr>
<tr class="separator:aa3c5469d16b3b5b09a1e0fa39c2a0e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8db53983b9e96ec4774b5b702427e23f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a8db53983b9e96ec4774b5b702427e23f">FS_CheckDirTraversal</a> (const char *checkdir)</td></tr>
<tr class="memdesc:a8db53983b9e96ec4774b5b702427e23f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the string contains stuff like "../" to prevent directory traversal bugs and return qtrue if it does.  <a href="../../d8/d8c/files_8c.html#a8db53983b9e96ec4774b5b702427e23f">More...</a><br /></td></tr>
<tr class="separator:a8db53983b9e96ec4774b5b702427e23f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a900505aca395309f53085ae0ce5663f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a900505aca395309f53085ae0ce5663f7">FS_InvalidGameDir</a> (const char *gamedir)</td></tr>
<tr class="memdesc:a900505aca395309f53085ae0ce5663f7"><td class="mdescLeft">&#160;</td><td class="mdescRight">return true if path is a reference to current directory or directory traversal or a sub-directory.  <a href="../../d8/d8c/files_8c.html#a900505aca395309f53085ae0ce5663f7">More...</a><br /></td></tr>
<tr class="separator:a900505aca395309f53085ae0ce5663f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a375ac9db1071acc5173c3a73d791d6b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks</a> (char *neededpaks, <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> len, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> dlstring)</td></tr>
<tr class="memdesc:a375ac9db1071acc5173c3a73d791d6b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">FS_ComparePaks.  <a href="../../d8/d8c/files_8c.html#a375ac9db1071acc5173c3a73d791d6b7">More...</a><br /></td></tr>
<tr class="separator:a375ac9db1071acc5173c3a73d791d6b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab467f65f1b3661215ecb4ec7784d816e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> closemfp)</td></tr>
<tr class="memdesc:ab467f65f1b3661215ecb4ec7784d816e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees all resources.  <a href="../../d8/d8c/files_8c.html#ab467f65f1b3661215ecb4ec7784d816e">More...</a><br /></td></tr>
<tr class="separator:ab467f65f1b3661215ecb4ec7784d816e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7ba8f4e667339f48746407580f90d0e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad7ba8f4e667339f48746407580f90d0e">Com_AppendCDKey</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)</td></tr>
<tr class="separator:ad7ba8f4e667339f48746407580f90d0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1de8ef7048063ff2bd814d66f47d74e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a1de8ef7048063ff2bd814d66f47d74e0">Com_ReadCDKey</a> (const char *<a class="el" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)</td></tr>
<tr class="separator:a1de8ef7048063ff2bd814d66f47d74e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d875191082cf26460654f6fb6d6e662"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:a0d875191082cf26460654f6fb6d6e662"><td class="mdescLeft">&#160;</td><td class="mdescRight">FS_ReorderPurePaks.  <a href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">More...</a><br /></td></tr>
<tr class="separator:a0d875191082cf26460654f6fb6d6e662"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d05f54011f03ca6fb928a1931f35eb"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup</a> (const char *gameName)</td></tr>
<tr class="separator:a14d05f54011f03ca6fb928a1931f35eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bac3dbf64742f2e95e53600288d6d5c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:a0bac3dbf64742f2e95e53600288d6d5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether any of the original id pak files is present, and start up in standalone mode, if there are none and a different com_basegame was set.  <a href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">More...</a><br /></td></tr>
<tr class="separator:a0bac3dbf64742f2e95e53600288d6d5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf8781bbd0104a2bee1d53f1a3413c9"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#acdf8781bbd0104a2bee1d53f1a3413c9">FS_LoadedPakChecksums</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:acdf8781bbd0104a2bee1d53f1a3413c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a space separated string containing the checksums of all loaded pk3 files.  <a href="../../d8/d8c/files_8c.html#acdf8781bbd0104a2bee1d53f1a3413c9">More...</a><br /></td></tr>
<tr class="separator:acdf8781bbd0104a2bee1d53f1a3413c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35212f789c0b97e6971ee34361583e63"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a35212f789c0b97e6971ee34361583e63">FS_LoadedPakNames</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:a35212f789c0b97e6971ee34361583e63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a space separated string containing the names of all loaded pk3 files.  <a href="../../d8/d8c/files_8c.html#a35212f789c0b97e6971ee34361583e63">More...</a><br /></td></tr>
<tr class="separator:a35212f789c0b97e6971ee34361583e63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af287f1310afea542ea308bb4e5cf8910"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#af287f1310afea542ea308bb4e5cf8910">FS_LoadedPakPureChecksums</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:af287f1310afea542ea308bb4e5cf8910"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a space separated string containing the checksums of all loaded pk3 files.  <a href="../../d8/d8c/files_8c.html#af287f1310afea542ea308bb4e5cf8910">More...</a><br /></td></tr>
<tr class="separator:af287f1310afea542ea308bb4e5cf8910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7830bbd93c06152b49bef6e49ec2cac4"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a7830bbd93c06152b49bef6e49ec2cac4">FS_ReferencedPakChecksums</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:a7830bbd93c06152b49bef6e49ec2cac4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a space separated string containing the checksums of all referenced pk3 files.  <a href="../../d8/d8c/files_8c.html#a7830bbd93c06152b49bef6e49ec2cac4">More...</a><br /></td></tr>
<tr class="separator:a7830bbd93c06152b49bef6e49ec2cac4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cd8d5cc010597eca54a3af1b12141f3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a1cd8d5cc010597eca54a3af1b12141f3">FS_ReferencedPakPureChecksums</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:a1cd8d5cc010597eca54a3af1b12141f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a space separated string containing the checksums of all loaded AND referenced pk3 files.  <a href="../../d8/d8c/files_8c.html#a1cd8d5cc010597eca54a3af1b12141f3">More...</a><br /></td></tr>
<tr class="separator:a1cd8d5cc010597eca54a3af1b12141f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3383b0380111f9f9645c961011849ea7"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3383b0380111f9f9645c961011849ea7">FS_ReferencedPakNames</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:a3383b0380111f9f9645c961011849ea7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a space separated string containing the names of all referenced pk3 files.  <a href="../../d8/d8c/files_8c.html#a3383b0380111f9f9645c961011849ea7">More...</a><br /></td></tr>
<tr class="separator:a3383b0380111f9f9645c961011849ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac081b293868efda8f11bde4a39a0792e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ac081b293868efda8f11bde4a39a0792e">FS_ClearPakReferences</a> (<a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> flags)</td></tr>
<tr class="memdesc:ac081b293868efda8f11bde4a39a0792e"><td class="mdescLeft">&#160;</td><td class="mdescRight">clears referenced booleans on loaded pk3s.  <a href="../../d8/d8c/files_8c.html#ac081b293868efda8f11bde4a39a0792e">More...</a><br /></td></tr>
<tr class="separator:ac081b293868efda8f11bde4a39a0792e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac259dfbc6260f1056d4a2b82c8d788db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks</a> (const char *pakSums, const char *pakNames)</td></tr>
<tr class="memdesc:ac259dfbc6260f1056d4a2b82c8d788db"><td class="mdescLeft">&#160;</td><td class="mdescRight">If the string is empty, all data sources will be allowed.  <a href="../../d8/d8c/files_8c.html#ac259dfbc6260f1056d4a2b82c8d788db">More...</a><br /></td></tr>
<tr class="separator:ac259dfbc6260f1056d4a2b82c8d788db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5fff84a7d6f1fc02e946cbb99cad0e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae5fff84a7d6f1fc02e946cbb99cad0e5">FS_PureServerSetReferencedPaks</a> (const char *pakSums, const char *pakNames)</td></tr>
<tr class="memdesc:ae5fff84a7d6f1fc02e946cbb99cad0e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The checksums and names of the pk3 files referenced at the server are sent to the client and stored here.  <a href="../../d8/d8c/files_8c.html#ae5fff84a7d6f1fc02e946cbb99cad0e5">More...</a><br /></td></tr>
<tr class="separator:ae5fff84a7d6f1fc02e946cbb99cad0e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa392470e1a37d86f0a2fdb60d5f9210e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="memdesc:aa392470e1a37d86f0a2fdb60d5f9210e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called only at initial startup, not when the filesystem is resetting due to a game change.  <a href="../../d8/d8c/files_8c.html#aa392470e1a37d86f0a2fdb60d5f9210e">More...</a><br /></td></tr>
<tr class="separator:aa392470e1a37d86f0a2fdb60d5f9210e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7859424617923fdf80df33e240fdb893"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart</a> (<a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> checksumFeed)</td></tr>
<tr class="memdesc:a7859424617923fdf80df33e240fdb893"><td class="mdescLeft">&#160;</td><td class="mdescRight">Shutdown and restart the filesystem so changes to fs_gamedir can take effect.  <a href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">More...</a><br /></td></tr>
<tr class="separator:a7859424617923fdf80df33e240fdb893"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a697fd2c8fa7a3bb47ec8bd73385c40ed"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart</a> (<a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> checksumFeed, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> disconnect)</td></tr>
<tr class="memdesc:a697fd2c8fa7a3bb47ec8bd73385c40ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restart if necessary.  <a href="../../d8/d8c/files_8c.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">More...</a><br /></td></tr>
<tr class="separator:a697fd2c8fa7a3bb47ec8bd73385c40ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2671d7fe6e49c046aa3fb5659b18696f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2671d7fe6e49c046aa3fb5659b18696f">FS_FOpenFileByMode</a> (const char *qpath, <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *f, <a class="el" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323ab">fsMode_t</a> <a class="el" href="../../d2/db7/ioapi_8h.html#ac964b0cf0c94deb3fd1b75f58fe84c11">mode</a>)</td></tr>
<tr class="memdesc:a2671d7fe6e49c046aa3fb5659b18696f"><td class="mdescLeft">&#160;</td><td class="mdescRight">opens a file for reading, writing, or appending depending on the value of mode.  <a href="../../d8/d8c/files_8c.html#a2671d7fe6e49c046aa3fb5659b18696f">More...</a><br /></td></tr>
<tr class="separator:a2671d7fe6e49c046aa3fb5659b18696f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dcb6aeb63861669677dec37c033f807"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a5dcb6aeb63861669677dec37c033f807">FS_FTell</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f)</td></tr>
<tr class="memdesc:a5dcb6aeb63861669677dec37c033f807"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tell where we are.  <a href="../../d8/d8c/files_8c.html#a5dcb6aeb63861669677dec37c033f807">More...</a><br /></td></tr>
<tr class="separator:a5dcb6aeb63861669677dec37c033f807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8090de10f7d898f9365e63c2bc97291"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ab8090de10f7d898f9365e63c2bc97291">FS_Flush</a> (<a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f)</td></tr>
<tr class="separator:ab8090de10f7d898f9365e63c2bc97291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5577445f5311114a0d765a7077f5744e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a5577445f5311114a0d765a7077f5744e">FS_FilenameCompletion</a> (const char *dir, const char *ext, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> stripExt, <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>(*callback)(const char *<a class="el" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>), <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> allowNonPureFilesOnDisk)</td></tr>
<tr class="separator:a5577445f5311114a0d765a7077f5744e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb9e1b8c14757cfe172a3ebf022bcd6"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2fb9e1b8c14757cfe172a3ebf022bcd6">FS_GetCurrentGameDir</a> (<a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>)</td></tr>
<tr class="separator:a2fb9e1b8c14757cfe172a3ebf022bcd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2851e3b9ecde9cfb96796ec8cc696053"><td class="memItemLeft" align="right" valign="top">static const unsigned <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2851e3b9ecde9cfb96796ec8cc696053">pak_checksums</a> []</td></tr>
<tr class="separator:a2851e3b9ecde9cfb96796ec8cc696053"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6af732036ed49564ce032e345f5b405"><td class="memItemLeft" align="right" valign="top">static const unsigned <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ac6af732036ed49564ce032e345f5b405">missionpak_checksums</a> []</td></tr>
<tr class="separator:ac6af732036ed49564ce032e345f5b405"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a0d4940920cae5cd03989225834c4bb"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a> [<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td></tr>
<tr class="memdesc:a0a0d4940920cae5cd03989225834c4bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">this will be a single file name with no separators.  <a href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">More...</a><br /></td></tr>
<tr class="separator:a0a0d4940920cae5cd03989225834c4bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e64d1d88a399fb3d1dcfc582326ccde"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a></td></tr>
<tr class="separator:a3e64d1d88a399fb3d1dcfc582326ccde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab531c515d93bd273104648ca6e06d3e9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a></td></tr>
<tr class="separator:ab531c515d93bd273104648ca6e06d3e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd37cc08d045674e76f674ae6a03051"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a></td></tr>
<tr class="separator:a3cd37cc08d045674e76f674ae6a03051"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6f954ef4612e6512fe03502b1e279ec"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a></td></tr>
<tr class="separator:ad6f954ef4612e6512fe03502b1e279ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a938c473ecd04cd5f883e6da32d9e7e4a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a></td></tr>
<tr class="separator:a938c473ecd04cd5f883e6da32d9e7e4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b7aef69f91c6fd24c87dc983cfee937"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a></td></tr>
<tr class="separator:a9b7aef69f91c6fd24c87dc983cfee937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40a7a15cecdc9d90a1c9156f76325ab2"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a></td></tr>
<tr class="separator:a40a7a15cecdc9d90a1c9156f76325ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a708b7c81b06465508d84fee7e40aa257"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/d8c/files_8c.html#ad981c40cf85a47ca73156ece3fe32c31">searchpath_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a></td></tr>
<tr class="separator:a708b7c81b06465508d84fee7e40aa257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a7653feeeb72d09401102400c55f6f3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3a7653feeeb72d09401102400c55f6f3">fs_readCount</a></td></tr>
<tr class="memdesc:a3a7653feeeb72d09401102400c55f6f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">total bytes read.  <a href="../../d8/d8c/files_8c.html#a3a7653feeeb72d09401102400c55f6f3">More...</a><br /></td></tr>
<tr class="separator:a3a7653feeeb72d09401102400c55f6f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cbd9bc46024eeafe267d1e3a4dfad06"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a2cbd9bc46024eeafe267d1e3a4dfad06">fs_loadCount</a></td></tr>
<tr class="memdesc:a2cbd9bc46024eeafe267d1e3a4dfad06"><td class="mdescLeft">&#160;</td><td class="mdescRight">total files read.  <a href="../../d8/d8c/files_8c.html#a2cbd9bc46024eeafe267d1e3a4dfad06">More...</a><br /></td></tr>
<tr class="separator:a2cbd9bc46024eeafe267d1e3a4dfad06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae978c586cc2c42c3351d74281bbe64b3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a></td></tr>
<tr class="memdesc:ae978c586cc2c42c3351d74281bbe64b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">total files in memory.  <a href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">More...</a><br /></td></tr>
<tr class="separator:ae978c586cc2c42c3351d74281bbe64b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d9f952e589557b6e08b3ab2fd90852e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">fs_packFiles</a> = 0</td></tr>
<tr class="memdesc:a3d9f952e589557b6e08b3ab2fd90852e"><td class="mdescLeft">&#160;</td><td class="mdescRight">total number of files in packs.  <a href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">More...</a><br /></td></tr>
<tr class="separator:a3d9f952e589557b6e08b3ab2fd90852e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40b145fdbc84b66bb8d3a901c09c79ef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a></td></tr>
<tr class="separator:a40b145fdbc84b66bb8d3a901c09c79ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62e052f74b4964c2e9a712b12efb288e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d8/dbc/structfile_handle_data__t.html">fileHandleData_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a> [<a class="el" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>]</td></tr>
<tr class="separator:a62e052f74b4964c2e9a712b12efb288e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5954e21375aa787d541039dd33681b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a></td></tr>
<tr class="memdesc:a3b5954e21375aa787d541039dd33681b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Whether we did a reorder on the current search path when joining the server.  <a href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">More...</a><br /></td></tr>
<tr class="separator:a3b5954e21375aa787d541039dd33681b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40e76dfd3d7fc3350e4622886146518f"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a> = 0</td></tr>
<tr class="memdesc:a40e76dfd3d7fc3350e4622886146518f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Never load anything from pk3 files that are not present at the server when pure.  <a href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">More...</a><br /></td></tr>
<tr class="separator:a40e76dfd3d7fc3350e4622886146518f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8a7248e8a691f0165dd1b1cc58721ef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a> [<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td></tr>
<tr class="memdesc:ac8a7248e8a691f0165dd1b1cc58721ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">checksums.  <a href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">More...</a><br /></td></tr>
<tr class="separator:ac8a7248e8a691f0165dd1b1cc58721ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a349dcf043719b25af7d268ebcf553da0"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">fs_serverPakNames</a> [<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td></tr>
<tr class="memdesc:a349dcf043719b25af7d268ebcf553da0"><td class="mdescLeft">&#160;</td><td class="mdescRight">pk3 names.  <a href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">More...</a><br /></td></tr>
<tr class="separator:a349dcf043719b25af7d268ebcf553da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab93fddea633353e7697001f72a5a833a"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a></td></tr>
<tr class="separator:ab93fddea633353e7697001f72a5a833a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d9456f921dcffa56a7f62c18675d033"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a> [<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td></tr>
<tr class="memdesc:a1d9456f921dcffa56a7f62c18675d033"><td class="mdescLeft">&#160;</td><td class="mdescRight">checksums.  <a href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">More...</a><br /></td></tr>
<tr class="separator:a1d9456f921dcffa56a7f62c18675d033"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6b5456b3205acbacc0c5556e57f0daa"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a> [<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td></tr>
<tr class="memdesc:aa6b5456b3205acbacc0c5556e57f0daa"><td class="mdescLeft">&#160;</td><td class="mdescRight">pk3 names.  <a href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">More...</a><br /></td></tr>
<tr class="separator:aa6b5456b3205acbacc0c5556e57f0daa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a786cbe7f1d25c6eceab37a60823ac73e"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a> [<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td></tr>
<tr class="memdesc:a786cbe7f1d25c6eceab37a60823ac73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last valid game folder used.  <a href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">More...</a><br /></td></tr>
<tr class="separator:a786cbe7f1d25c6eceab37a60823ac73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9641c907249b3e772a5165ecc58b065e"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a> [<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td></tr>
<tr class="memdesc:a9641c907249b3e772a5165ecc58b065e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last valid game folder used.  <a href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">More...</a><br /></td></tr>
<tr class="separator:a9641c907249b3e772a5165ecc58b065e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae44989e789fb1adc7b885c6ef8688f23"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a> [<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td></tr>
<tr class="memdesc:ae44989e789fb1adc7b885c6ef8688f23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last valid game folder used.  <a href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">More...</a><br /></td></tr>
<tr class="separator:ae44989e789fb1adc7b885c6ef8688f23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14541ceecd7df70fa7e5258a057aac0a"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a> [<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td></tr>
<tr class="memdesc:a14541ceecd7df70fa7e5258a057aac0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Last valid game folder used.  <a href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">More...</a><br /></td></tr>
<tr class="separator:a14541ceecd7df70fa7e5258a057aac0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>File system (handle based) for Quake III Arena. </p>
<p>All of Quake's data access is through a hierarchical file system, but the contents of the file system can be transparently merged from several sources.</p>
<p>A "qpath" is a reference to game file data. MAX_ZPATH is 256 characters, which must include a terminating zero. "..", "\\", and ":" are explicitly illegal in qpaths to prevent any references outside the quake directory system.</p>
<p>The "base path" is the path to the directory holding all the game directories and usually the executable. It defaults to ".", but can be overridden with a "+set fs_basepath c:\quake3" command line to allow code debugging in a different directory. Basepath cannot be modified at all after startup. Any files that are created (demos, screenshots, etc) will be created relative to the base path, so base path should usually be writable.</p>
<p>The "home path" is the path used for all write access. On win32 systems we have "base path" == "home path", but on *nix systems the base installation is usually readonly, and "home path" points to ~/.q3a or similar</p>
<p>The user can also install custom mods and content in "home path", so it should be searched along with "home path" and "cd path" for game content.</p>
<p>The "base game" is the directory under the paths where data comes from by default, and can be either "baseq3" or "demoq3".</p>
<p>The "current game" may be the same as the base game, or it may be the name of another directory under the paths that should be searched for files before looking in the base game. This is the basis for addons.</p>
<p>Clients automatically set the game directory after receiving a gamestate from a server, so only servers need to worry about +set fs_game.</p>
<p>No other directories outside of the base game and current game will ever be referenced by filesystem functions.</p>
<p>To save disk space and speed loading, directory trees can be collapsed into zip files. The files use a ".pk3" extension to prevent users from unzipping them accidentally, but otherwise the are simply normal uncompressed zip files. A game directory can have multiple zip files of the form "pak0.pk3", "pak1.pk3", etc. Zip files are searched in decending order from the highest number to the lowest, and will always take precedence over the filesystem. This allows a pk3 distributed as a patch to override all existing data.</p>
<p>Because we will have updated executables freely available online, there is no point to trying to restrict demo / oem versions of the game with code changes. Demo / oem versions should be exactly the same executables as release versions, but with different data that automatically restricts where game media can come from to prevent add-ons from working.</p>
<p>File search order: when FS_FOpenFileRead gets called it will go through the fs_searchpaths structure and stop on the first successful hit. fs_searchpaths is built with successive calls to FS_AddGameDirectory</p>
<p>Additionally, we search in several subdirectories: current game is the current mode base game is a variable to allow mods based on other mods (such as baseq3 + missionpack content combination in a mod for instance) BASEGAME is the hardcoded base game ("baseq3")</p>
<p>e.g. the qpath "sound/newstuff/test.wav" would be searched for in the following places:</p>
<p>home path + current game's zip files home path + current game's directory base path + current game's zip files base path + current game's directory cd path + current game's zip files cd path + current game's directory</p>
<p>home path + base game's zip file home path + base game's directory base path + base game's zip file base path + base game's directory cd path + base game's zip file cd path + base game's directory</p>
<p>home path + BASEGAME's zip file home path + BASEGAME's directory base path + BASEGAME's zip file base path + BASEGAME's directory cd path + BASEGAME's zip file cd path + BASEGAME's directory</p>
<p>server download, to be written to home path + current game's directory.</p>
<p>The filesystem can be safely shutdown and reinitialized with different basedir / cddir / game combinations, but all other subsystems that rely on it (sound, video) must also be forced to restart.</p>
<p>Because the same files are loaded by both the clip model (CM_) and renderer (TR_) subsystems, a simple single-file caching scheme is used. The CM_ subsystems will load the file with a request to cache. Only one file will be kept cached at a time, so any models that are going to be referenced by both subsystems should alternate between the CM_ load function and the ref load function.</p>
<p>TODO: A qpath that starts with a leading slash will always refer to the base game, even if another game is currently active. This allows character models, skins, and sounds to be downloaded to a common directory no matter which game is active.</p>
<p>How to prevent downloading zip files? Pass pk3 file names in systeminfo, and download before <a class="el" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893" title="Shutdown and restart the filesystem so changes to fs_gamedir can take effect.">FS_Restart()</a>?</p>
<p>Aborting a download disconnects the client from the server.</p>
<p>How to mark files as downloadable? Commercial add-ons won't be downloadable.</p>
<p>Non-commercial downloads will want to download the entire zip file. the game would have to be reset to actually read the zip in:</p>
<p>Auto-update information</p>
<p>Path separators</p>
<p>Casing</p>
<p>separate server gamedir and client gamedir, so if the user starts a local game after having connected to a network game, it won't stick with the network game.</p>
<p>allow menu options for game selection?</p>
<p>Read / write config to floppy option.</p>
<p>Different version coexistance?</p>
<p>When building a pak file, make sure a q3config.cfg isn't present in it, or configs will never get loaded from disk!</p>
<p>todo:</p>
<p>downloading (outside fs?) game directory passing and restarting </p>

<p class="definition">Definition in file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7d6e1cf1a8d53f38471e9e9db3faf740"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d6e1cf1a8d53f38471e9e9db3faf740">&#9670;&nbsp;</a></span>__func__</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define __func__&#160;&#160;&#160;&quot;(unknown)&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00331">331</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

</div>
</div>
<a id="a7be0ae4731fad3841a854c2de22ef3b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7be0ae4731fad3841a854c2de22ef3b6">&#9670;&nbsp;</a></span>DEMO_PAK0_CHECKSUM</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DEMO_PAK0_CHECKSUM&#160;&#160;&#160;2985612116u</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Every time a new demo pk3 file is built, this checksum must be updated. </p>
<p>the easiest way to get it is to just run the game and see what it spits out. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00164">164</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

</div>
</div>
<a id="a92854eddea9f8e06383c850a57ac918a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92854eddea9f8e06383c850a57ac918a">&#9670;&nbsp;</a></span>MAX_FILEHASH_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FILEHASH_SIZE&#160;&#160;&#160;1024</td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00199">199</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

</div>
</div>
<a id="ad5b07871465d84bfd80a97dc24093151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5b07871465d84bfd80a97dc24093151">&#9670;&nbsp;</a></span>MAX_FOUND_FILES</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_FOUND_FILES&#160;&#160;&#160;0x1000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02163">2163</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

</div>
</div>
<a id="ae74f0bcfc73dfe6783333835b1ea27ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae74f0bcfc73dfe6783333835b1ea27ba">&#9670;&nbsp;</a></span>MAX_SEARCH_PATHS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_SEARCH_PATHS&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00198">198</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

</div>
</div>
<a id="a7385f187221b07141649520937000a15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7385f187221b07141649520937000a15">&#9670;&nbsp;</a></span>MAX_ZPATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_ZPATH&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00197">197</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

</div>
</div>
<a id="a3fbd31416bb8711f264a06d133a9273d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fbd31416bb8711f264a06d133a9273d">&#9670;&nbsp;</a></span>PK3_SEEK_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PK3_SEEK_BUFFER_SIZE&#160;&#160;&#160;65536</td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01622">1622</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a17b0350b6ca9a5cbdddb50ba177f9862"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a17b0350b6ca9a5cbdddb50ba177f9862">&#9670;&nbsp;</a></span>fileInPack_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_s</a> <a class="el" href="../../d8/d8c/files_8c.html#a17b0350b6ca9a5cbdddb50ba177f9862">fileInPack_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2a6b97c86e853e512209767b84d7f124"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a6b97c86e853e512209767b84d7f124">&#9670;&nbsp;</a></span>qfile_gut</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef union <a class="el" href="../../d4/d60/unionqfile__gus.html">qfile_gus</a> <a class="el" href="../../d8/d8c/files_8c.html#a2a6b97c86e853e512209767b84d7f124">qfile_gut</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6aff03be7fea44d4a4c8d51a8df6fa7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aff03be7fea44d4a4c8d51a8df6fa7d">&#9670;&nbsp;</a></span>qfile_ut</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../de/d47/structqfile__us.html">qfile_us</a> <a class="el" href="../../d8/d8c/files_8c.html#a6aff03be7fea44d4a4c8d51a8df6fa7d">qfile_ut</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad981c40cf85a47ca73156ece3fe32c31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad981c40cf85a47ca73156ece3fe32c31">&#9670;&nbsp;</a></span>searchpath_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="../../df/da7/structsearchpath__s.html">searchpath_s</a> <a class="el" href="../../d8/d8c/files_8c.html#ad981c40cf85a47ca73156ece3fe32c31">searchpath_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ad7ba8f4e667339f48746407580f90d0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7ba8f4e667339f48746407580f90d0e">&#9670;&nbsp;</a></span>Com_AppendCDKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> Com_AppendCDKey </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d19/common_8c_source.html#l02533">2533</a> of file <a class="el" href="../../d8/d19/common_8c_source.html">common.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;{</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f;</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;    <span class="keywordtype">char</span>   <a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>[33];</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;    <span class="keywordtype">char</span>   fbuffer[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>];</div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160; </div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(fbuffer, <span class="keyword">sizeof</span>(fbuffer), <span class="stringliteral">&quot;%s/q3key&quot;</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160; </div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead</a>(fbuffer, &amp;f);</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordflow">if</span> (!f) {</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(&amp;<a class="code" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>[16], <span class="stringliteral">&quot;                &quot;</span>, 17);</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;    }</div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160; </div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>));</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160; </div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, 16, f);</div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(f);</div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160; </div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d19/common_8c.html#abc0aa580e0729cd4040ec4d9d07c46b7">CL_CDKeyValidate</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;        strcat(&amp;<a class="code" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>[16], <a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>);</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(&amp;<a class="code" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>[16], <span class="stringliteral">&quot;                &quot;</span>, 17);</div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    }</div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>, <a class="el" href="../../d8/d19/common_8c.html#abc0aa580e0729cd4040ec4d9d07c46b7">CL_CDKeyValidate()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a1de8ef7048063ff2bd814d66f47d74e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1de8ef7048063ff2bd814d66f47d74e0">&#9670;&nbsp;</a></span>Com_ReadCDKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> Com_ReadCDKey </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d19/common_8c_source.html#l02502">2502</a> of file <a class="el" href="../../d8/d19/common_8c_source.html">common.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;{</div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f;</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <span class="keywordtype">char</span>   <a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>[33];</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordtype">char</span>   fbuffer[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>];</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160; </div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(fbuffer, <span class="keyword">sizeof</span>(fbuffer), <span class="stringliteral">&quot;%s/q3key&quot;</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160; </div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead</a>(fbuffer, &amp;f);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    <span class="keywordflow">if</span> (!f) {</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>, <span class="stringliteral">&quot;                &quot;</span>, 17);</div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;    }</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160; </div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>));</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160; </div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, 16, f);</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(f);</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160; </div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d19/common_8c.html#abc0aa580e0729cd4040ec4d9d07c46b7">CL_CDKeyValidate</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>, <a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, 17);</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>, <span class="stringliteral">&quot;                &quot;</span>, 17);</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;    }</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a>, <a class="el" href="../../d8/d19/common_8c.html#abc0aa580e0729cd4040ec4d9d07c46b7">CL_CDKeyValidate()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a146c14808e970bc75796397ccec06eb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a146c14808e970bc75796397ccec06eb5">&#9670;&nbsp;</a></span>FS_AddFileToList()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_AddFileToList </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>list</em>[MAX_FOUND_FILES], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>nfiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">list</td><td></td></tr>
    <tr><td class="paramname">nfiles</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02202">2202</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;{</div>
<div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;    <span class="keywordtype">int</span>        i;</div>
<div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160; </div>
<div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;    <span class="keywordflow">if</span> (nfiles == <a class="code" href="../../d8/d8c/files_8c.html#ad5b07871465d84bfd80a97dc24093151">MAX_FOUND_FILES</a> - 1) {</div>
<div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;        <span class="keywordflow">return</span> nfiles;</div>
<div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;    }</div>
<div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; nfiles; i++) {</div>
<div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(name, list[i])) {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;            <span class="keywordflow">return</span> nfiles;        <span class="comment">// already in list</span></div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;        }</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;    }</div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;    list[nfiles] = <a class="code" href="../../d8/d19/common_8c.html#accd6e59ffb1ddbc8b7975e74345db7e5">CopyString</a>(name);</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;    nfiles++;</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;    <span class="keywordflow">return</span> nfiles;</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d19/common_8c.html#accd6e59ffb1ddbc8b7975e74345db7e5">CopyString()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad5b07871465d84bfd80a97dc24093151">MAX_FOUND_FILES</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>.</p>

</div>
</div>
<a id="ae393231887d5369c01fda36cdf1d2af8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae393231887d5369c01fda36cdf1d2af8">&#9670;&nbsp;</a></span>FS_AddGameDirectory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_AddGameDirectory </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets fs_gamedir, adds the directory to the head of the path, then loads the zip headers. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">dir</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02910">2910</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;{</div>
<div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* sp;</div>
<div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* pak;</div>
<div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;    <span class="keywordtype">char</span>            curpath[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a> + 1], * pakfile;</div>
<div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;    <span class="keywordtype">int</span>                numfiles;</div>
<div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;    <span class="keywordtype">char</span>** pakfiles;</div>
<div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;    <span class="keywordtype">int</span>                pakfilesi;</div>
<div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;    <span class="keywordtype">char</span>** pakfilestmp;</div>
<div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;    <span class="keywordtype">int</span>                numdirs;</div>
<div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;    <span class="keywordtype">char</span>** pakdirs;</div>
<div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;    <span class="keywordtype">int</span>                pakdirsi;</div>
<div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;    <span class="keywordtype">char</span>** pakdirstmp;</div>
<div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160; </div>
<div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;    <span class="keywordtype">int</span>                pakwhich;</div>
<div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;    <span class="keywordtype">int</span>                len;</div>
<div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160; </div>
<div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;    <span class="comment">// Unique</span></div>
<div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;    <span class="keywordflow">for</span> (sp = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; sp; sp = sp-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;        <span class="keywordflow">if</span> (sp-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a> &amp;&amp; !<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(sp-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, path) &amp;&amp; !<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(sp-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>, dir)) {</div>
<div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;            <span class="keywordflow">return</span>;            <span class="comment">// we&#39;ve already got this one</span></div>
<div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;        }</div>
<div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;    }</div>
<div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160; </div>
<div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, dir, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>));</div>
<div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160; </div>
<div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;    <span class="comment">// find all pak files in this directory</span></div>
<div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(curpath, <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(path, dir, <span class="stringliteral">&quot;&quot;</span>), <span class="keyword">sizeof</span>(curpath));</div>
<div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;    curpath[strlen(curpath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;    <span class="comment">// strip the trailing slash</span></div>
<div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160; </div>
<div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;    <span class="comment">// Get .pk3 files</span></div>
<div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;    pakfiles = <a class="code" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles</a>(curpath, <span class="stringliteral">&quot;.pk3&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;numfiles, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160; </div>
<div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;    qsort(pakfiles, numfiles, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*), <a class="code" href="../../d8/d8c/files_8c.html#a25a8e0c344d0b412acb449c3076d5274">paksort</a>);</div>
<div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160; </div>
<div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>) {</div>
<div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;        numdirs = 0;</div>
<div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;        pakdirs = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;        <span class="comment">// Get top level directories (we&#39;ll filter them later since the Sys_ListFiles filtering is terrible)</span></div>
<div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;        pakdirs = <a class="code" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles</a>(curpath, <span class="stringliteral">&quot;/&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;numdirs, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160; </div>
<div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;        qsort(pakdirs, numdirs, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*), <a class="code" href="../../d8/d8c/files_8c.html#a25a8e0c344d0b412acb449c3076d5274">paksort</a>);</div>
<div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;    }</div>
<div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160; </div>
<div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;    pakfilesi = 0;</div>
<div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;    pakdirsi = 0;</div>
<div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160; </div>
<div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;    <span class="keywordflow">while</span> ((pakfilesi &lt; numfiles) || (pakdirsi &lt; numdirs)) {</div>
<div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;        <span class="comment">// Check if a pakfile or pakdir comes next</span></div>
<div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;        <span class="keywordflow">if</span> (pakfilesi &gt;= numfiles) {</div>
<div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;            <span class="comment">// We&#39;ve used all the pakfiles, it must be a pakdir.</span></div>
<div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;            pakwhich = 0;</div>
<div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pakdirsi &gt;= numdirs) {</div>
<div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;            <span class="comment">// We&#39;ve used all the pakdirs, it must be a pakfile.</span></div>
<div class="line"><a name="l02966"></a><span class="lineno"> 2966</span>&#160;            pakwhich = 1;</div>
<div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;            <span class="comment">// Could be either, compare to see which name comes first</span></div>
<div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;            <span class="comment">// Need tmp variables for appropriate indirection for paksort()</span></div>
<div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;            pakfilestmp = &amp;pakfiles[pakfilesi];</div>
<div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;            pakdirstmp = &amp;pakdirs[pakdirsi];</div>
<div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;            pakwhich = (<a class="code" href="../../d8/d8c/files_8c.html#a25a8e0c344d0b412acb449c3076d5274">paksort</a>(pakfilestmp, pakdirstmp) &lt; 0);</div>
<div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;        }</div>
<div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160; </div>
<div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;        <span class="keywordflow">if</span> (pakwhich) {</div>
<div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;            <span class="comment">// The next .pk3 file is before the next .pk3dir</span></div>
<div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;            pakfile = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(path, dir, pakfiles[pakfilesi]);</div>
<div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;            <span class="keywordflow">if</span> ((pak = <a class="code" href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile</a>(pakfile, pakfiles[pakfilesi])) == 0) {</div>
<div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;                <span class="comment">// This isn&#39;t a .pk3! Next!</span></div>
<div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;                pakfilesi++;</div>
<div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;            }</div>
<div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160; </div>
<div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ad8150938ef90694f4621a31443f06f69">pakPathname</a>, curpath, <span class="keyword">sizeof</span>(pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ad8150938ef90694f4621a31443f06f69">pakPathname</a>));</div>
<div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;            <span class="comment">// store the game name for downloading</span></div>
<div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>, dir, <span class="keyword">sizeof</span>(pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>));</div>
<div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160; </div>
<div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">fs_packFiles</a> += pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a0a5041adb1336a5ff6b8a22a1fe80949">numfiles</a>;</div>
<div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160; </div>
<div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;            search = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>));</div>
<div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;            search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a> = pak;</div>
<div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a> = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>;</div>
<div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a> = search;</div>
<div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160; </div>
<div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;            pakfilesi++;</div>
<div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;            <span class="comment">// The next .pk3dir is before the next .pk3 file</span></div>
<div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;            <span class="comment">// But wait, this could be any directory, we&#39;re filtering to only ending with &quot;.pk3dir&quot; here.</span></div>
<div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;            len = strlen(pakdirs[pakdirsi]);</div>
<div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(pakdirs[pakdirsi], <span class="stringliteral">&quot;.pk3dir&quot;</span>, len)) {</div>
<div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;                <span class="comment">// This isn&#39;t a .pk3dir! Next!</span></div>
<div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;                pakdirsi++;</div>
<div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;            }</div>
<div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160; </div>
<div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            pakfile = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(path, dir, pakdirs[pakdirsi]);</div>
<div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160; </div>
<div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            <span class="comment">// add the directory to the search path</span></div>
<div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;            search = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>));</div>
<div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;            search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(*search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>));</div>
<div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160; </div>
<div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, curpath, <span class="keyword">sizeof</span>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>));    <span class="comment">// c:\quake3\baseq3</span></div>
<div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">fullpath</a>, pakfile, <span class="keyword">sizeof</span>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">fullpath</a>));    <span class="comment">// c:\quake3\baseq3\mypak.pk3dir</span></div>
<div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>, pakdirs[pakdirsi], <span class="keyword">sizeof</span>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>)); <span class="comment">// mypak.pk3dir</span></div>
<div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160; </div>
<div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;            search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a> = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>;</div>
<div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a> = search;</div>
<div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160; </div>
<div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;            pakdirsi++;</div>
<div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;        }</div>
<div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;    }</div>
<div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160; </div>
<div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;    <span class="comment">// done</span></div>
<div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;    <a class="code" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList</a>(pakfiles);</div>
<div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;    <a class="code" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList</a>(pakdirs);</div>
<div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160; </div>
<div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;    <span class="comment">// add the directory to the search path</span></div>
<div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;    search = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>));</div>
<div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;    search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(*search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>));</div>
<div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160; </div>
<div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, path, <span class="keyword">sizeof</span>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>));</div>
<div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">fullpath</a>, curpath, <span class="keyword">sizeof</span>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">fullpath</a>));</div>
<div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>, dir, <span class="keyword">sizeof</span>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>));</div>
<div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160; </div>
<div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;    search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a> = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>;</div>
<div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a> = search;</div>
<div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">searchpath_s::dir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">fs_packFiles</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">directory_t::fullpath</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">directory_t::gamedir</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../dc/dad/structpack__t.html#a0a5041adb1336a5ff6b8a22a1fe80949">pack_t::numfiles</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pack_t::pakGamename</a>, <a class="el" href="../../dc/dad/structpack__t.html#ad8150938ef90694f4621a31443f06f69">pack_t::pakPathname</a>, <a class="el" href="../../d8/d8c/files_8c.html#a25a8e0c344d0b412acb449c3076d5274">paksort()</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">directory_t::path</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a8ad68e370f10bfef0736c91e2fc74a86"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ad68e370f10bfef0736c91e2fc74a86">&#9670;&nbsp;</a></span>FS_BuildOSPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* FS_BuildOSPath </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>game</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>qpath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Qpath may have either forward or backwards slashes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">base</td><td></td></tr>
    <tr><td class="paramname">game</td><td></td></tr>
    <tr><td class="paramname">qpath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00526">526</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;{</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordtype">char</span>    temp[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>];</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span> ospath[2][<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>];</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">int</span> toggle;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160; </div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;    toggle ^= 1;        <span class="comment">// flip-flop to allow two returns without clash</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;    <span class="keywordflow">if</span> (!game || !game[0]) {</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        game = <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    }</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160; </div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(temp, <span class="keyword">sizeof</span>(temp), <span class="stringliteral">&quot;/%s/%s&quot;</span>, game, qpath);</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a97842b2a865eb7cfbcc222ae71c35063">FS_ReplaceSeparators</a>(temp);</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(ospath[toggle], <span class="keyword">sizeof</span>(ospath[0]), <span class="stringliteral">&quot;%s%s&quot;</span>, base, temp);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160; </div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="keywordflow">return</span> ospath[toggle];</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a97842b2a865eb7cfbcc222ae71c35063">FS_ReplaceSeparators()</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#a4109552dda5d1e796dc70717ccb817c4">CL_NextDownload()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a966590935244c0d031a419129bf844a6">FS_FileExists()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad71dab25afd483c3ef8457a060c77076">FS_FindVM()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7669ed35dabfd22231b3651cda65cc37">FS_HomeRemove()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a264d0d65ff0b17851b2861f8a5311042">FS_Rename()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ae79db0585126e3d1cc1062c31b0c6df2">FS_SV_Rename()</a>, and <a class="el" href="../../d6/dfe/l__log_8h.html#aef021609b9fb654c1ff5216cbcb92629">Log_Open()</a>.</p>

</div>
</div>
<a id="a8db53983b9e96ec4774b5b702427e23f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8db53983b9e96ec4774b5b702427e23f">&#9670;&nbsp;</a></span>FS_CheckDirTraversal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_CheckDirTraversal </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>checkdir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether the string contains stuff like "../" to prevent directory traversal bugs and return qtrue if it does. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">checkdir</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03068">3068</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;{</div>
<div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;    <span class="keywordflow">if</span> (strstr(checkdir, <span class="stringliteral">&quot;../&quot;</span>) || strstr(checkdir, <span class="stringliteral">&quot;..\\&quot;</span>))</div>
<div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160; </div>
<div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks()</a>.</p>

</div>
</div>
<a id="aabc6200b9a726797dfbed9738199459c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabc6200b9a726797dfbed9738199459c">&#9670;&nbsp;</a></span>FS_CheckFilenameIsMutable()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_CheckFilenameIsMutable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ERR_FATAL if trying to maniuplate a file with the platform library, QVM, or pk3 extension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">function</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00593">593</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;{</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;    <span class="comment">// Check if the filename ends with the library, QVM, or pk3 extension</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d1/df7/qcommon_8h.html#a3c94e41e22bd0daf27402798c809cd85">Sys_DllExtension</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        || <a class="code" href="../../d3/d86/q__shared_8c.html#a59829788e34ecd790d8e512b224b52d8">COM_CompareExtension</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.qvm&quot;</span>)</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        || <a class="code" href="../../d3/d86/q__shared_8c.html#a59829788e34ecd790d8e512b224b52d8">COM_CompareExtension</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.pk3&quot;</span>)) {</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;%s: Not allowed to manipulate &#39;%s&#39; due &quot;</span></div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="stringliteral">&quot;to %s extension&quot;</span>, <span class="keyword">function</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="code" href="../../d3/d86/q__shared_8c.html#a0860b4d8d99e417446074a0162fb7b6d">COM_GetExtension</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>));</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d86/q__shared_8c.html#a59829788e34ecd790d8e512b224b52d8">COM_CompareExtension()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a0860b4d8d99e417446074a0162fb7b6d">COM_GetExtension()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a3c94e41e22bd0daf27402798c809cd85">Sys_DllExtension()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7669ed35dabfd22231b3651cda65cc37">FS_HomeRemove()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ae6c5a67161e29cb78b2261240dc4da9f">FS_Remove()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a264d0d65ff0b17851b2861f8a5311042">FS_Rename()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ae79db0585126e3d1cc1062c31b0c6df2">FS_SV_Rename()</a>.</p>

</div>
</div>
<a id="a0bac3dbf64742f2e95e53600288d6d5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bac3dbf64742f2e95e53600288d6d5c">&#9670;&nbsp;</a></span>FS_CheckPak0()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_CheckPak0 </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether any of the original id pak files is present, and start up in standalone mode, if there are none and a different com_basegame was set. </p>
<p>Note: If you're building a game that doesn't depend on the Q3 media pak0.pk3, you'll want to remove this by defining STANDALONE in <a class="el" href="../../de/d01/q__shared_8h.html" title="included first by ALL program modules.">q_shared.h</a> </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03448">3448</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;{</div>
<div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* path;</div>
<div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* curpack;</div>
<div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* pakBasename;</div>
<div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> founddemo = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> foundPak = 0, foundTA = 0;</div>
<div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160; </div>
<div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;    <span class="keywordflow">for</span> (path = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; path; path = path-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;        <span class="keywordflow">if</span> (!path-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>)</div>
<div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160; </div>
<div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;        curpack = path-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>;</div>
<div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;        pakBasename = curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a6b6912c1d86e57717e1f52174825c0d6">pakBasename</a>;</div>
<div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160; </div>
<div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>, <span class="stringliteral">&quot;demoq3&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>)</div>
<div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;            &amp;&amp; !<a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(pakBasename, <span class="stringliteral">&quot;pak0&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>)) {</div>
<div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;            <span class="keywordflow">if</span> (curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a> == <a class="code" href="../../d8/d8c/files_8c.html#a7be0ae4731fad3841a854c2de22ef3b6">DEMO_PAK0_CHECKSUM</a>)</div>
<div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;                founddemo = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;        }</div>
<div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160; </div>
<div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>)</div>
<div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;            &amp;&amp; strlen(pakBasename) == 4 &amp;&amp; !<a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(pakBasename, <span class="stringliteral">&quot;pak&quot;</span>, 3)</div>
<div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;            &amp;&amp; pakBasename[3] &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; pakBasename[3] &lt;= <span class="charliteral">&#39;0&#39;</span> + <a class="code" href="../../d1/df7/qcommon_8h.html#a365c7380a4f5454e7a51ec401282eff4">NUM_ID_PAKS</a> - 1) {</div>
<div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;            <span class="keywordflow">if</span> (curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a> != <a class="code" href="../../d8/d8c/files_8c.html#a2851e3b9ecde9cfb96796ec8cc696053">pak_checksums</a>[pakBasename[3] - <span class="charliteral">&#39;0&#39;</span>]) {</div>
<div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;                <span class="keywordflow">if</span> (pakBasename[3] == <span class="charliteral">&#39;0&#39;</span>) {</div>
<div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;                    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n&quot;</span></div>
<div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;                        <span class="stringliteral">&quot;WARNING: &quot;</span> <a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a> <span class="stringliteral">&quot;/pak0.pk3 is present but its checksum (%u)\n&quot;</span></div>
<div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;                        <span class="stringliteral">&quot;is not correct. Please re-copy pak0.pk3 from your\n&quot;</span></div>
<div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;                        <span class="stringliteral">&quot;legitimate Q3 CDROM.\n&quot;</span></div>
<div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n\n\n&quot;</span>,</div>
<div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;                        curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a>);</div>
<div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;                    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n&quot;</span></div>
<div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;                        <span class="stringliteral">&quot;WARNING: &quot;</span> <a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a> <span class="stringliteral">&quot;/pak%d.pk3 is present but its checksum (%u)\n&quot;</span></div>
<div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;                        <span class="stringliteral">&quot;is not correct. Please re-install the point release\n&quot;</span></div>
<div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n\n\n&quot;</span>,</div>
<div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;                        pakBasename[3] - <span class="charliteral">&#39;0&#39;</span>, curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a>);</div>
<div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;                }</div>
<div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;            }</div>
<div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160; </div>
<div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;            foundPak |= 1 &lt;&lt; (pakBasename[3] - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>)</div>
<div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;            &amp;&amp; strlen(pakBasename) == 4 &amp;&amp; !<a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(pakBasename, <span class="stringliteral">&quot;pak&quot;</span>, 3)</div>
<div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;            &amp;&amp; pakBasename[3] &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; pakBasename[3] &lt;= <span class="charliteral">&#39;0&#39;</span> + <a class="code" href="../../d1/df7/qcommon_8h.html#a617a3d7c94e51a30d739ce7cc6f34c92">NUM_TA_PAKS</a> - 1)</div>
<div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160; </div>
<div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;        {</div>
<div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;            <span class="keywordflow">if</span> (curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a> != <a class="code" href="../../d8/d8c/files_8c.html#ac6af732036ed49564ce032e345f5b405">missionpak_checksums</a>[pakBasename[3] - <span class="charliteral">&#39;0&#39;</span>]) {</div>
<div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;                    <span class="stringliteral">&quot;**************************************************\n&quot;</span></div>
<div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;                    <span class="stringliteral">&quot;WARNING: &quot;</span> <a class="code" href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a> <span class="stringliteral">&quot;/pak%d.pk3 is present but its checksum (%u)\n&quot;</span></div>
<div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;                    <span class="stringliteral">&quot;is not correct. Please re-install Team Arena\n&quot;</span></div>
<div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;                    <span class="stringliteral">&quot;**************************************************\n\n\n&quot;</span>,</div>
<div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;                    pakBasename[3] - <span class="charliteral">&#39;0&#39;</span>, curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a>);</div>
<div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;            }</div>
<div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160; </div>
<div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;            foundTA |= 1 &lt;&lt; (pakBasename[3] - <span class="charliteral">&#39;0&#39;</span>);</div>
<div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;            <span class="keywordtype">int</span> index;</div>
<div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160; </div>
<div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;            <span class="comment">// Finally check whether this pak&#39;s checksum is listed because the user tried</span></div>
<div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;            <span class="comment">// to trick us by renaming the file, and set foundPak&#39;s highest bit to indicate this case.</span></div>
<div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160; </div>
<div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;            <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(<a class="code" href="../../d8/d8c/files_8c.html#a2851e3b9ecde9cfb96796ec8cc696053">pak_checksums</a>); index++) {</div>
<div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;                <span class="keywordflow">if</span> (curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a> == <a class="code" href="../../d8/d8c/files_8c.html#a2851e3b9ecde9cfb96796ec8cc696053">pak_checksums</a>[index]) {</div>
<div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;                    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n&quot;</span></div>
<div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;                        <span class="stringliteral">&quot;WARNING: %s is renamed pak file %s%cpak%d.pk3\n&quot;</span></div>
<div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;                        <span class="stringliteral">&quot;Running in standalone mode won&#39;t work\n&quot;</span></div>
<div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;                        <span class="stringliteral">&quot;Please rename, or remove this file\n&quot;</span></div>
<div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n\n\n&quot;</span>,</div>
<div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;                        curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pakFilename</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>, <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, index);</div>
<div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160; </div>
<div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160; </div>
<div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;                    foundPak |= 0x80000000;</div>
<div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;                }</div>
<div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;            }</div>
<div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160; </div>
<div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;            <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(<a class="code" href="../../d8/d8c/files_8c.html#ac6af732036ed49564ce032e345f5b405">missionpak_checksums</a>); index++) {</div>
<div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;                <span class="keywordflow">if</span> (curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a> == <a class="code" href="../../d8/d8c/files_8c.html#ac6af732036ed49564ce032e345f5b405">missionpak_checksums</a>[index]) {</div>
<div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;                    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n&quot;</span></div>
<div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;                        <span class="stringliteral">&quot;WARNING: %s is renamed pak file %s%cpak%d.pk3\n&quot;</span></div>
<div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;                        <span class="stringliteral">&quot;Running in standalone mode won&#39;t work\n&quot;</span></div>
<div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;                        <span class="stringliteral">&quot;Please rename, or remove this file\n&quot;</span></div>
<div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;                        <span class="stringliteral">&quot;**************************************************\n\n\n&quot;</span>,</div>
<div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;                        curpack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pakFilename</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a>, <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, index);</div>
<div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160; </div>
<div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;                    foundTA |= 0x80000000;</div>
<div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;                }</div>
<div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;            }</div>
<div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;        }</div>
<div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;    }</div>
<div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160; </div>
<div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;    <span class="keywordflow">if</span> (!foundPak &amp;&amp; !foundTA &amp;&amp; <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>)) {</div>
<div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;        <a class="code" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a>(<span class="stringliteral">&quot;com_standalone&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>);</div>
<div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;        <a class="code" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a>(<span class="stringliteral">&quot;com_standalone&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>);</div>
<div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160; </div>
<div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d19/common_8c.html#a4a3fc59eece356bb6f4db037e33acf43">com_standalone</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;        <span class="keywordflow">if</span> (!(foundPak &amp; 0x01)) {</div>
<div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;            <span class="keywordflow">if</span> (founddemo) {</div>
<div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;\n\n&quot;</span></div>
<div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;                    <span class="stringliteral">&quot;**************************************************\n&quot;</span></div>
<div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;                    <span class="stringliteral">&quot;WARNING: It looks like you&#39;re using pak0.pk3\n&quot;</span></div>
<div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;                    <span class="stringliteral">&quot;from the demo. This may work fine, but it is not\n&quot;</span></div>
<div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;                    <span class="stringliteral">&quot;guaranteed or supported.\n&quot;</span></div>
<div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;                    <span class="stringliteral">&quot;**************************************************\n\n\n&quot;</span>);</div>
<div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160; </div>
<div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;                foundPak |= 0x01;</div>
<div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;            }</div>
<div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;        }</div>
<div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;    }</div>
<div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160; </div>
<div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160; </div>
<div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d19/common_8c.html#a4a3fc59eece356bb6f4db037e33acf43">com_standalone</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> &amp;&amp; (foundPak &amp; 0x1ff) != 0x1ff) {</div>
<div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;        <span class="keywordtype">char</span> errorText[<a class="code" href="../../de/d01/q__shared_8h.html#adf9097a01af0067c10d749471dbdbe34">MAX_STRING_CHARS</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160; </div>
<div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;        <span class="keywordflow">if</span> ((foundPak &amp; 0x01) != 0x01) {</div>
<div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(errorText, <span class="keyword">sizeof</span>(errorText),</div>
<div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;                <span class="stringliteral">&quot;\&quot;pak0.pk3\&quot; is missing. Please copy it &quot;</span></div>
<div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;                <span class="stringliteral">&quot;from your legitimate Q3 CDROM. &quot;</span>);</div>
<div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;        }</div>
<div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160; </div>
<div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;        <span class="keywordflow">if</span> ((foundPak &amp; 0x1fe) != 0x1fe) {</div>
<div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(errorText, <span class="keyword">sizeof</span>(errorText),</div>
<div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;                <span class="stringliteral">&quot;Point Release files are missing. Please &quot;</span></div>
<div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;                <span class="stringliteral">&quot;re-install the 1.32 point release. &quot;</span>);</div>
<div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;        }</div>
<div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160; </div>
<div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(errorText, <span class="keyword">sizeof</span>(errorText),</div>
<div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;Also check that your ioq3 executable is in &quot;</span></div>
<div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;                <span class="stringliteral">&quot;the correct place and that every file &quot;</span></div>
<div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;                <span class="stringliteral">&quot;in the \&quot;%s\&quot; directory is present and readable&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>));</div>
<div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160; </div>
<div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;%s&quot;</span>, errorText);</div>
<div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;    }</div>
<div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160; </div>
<div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d19/common_8c.html#a4a3fc59eece356bb6f4db037e33acf43">com_standalone</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> &amp;&amp; foundTA &amp;&amp; (foundTA &amp; 0x0f) != 0x0f) {</div>
<div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;        <span class="keywordtype">char</span> errorText[<a class="code" href="../../de/d01/q__shared_8h.html#adf9097a01af0067c10d749471dbdbe34">MAX_STRING_CHARS</a>] = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160; </div>
<div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;        <span class="keywordflow">if</span> ((foundTA &amp; 0x01) != 0x01) {</div>
<div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(errorText, <span class="keyword">sizeof</span>(errorText),</div>
<div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;                <span class="stringliteral">&quot;\&quot;&quot;</span> <a class="code" href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a> <span class="stringliteral">&quot;%cpak0.pk3\&quot; is missing. Please copy it &quot;</span></div>
<div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;                <span class="stringliteral">&quot;from your legitimate Quake 3 Team Arena CDROM. &quot;</span>, <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>);</div>
<div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;        }</div>
<div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160; </div>
<div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;        <span class="keywordflow">if</span> ((foundTA &amp; 0x0e) != 0x0e) {</div>
<div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(errorText, <span class="keyword">sizeof</span>(errorText),</div>
<div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;                <span class="stringliteral">&quot;Team Arena Point Release files are missing. Please &quot;</span></div>
<div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;                <span class="stringliteral">&quot;re-install the latest Team Arena point release.&quot;</span>);</div>
<div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;        }</div>
<div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160; </div>
<div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;%s&quot;</span>, errorText);</div>
<div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;    }</div>
<div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a>, <a class="el" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">pack_t::checksum</a>, <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf()</a>, <a class="el" href="../../d8/d19/common_8c.html#a4a3fc59eece356bb6f4db037e33acf43">com_standalone</a>, <a class="el" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a7be0ae4731fad3841a854c2de22ef3b6">DEMO_PAK0_CHECKSUM</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>, <a class="el" href="../../de/d01/q__shared_8h.html#adf9097a01af0067c10d749471dbdbe34">MAX_STRING_CHARS</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac6af732036ed49564ce032e345f5b405">missionpak_checksums</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a365c7380a4f5454e7a51ec401282eff4">NUM_ID_PAKS</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a617a3d7c94e51a30d739ce7cc6f34c92">NUM_TA_PAKS</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2851e3b9ecde9cfb96796ec8cc696053">pak_checksums</a>, <a class="el" href="../../dc/dad/structpack__t.html#a6b6912c1d86e57717e1f52174825c0d6">pack_t::pakBasename</a>, <a class="el" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pack_t::pakFilename</a>, <a class="el" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pack_t::pakGamename</a>, <a class="el" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="ac081b293868efda8f11bde4a39a0792e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac081b293868efda8f11bde4a39a0792e">&#9670;&nbsp;</a></span>FS_ClearPakReferences()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_ClearPakReferences </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>flags</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>clears referenced booleans on loaded pk3s. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">flags</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03800">3800</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;{</div>
<div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160; </div>
<div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;    <span class="keywordflow">if</span> (!flags) {</div>
<div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;        flags = -1;</div>
<div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;    }</div>
<div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;        <span class="comment">// is the element a pak file and has it been referenced?</span></div>
<div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;            search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> &amp;= ~flags;</div>
<div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;        }</div>
<div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;    }</div>
<div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, and <a class="el" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">pack_t::referenced</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#a7756faa07b21eca228c7dfc65155536d">CL_Vid_Restart_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, and <a class="el" href="../../d5/d49/sv__init_8c.html#ac2c5754f02da3857796506ea5271ccee">SV_SpawnServer()</a>.</p>

</div>
</div>
<a id="a375ac9db1071acc5173c3a73d791d6b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a375ac9db1071acc5173c3a73d791d6b7">&#9670;&nbsp;</a></span>FS_ComparePaks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_ComparePaks </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>neededpaks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>dlstring</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>FS_ComparePaks. </p>
<hr  />
<p>dlstring == qtrue</p>
<p>Returns a list of pak files that we should download from the server. They all get stored in the current gamedir and an FS_Restart will be fired up after we download them all.</p>
<p>The string is the format:</p>
<p>@remotename@localname [repeat]</p>
<p>static int fs_numServerReferencedPaks; static int fs_serverReferencedPaks[MAX_SEARCH_PATHS]; static char *fs_serverReferencedPakNames[MAX_SEARCH_PATHS];</p>
<hr  />
<p>dlstring == qfalse</p>
<p>we are not interested in a download string format, we want something human-readable. (this is used for diagnostics while connecting to a pure server).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">neededpaks</td><td></td></tr>
    <tr><td class="paramname">len</td><td></td></tr>
    <tr><td class="paramname">dlstring</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03122">3122</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;{</div>
<div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* sp;</div>
<div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> havepak;</div>
<div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;    <span class="keywordtype">char</span>* origpos = neededpaks;</div>
<div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160; </div>
<div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a>)</div>
<div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>; <span class="comment">// Server didn&#39;t send any pack information along</span></div>
<div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160; </div>
<div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;    *neededpaks = 0;</div>
<div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160; </div>
<div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a>; i++) {</div>
<div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;        <span class="comment">// Ok, see if we have this pak file</span></div>
<div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;        havepak = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160; </div>
<div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;        <span class="comment">// never autodownload any of the id paks</span></div>
<div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#aa3c5469d16b3b5b09a1e0fa39c2a0e24">FS_idPak</a>(<a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i], <a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>, <a class="code" href="../../d1/df7/qcommon_8h.html#a365c7380a4f5454e7a51ec401282eff4">NUM_ID_PAKS</a>)</div>
<div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;#ifndef STANDALONE</div>
<div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;            || <a class="code" href="../../d8/d8c/files_8c.html#aa3c5469d16b3b5b09a1e0fa39c2a0e24">FS_idPak</a>(<a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i], <a class="code" href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a>, <a class="code" href="../../d1/df7/qcommon_8h.html#a617a3d7c94e51a30d739ce7cc6f34c92">NUM_TA_PAKS</a>)</div>
<div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;#endif</div>
<div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;            ) {</div>
<div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;        }</div>
<div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160; </div>
<div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;        <span class="comment">// Make sure the server cannot make us write to non-quake3 directories.</span></div>
<div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a8db53983b9e96ec4774b5b702427e23f">FS_CheckDirTraversal</a>(<a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i])) {</div>
<div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;WARNING: Invalid download name %s\n&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]);</div>
<div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;        }</div>
<div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160; </div>
<div class="line"><a name="l03153"></a><span class="lineno"> 3153</span>&#160;        <span class="keywordflow">for</span> (sp = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; sp; sp = sp-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;            <span class="keywordflow">if</span> (sp-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a> &amp;&amp; sp-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a> == <a class="code" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a>[i]) {</div>
<div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;                havepak = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>; <span class="comment">// This is it!</span></div>
<div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;            }</div>
<div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;        }</div>
<div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160; </div>
<div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;        <span class="keywordflow">if</span> (!havepak &amp;&amp; <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i] &amp;&amp; *<a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]) {</div>
<div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;            <span class="comment">// Don&#39;t got it</span></div>
<div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160; </div>
<div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;            <span class="keywordflow">if</span> (dlstring) {</div>
<div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;                <span class="comment">// We need this to make sure we won&#39;t hit the end of the buffer or the server could</span></div>
<div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;                <span class="comment">// overwrite non-pk3 files on clients by writing so much crap into neededpaks that</span></div>
<div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;                <span class="comment">// Q_strcat cuts off the .pk3 extension.</span></div>
<div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160; </div>
<div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;                origpos += strlen(origpos);</div>
<div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160; </div>
<div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;                <span class="comment">// Remote name</span></div>
<div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <span class="stringliteral">&quot;@&quot;</span>);</div>
<div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]);</div>
<div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <span class="stringliteral">&quot;.pk3&quot;</span>);</div>
<div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160; </div>
<div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;                <span class="comment">// Local name</span></div>
<div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <span class="stringliteral">&quot;@&quot;</span>);</div>
<div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;                <span class="comment">// Do we have one with the same name?</span></div>
<div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists</a>(<a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%s.pk3&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]))) {</div>
<div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;                    <span class="keywordtype">char</span> st[<a class="code" href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a>];</div>
<div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;                    <span class="comment">// We already have one called this, we need to download it to another name</span></div>
<div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;                    <span class="comment">// Make something up with the checksum in it</span></div>
<div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(st, <span class="keyword">sizeof</span>(st), <span class="stringliteral">&quot;%s.%08x.pk3&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i], <a class="code" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a>[i]);</div>
<div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, st);</div>
<div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]);</div>
<div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <span class="stringliteral">&quot;.pk3&quot;</span>);</div>
<div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;                }</div>
<div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160; </div>
<div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;                <span class="comment">// Find out whether it might have overflowed the buffer and don&#39;t add this file to the</span></div>
<div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;                <span class="comment">// list if that is the case.</span></div>
<div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;                <span class="keywordflow">if</span> (strlen(origpos) + (origpos - neededpaks) &gt;= len - 1) {</div>
<div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;                    *origpos = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;                }</div>
<div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]);</div>
<div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <span class="stringliteral">&quot;.pk3&quot;</span>);</div>
<div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;                <span class="comment">// Do we have one with the same name?</span></div>
<div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists</a>(<a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%s.pk3&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]))) {</div>
<div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <span class="stringliteral">&quot; (local file exists with wrong checksum)&quot;</span>);</div>
<div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;                }</div>
<div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(neededpaks, len, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;            }</div>
<div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;        }</div>
<div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;    }</div>
<div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160; </div>
<div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;    <span class="keywordflow">if</span> (*neededpaks) {</div>
<div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;    }</div>
<div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160; </div>
<div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>; <span class="comment">// We have them all</span></div>
<div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a>, <a class="el" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">pack_t::checksum</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8db53983b9e96ec4774b5b702427e23f">FS_CheckDirTraversal()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aa3c5469d16b3b5b09a1e0fa39c2a0e24">FS_idPak()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a365c7380a4f5454e7a51ec401282eff4">NUM_ID_PAKS</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a617a3d7c94e51a30d739ce7cc6f34c92">NUM_TA_PAKS</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#afcabee2990b1ed4e47e407a1664427ec">CL_InitDownloads()</a>.</p>

</div>
</div>
<a id="adef5a7e7eb51f7c6231a399c8c43ee51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adef5a7e7eb51f7c6231a399c8c43ee51">&#9670;&nbsp;</a></span>FS_CompareZipChecksum()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_CompareZipChecksum </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>zipfile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compares whether the given pak file matches a referenced checksum. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zipfile</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02134">2134</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;{</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* thepak;</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;    <span class="keywordtype">int</span> index, checksum;</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160; </div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;    thepak = <a class="code" href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile</a>(zipfile, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160; </div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;    <span class="keywordflow">if</span> (!thepak)</div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;    checksum = thepak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a>;</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aa1cd6e2d2ec0cfb811788155f7c52689">FS_FreePak</a>(thepak);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;    <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a>; index++) {</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;        <span class="keywordflow">if</span> (checksum == <a class="code" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a>[index])</div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;    }</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">pack_t::checksum</a>, <a class="el" href="../../d8/d8c/files_8c.html#aa1cd6e2d2ec0cfb811788155f7c52689">FS_FreePak()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#a4109552dda5d1e796dc70717ccb817c4">CL_NextDownload()</a>.</p>

</div>
</div>
<a id="a697fd2c8fa7a3bb47ec8bd73385c40ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a697fd2c8fa7a3bb47ec8bd73385c40ed">&#9670;&nbsp;</a></span>FS_ConditionalRestart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_ConditionalRestart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>checksumFeed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>disconnect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restart if necessary. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">checksumFeed</td><td></td></tr>
    <tr><td class="paramname">disconnect</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return qtrue if restarting due to game directory changed, qfalse otherwise. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l04038">4038</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;{</div>
<div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#a5f1df4d8bd348465e156d90ff061cf48">modified</a>) {</div>
<div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>) &amp;&amp;</div>
<div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;            (*<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a> || <a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>)) &amp;&amp;</div>
<div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;            (*<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a> || <a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>, <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>))) {</div>
<div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#a5a0fb0e6f63c56cbf766ea79f1f9a662">Com_GameRestart</a>(checksumFeed, disconnect);</div>
<div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;        } <span class="keywordflow">else</span></div>
<div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#a5f1df4d8bd348465e156d90ff061cf48">modified</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;    }</div>
<div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160; </div>
<div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;    <span class="keywordflow">if</span> (checksumFeed != <a class="code" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>)</div>
<div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart</a>(checksumFeed);</div>
<div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a> &amp;&amp; !<a class="code" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a>)</div>
<div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks</a>();</div>
<div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160; </div>
<div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d8/d19/common_8c.html#a5a0fb0e6f63c56cbf766ea79f1f9a662">Com_GameRestart()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>, <a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>, <a class="el" href="../../d8/d20/structcvar__s.html#a5f1df4d8bd348465e156d90ff061cf48">cvar_s::modified</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#a30391de17101153017e0d72f397b9ecf">CL_OldGame()</a>, <a class="el" href="../../d4/d53/cl__parse_8c.html#a7c2f3786024b5701f4ab2796d9145cff">CL_ParseGamestate()</a>, and <a class="el" href="../../d8/de1/client_8h.html#a7756faa07b21eca228c7dfc65155536d">CL_Vid_Restart_f()</a>.</p>

</div>
</div>
<a id="a6b74272893392639294195e6e3b07914"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b74272893392639294195e6e3b07914">&#9670;&nbsp;</a></span>FS_ConvertPath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_ConvertPath </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02672">2672</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;{</div>
<div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;    <span class="keywordflow">while</span> (*<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>) {</div>
<div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;        <span class="keywordflow">if</span> (*<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> == <span class="charliteral">&#39;\\&#39;</span> || *<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> == <span class="charliteral">&#39;:&#39;</span>) {</div>
<div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;            *<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;        }</div>
<div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;        <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>++;</div>
<div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;    }</div>
<div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a5577445f5311114a0d765a7077f5744e">FS_FilenameCompletion()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f()</a>.</p>

</div>
</div>
<a id="a893ba65b550aec713c7954e948bad98f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a893ba65b550aec713c7954e948bad98f">&#9670;&nbsp;</a></span>FS_CreatePath()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_CreatePath </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>OSPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates any directories needed to store the given filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">OSPath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00551">551</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    <span class="keywordtype">char</span>* ofs;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="keywordtype">char</span>    path[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>];</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160; </div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="comment">// make absolutely sure that it can&#39;t back up the path</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    <span class="comment">// FIXME: is c: allowed???</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    <span class="keywordflow">if</span> (strstr(OSPath, <span class="stringliteral">&quot;..&quot;</span>) || strstr(OSPath, <span class="stringliteral">&quot;::&quot;</span>)) {</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;WARNING: refusing to create relative path \&quot;%s\&quot;\n&quot;</span>, OSPath);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160; </div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(path, OSPath, <span class="keyword">sizeof</span>(path));</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a97842b2a865eb7cfbcc222ae71c35063">FS_ReplaceSeparators</a>(path);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160; </div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">// Skip creation of the root directory as it will always be there</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;    ofs = strchr(path, <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="keywordflow">if</span> (ofs != <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        ofs++;</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;    }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160; </div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    <span class="keywordflow">for</span> (; ofs != <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; *ofs; ofs++) {</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span> (*ofs == <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>) {</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            <span class="comment">// create the directory</span></div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            *ofs = 0;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d1/df7/qcommon_8h.html#abbc0e268738cb137929c72843d501a53">Sys_Mkdir</a>(path)) {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_CreatePath: failed to create path \&quot;%s\&quot;&quot;</span>,</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    path);</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;            }</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;            *ofs = <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;        }</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    }</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a97842b2a865eb7cfbcc222ae71c35063">FS_ReplaceSeparators()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#abbc0e268738cb137929c72843d501a53">Sys_Mkdir()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>, and <a class="el" href="../../d5/dd6/sys__main_8c.html#a933a5e125d0487f4cad138b8a39133bd">Sys_WritePIDFile()</a>.</p>

</div>
</div>
<a id="a14db47fd7a399697847cdd67685c5426"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14db47fd7a399697847cdd67685c5426">&#9670;&nbsp;</a></span>FS_Dir_f()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Dir_f </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02636">2636</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;{</div>
<div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;    <span class="keywordtype">char</span>* path;</div>
<div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;    <span class="keywordtype">char</span>* extension;</div>
<div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;    <span class="keywordtype">char</span>** dirnames;</div>
<div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;    <span class="keywordtype">int</span>        ndirs;</div>
<div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;    <span class="keywordtype">int</span>        i;</div>
<div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160; </div>
<div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>() &lt; 2 || <a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>() &gt; 3) {</div>
<div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;usage: dir &lt;directory&gt; [extension]\n&quot;</span>);</div>
<div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;    }</div>
<div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160; </div>
<div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>() == 2) {</div>
<div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;        path = <a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(1);</div>
<div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;        extension = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;        path = <a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(1);</div>
<div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;        extension = <a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(2);</div>
<div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;    }</div>
<div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160; </div>
<div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;Directory of %s %s\n&quot;</span>, path, extension);</div>
<div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;---------------\n&quot;</span>);</div>
<div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160; </div>
<div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;    dirnames = <a class="code" href="../../d8/d8c/files_8c.html#a57f26ffcc37676a8213c96762a07458a">FS_ListFiles</a>(path, extension, &amp;ndirs);</div>
<div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160; </div>
<div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; ndirs; i++) {</div>
<div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, dirnames[i]);</div>
<div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;    }</div>
<div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList</a>(dirnames);</div>
<div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc()</a>, <a class="el" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a57f26ffcc37676a8213c96762a07458a">FS_ListFiles()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a3c4ec3bde86c3cb7549952febebbbc9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c4ec3bde86c3cb7549952febebbbc9b">&#9670;&nbsp;</a></span>FS_FCloseFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_FCloseFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the FILE pointer is an open pak file, leave it open. </p>
<p>For some reason, other dll's can't just cal fclose() on files returned by FS_FOpenFile...</p>
<p>note: you can't just fclose from another DLL, due to MS libc issues.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00880">880</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;    }</div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160; </div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].zipFile == <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>) {</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        <a class="code" href="../../d6/da7/unzip_8c.html#ac48279e5325cfdabbc67a312b1d32700">unzCloseCurrentFile</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.z);</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.unique) {</div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#af6ab0ba88ab5da62747df8f9336f1bb3">unzClose</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.z);</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;        }</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;        <a class="code" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(&amp;<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f], 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f]));</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;    }</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160; </div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;    <span class="comment">// we didn&#39;t find it as a pak, so close it as a unique file</span></div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o) {</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;        fclose(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o);</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;    }</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(&amp;<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f], 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f]));</div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, <a class="el" href="../../d6/da7/unzip_8c.html#af6ab0ba88ab5da62747df8f9336f1bb3">unzClose()</a>, and <a class="el" href="../../d6/da7/unzip_8c.html#ac48279e5325cfdabbc67a312b1d32700">unzCloseCurrentFile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/dde/cl__cgame_8c.html#a71ede2bb98f1ae6f01efc81cd25f4a3c">CL_CgameSystemCalls()</a>, <a class="el" href="../../d8/de1/client_8h.html#a7d10cc40f267012964f0144ed90c0768">CL_CloseAVI()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#afb207419701d140ad2fd6efbf659cfda">CL_DemoCompleted()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#af070127d1b56d0e78f3b844d2902fcda">CL_Disconnect()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#af4e5f71b8a1ed203717338b513b7ec16">CL_GenerateQKey()</a>, <a class="el" href="../../d8/de1/client_8h.html#ab3428055e93d99224b0dfc2dd0906320">CL_LoadConsoleHistory()</a>, <a class="el" href="../../d8/de1/client_8h.html#a724604b6c9ade91b0692f6863c0bf492">CL_OpenAVIForWriting()</a>, <a class="el" href="../../d4/d53/cl__parse_8c.html#aeca488e72296ca4f7c15070046ea8c63">CL_ParseDownload()</a>, <a class="el" href="../../d8/de1/client_8h.html#a8b7397f7c1e0de4f6d89e1b6d984eedc">CL_SaveConsoleHistory()</a>, <a class="el" href="../../d8/de1/client_8h.html#a0bcfb5770413c65dc1c6409f56e35163">CL_StopRecord_f()</a>, <a class="el" href="../../d9/dd6/cl__ui_8c.html#a816b2b94718d7146f200ba4a378c6834">CL_UISystemCalls()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#ab92ccfd130b5622092a771455bc18b68">CL_UpdateGUID()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad7ba8f4e667339f48746407580f90d0e">Com_AppendCDKey()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6efb2ecbf6e3e60a7d216c91a82e951c">Com_MD5File()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1de8ef7048063ff2bd814d66f47d74e0">Com_ReadCDKey()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac35b061af7f9355c2c3906433f95f80e">Com_Shutdown()</a>, <a class="el" href="../../d8/d19/common_8c.html#af7503f857ab4b343d8e47b13d103b613">Com_WriteCDKey()</a>, <a class="el" href="../../d8/d19/common_8c.html#a6b4aa8ef2ffefa9263cfa04b52565d95">Com_WriteConfigToFile()</a>, <a class="el" href="../../dd/d5a/cl__console_8c.html#aa4063c6dde81cbf162b11d302350fdef">Con_Dump_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6d35e4aedee94ce5450b455873bfca2e">FS_GetModDescription()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab003187b06c3851b2e4650616ba8d67d">FS_TouchFile_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#af5bb678d83f1c6291ddfe69eb4267030">FS_WriteFile()</a>, <a class="el" href="../../d8/de1/client_8h.html#aa213f972c9f4474bf1dc8de2d63ed08e">LAN_LoadCachedServers()</a>, <a class="el" href="../../d8/de1/client_8h.html#a6f76347c8dee334ffb1c5d834bc309c4">LAN_SaveServersToCache()</a>, <a class="el" href="../../df/d64/cl__cin_8c.html#aaf93fb352b2cca41d16e101b79d3992c">RoQReset()</a>, <a class="el" href="../../df/d64/cl__cin_8c.html#ac26c0d179877e6f77b4f85fb1756f265">RoQShutdown()</a>, <a class="el" href="../../d2/db9/snd__codec_8h.html#a4b26f4e9ab2b5ca295751097907b1fcf">S_CodecUtilClose()</a>, <a class="el" href="../../d2/db9/snd__codec_8h.html#ae422cabfeae85d6ec9d6f94f93c1cc95">S_CodecUtilOpen()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a8f0c5acee1988796f49090cc8b947714">S_WAV_CodecLoad()</a>, <a class="el" href="../../d5/d09/sv__bot_8c.html#ab297fdd094aac594bca6abeda876b949">SV_BotInitBotLib()</a>, <a class="el" href="../../db/d01/sv__client_8c.html#ab5b8f5c5b00b14cc8d15a450bd5d1822">SV_CloseDownload()</a>, <a class="el" href="../../d7/d3c/sv__game_8c.html#a73948936d23d65d3a27c6027767af7c8">SV_GameSystemCalls()</a>, <a class="el" href="../../d6/df0/sv__ccmds_8c.html#afedaa2cfe45e23191b2125fe8ff9a8cb">SV_RehashBans_f()</a>, <a class="el" href="../../d5/d49/sv__init_8c.html#aabbcbd48dc0125fba8055530af7f650f">SV_TouchFile()</a>, <a class="el" href="../../d6/df0/sv__ccmds_8c.html#a1a0a205b55ebb0978d5dc97c823f4093">SV_WriteBans()</a>, and <a class="el" href="../../db/d01/sv__client_8c.html#a9e3957a357260512ec0724ce88c5c581">SV_WriteDownloadToClient()</a>.</p>

</div>
</div>
<a id="a6fd15f3ba87302abddf2d7466af52ed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fd15f3ba87302abddf2d7466af52ed8">&#9670;&nbsp;</a></span>FS_FCreateOpenPipeFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> FS_FCreateOpenPipeFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Will properly create any needed paths and deal with seperater character issues. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00993">993</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;{</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="keywordtype">char</span>* ospath;</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    FILE* fifo;</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    f;</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160; </div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    }</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    f = <a class="code" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a>();</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">zipFile</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160; </div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name));</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160; </div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="comment">// don&#39;t let sound stutter</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <a class="code" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer</a>();</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;    ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_FCreateOpenPipeFile: %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    }</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160; </div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(ospath, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    fifo = <a class="code" href="../../d1/df7/qcommon_8h.html#aed21bf3c863714c04ffac47ebf9a9fbb">Sys_Mkfifo</a>(ospath);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">if</span> (fifo) {</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = fifo;</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<a class="code" href="../../de/d01/q__shared_8h.html#ae04565b0ef2c0bc3b0bb84c7a75bcd4e">S_COLOR_YELLOW</a> <span class="stringliteral">&quot;WARNING: Could not create new com_pipefile at %s. &quot;</span></div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;            <span class="stringliteral">&quot;com_pipefile will not be used.\n&quot;</span>, ospath);</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        f = 0;</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;    }</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160; </div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;    <span class="keywordflow">return</span> f;</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">fileHandleData_t::handleSync</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#ae04565b0ef2c0bc3b0bb84c7a75bcd4e">S_COLOR_YELLOW</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aed21bf3c863714c04ffac47ebf9a9fbb">Sys_Mkfifo()</a>, and <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">fileHandleData_t::zipFile</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a2c763f2f5b9d3262b65192c08d1e8744">Com_Init()</a>.</p>

</div>
</div>
<a id="a966590935244c0d031a419129bf844a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a966590935244c0d031a419129bf844a6">&#9670;&nbsp;</a></span>FS_FileExists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_FileExists </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tests if the file exists in the current gamedir, this DOES NOT search the paths. </p>
<p>This is to determine if opening a file to write (which always goes into the current gamedir) will cause any overwrites.</p>
<p>NOTE TTimo: this goes with FS_FOpenFileWrite for opening the file afterwards.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00658">658</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;{</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists</a>(<a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, file));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a737fb4745a9b5322c41533d5c870dbbd">CL_InitRef()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#a39d84591bff8ab333c7fa8875c35d42b">CL_Record_f()</a>, and <a class="el" href="../../d3/d38/cl__main_8c.html#a0ea97a0b130a2ae5dde0a2524e78f718">CL_Video_f()</a>.</p>

</div>
</div>
<a id="ae62c89198cb4fe6dce52715350cb5017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae62c89198cb4fe6dce52715350cb5017">&#9670;&nbsp;</a></span>FS_FileForHandle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static FILE* FS_FileForHandle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00427">427</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    <span class="keywordflow">if</span> (f &lt; 1 || f &gt;= <a class="code" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>) {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;FS_FileForHandle: out of range&quot;</span>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].zipFile == <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>) {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;FS_FileForHandle: can&#39;t get FILE on zip file&quot;</span>);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    }</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o) {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;FS_FileForHandle: NULL&quot;</span>);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a>;</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <a class="el" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a94716234fc9383efe0af2b1286b4a677">FS_filelength()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a52005b87fc757d0609a63d1e63c015c1">FS_ForceFlush()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6d35e4aedee94ce5450b455873bfca2e">FS_GetModDescription()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a50a6dfd18abd85eb58f5778d8f4a9ce4">FS_Seek()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a733a835e081673c32a6d77556d2c0b24">FS_Write()</a>.</p>

</div>
</div>
<a id="a58f6907cd9c9231ef7991b341ddf5807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58f6907cd9c9231ef7991b341ddf5807">&#9670;&nbsp;</a></span>FS_FileInPathExists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_FileInPathExists </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>testpath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tests if path and file exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">testpath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00634">634</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;{</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    FILE* filep;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160; </div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    filep = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(testpath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160; </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;    <span class="keywordflow">if</span> (filep) {</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        fclose(filep);</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;    }</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160; </div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a966590935244c0d031a419129bf844a6">FS_FileExists()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad71dab25afd483c3ef8457a060c77076">FS_FindVM()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists()</a>.</p>

</div>
</div>
<a id="a762b35729743799fe79df7acd009f3b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a762b35729743799fe79df7acd009f3b7">&#9670;&nbsp;</a></span>FS_FileIsInPAK()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_FileIsInPAK </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *&#160;</td>
          <td class="paramname"><em>pChecksum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns 1 if a file is in the PAK file, otherwise -1. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">pChecksum</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01737">1737</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;{</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* pak;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;    <a class="code" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_t</a>* pakFile;</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;    <span class="keywordtype">long</span>            hash = 0;</div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160; </div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;    }</div>
<div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160; </div>
<div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>) {</div>
<div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_FOpenFileRead: NULL &#39;filename&#39; parameter passed&quot;</span>);</div>
<div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;    }</div>
<div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160; </div>
<div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;    <span class="comment">// qpaths are not supposed to have a leading slash</span></div>
<div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[0] == <span class="charliteral">&#39;/&#39;</span> || <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[0] == <span class="charliteral">&#39;\\&#39;</span>) {</div>
<div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;        <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>++;</div>
<div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;    }</div>
<div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160; </div>
<div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;    <span class="comment">// make absolutely sure that it can&#39;t back up the path.</span></div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;    <span class="comment">// The searchpaths do guarantee that something will always</span></div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;    <span class="comment">// be prepended, so we don&#39;t need to worry about &quot;c:&quot; or &quot;//limbo&quot; </span></div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;    <span class="keywordflow">if</span> (strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;..&quot;</span>) || strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;::&quot;</span>)) {</div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;    }</div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160; </div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;    <span class="comment">// search through the path, one element at a time</span></div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160; </div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;        <span class="comment">//</span></div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;            hash = <a class="code" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">hashSize</a>);</div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;        }</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;        <span class="comment">// is the element a pak file?</span></div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a> &amp;&amp; search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">hashTable</a>[hash]) {</div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;            <span class="comment">// disregard if it doesn&#39;t match one of the allowed pure pak files</span></div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>)) {</div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;            }</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160; </div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;            <span class="comment">// look through all the pak file elements</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            pak = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>;</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;            pakFile = pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">hashTable</a>[hash];</div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                <span class="comment">// case and separator insensitive comparisons</span></div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">name</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)) {</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;                    <span class="keywordflow">if</span> (pChecksum) {</div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                        *pChecksum = pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pure_checksum</a>;</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;                    }</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;                    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;                }</div>
<div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;                pakFile = pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">next</a>;</div>
<div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            } <span class="keywordflow">while</span> (pakFile != <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;        }</div>
<div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;    }</div>
<div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">pack_t::hashSize</a>, <a class="el" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">pack_t::hashTable</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">fileInPack_s::name</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">fileInPack_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, and <a class="el" href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pack_t::pure_checksum</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a737fb4745a9b5322c41533d5c870dbbd">CL_InitRef()</a>, and <a class="el" href="../../db/d01/sv__client_8c.html#a698002d88372c1e95c076026f8736a16">SV_VerifyPaks_f()</a>.</p>

</div>
</div>
<a id="a94716234fc9383efe0af2b1286b4a677"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94716234fc9383efe0af2b1286b4a677">&#9670;&nbsp;</a></span>FS_filelength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_filelength </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>doesn't work for files that are opened from a pack file. </p>
<p>If this is called on a non-unique FILE (from a pak file), it will return the size of the pak file, not the expected size of the file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00482">482</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    FILE* h;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160; </div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    h = <a class="code" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle</a>(f);</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160; </div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span> (h == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a8c412643fabf5a6d0a2b30ac3f7876f6">FS_fplength</a>(h);</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8c412643fabf5a6d0a2b30ac3f7876f6">FS_fplength()</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>.</p>

</div>
</div>
<a id="af3a6b4d4279a3b9029391ddf12f1610f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3a6b4d4279a3b9029391ddf12f1610f">&#9670;&nbsp;</a></span>FS_FilenameCompare()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_FilenameCompare </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ignore case and seprator char distinctions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s1</td><td></td></tr>
    <tr><td class="paramname">s2</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01039">1039</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;{</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;    <span class="keywordtype">int</span>        c1, c2;</div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160; </div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        c1 = *s1++;</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        c2 = *s2++;</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160; </div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <span class="keywordflow">if</span> (c1 &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c1 &lt;= <span class="charliteral">&#39;z&#39;</span>) {</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;            c1 -= (<span class="charliteral">&#39;a&#39;</span> - <span class="charliteral">&#39;A&#39;</span>);</div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;        }</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;        <span class="keywordflow">if</span> (c2 &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c2 &lt;= <span class="charliteral">&#39;z&#39;</span>) {</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;            c2 -= (<span class="charliteral">&#39;a&#39;</span> - <span class="charliteral">&#39;A&#39;</span>);</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        }</div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160; </div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;        <span class="keywordflow">if</span> (c1 == <span class="charliteral">&#39;\\&#39;</span> || c1 == <span class="charliteral">&#39;:&#39;</span>) {</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            c1 = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        }</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keywordflow">if</span> (c2 == <span class="charliteral">&#39;\\&#39;</span> || c2 == <span class="charliteral">&#39;:&#39;</span>) {</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            c2 = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;        }</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160; </div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;        <span class="keywordflow">if</span> (c1 != c2) {</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;        <span class="comment">// strings not equal</span></div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;        }</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    } <span class="keywordflow">while</span> (c1);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160; </div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;        <span class="comment">// strings are equal</span></div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a762b35729743799fe79df7acd009f3b7">FS_FileIsInPAK()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad71dab25afd483c3ef8457a060c77076">FS_FindVM()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aa3c5469d16b3b5b09a1e0fa39c2a0e24">FS_idPak()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, <a class="el" href="../../db/d01/sv__client_8c.html#a9e3957a357260512ec0724ce88c5c581">SV_WriteDownloadToClient()</a>, and <a class="el" href="../../d5/dd6/sys__main_8c.html#a10ab0cd0f5261d88a2f8457e0b5b0933">Sys_LoadDll()</a>.</p>

</div>
</div>
<a id="a5577445f5311114a0d765a7077f5744e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5577445f5311114a0d765a7077f5744e">&#9670;&nbsp;</a></span>FS_FilenameCompletion()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_FilenameCompletion </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>stripExt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>(*)(const char *<a class="el" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>)&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>allowNonPureFilesOnDisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dir</td><td></td></tr>
    <tr><td class="paramname">ext</td><td></td></tr>
    <tr><td class="paramname">stripExt</td><td></td></tr>
    <tr><td class="paramname">callback</td><td></td></tr>
    <tr><td class="paramname">allowNonPureFilesOnDisk</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l04152">4152</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;{</div>
<div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;    <span class="keywordtype">char</span>** filenames;</div>
<div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;    <span class="keywordtype">int</span>        nfiles;</div>
<div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;    <span class="keywordtype">int</span>        i;</div>
<div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;    <span class="keywordtype">char</span>    <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[<a class="code" href="../../de/d01/q__shared_8h.html#adf9097a01af0067c10d749471dbdbe34">MAX_STRING_CHARS</a>];</div>
<div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160; </div>
<div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;    filenames = <a class="code" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles</a>(dir, ext, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;nfiles, allowNonPureFilesOnDisk);</div>
<div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160; </div>
<div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a4b00bf6d8a82595ed18b1d40f7a00fa9">FS_SortFileList</a>(filenames, nfiles);</div>
<div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160; </div>
<div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; nfiles; i++) {</div>
<div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a6b74272893392639294195e6e3b07914">FS_ConvertPath</a>(filenames[i]);</div>
<div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, filenames[i], <a class="code" href="../../de/d01/q__shared_8h.html#adf9097a01af0067c10d749471dbdbe34">MAX_STRING_CHARS</a>);</div>
<div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160; </div>
<div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;        <span class="keywordflow">if</span> (stripExt) {</div>
<div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#ac5559db84415463975aeaa060f618f7d">COM_StripExtension</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>));</div>
<div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;        }</div>
<div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160; </div>
<div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;        callback(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;    }</div>
<div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList</a>(filenames);</div>
<div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d86/q__shared_8c.html#ac5559db84415463975aeaa060f618f7d">COM_StripExtension()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a6b74272893392639294195e6e3b07914">FS_ConvertPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a4b00bf6d8a82595ed18b1d40f7a00fa9">FS_SortFileList()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#adf9097a01af0067c10d749471dbdbe34">MAX_STRING_CHARS</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a5b18ecdac4d5688915148b2570c518fe">Field_CompleteFilename()</a>.</p>

</div>
</div>
<a id="ad71dab25afd483c3ef8457a060c77076"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad71dab25afd483c3ef8457a060c77076">&#9670;&nbsp;</a></span>FS_FindVM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_FindVM </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> **&#160;</td>
          <td class="paramname"><em>startSearch</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>found</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>foundlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>enableDll</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find a suitable VM file in search path order. </p>
<p>In each searchpath try:</p><ul>
<li>open DLL file if DLL loading enabled</li>
<li>open QVM file</li>
</ul>
<p>Enable search for DLL by setting enableDll to FSVM_ENABLEDLL.</p>
<p>write found DLL or QVM to "found" and return VMI_NATIVE if DLL, VMI_COMPILED if QVM. Return the searchpath in "startSearch".</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startSearch</td><td></td></tr>
    <tr><td class="paramname">found</td><td></td></tr>
    <tr><td class="paramname">foundlen</td><td></td></tr>
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">enableDll</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return the searchpath in "startSearch". </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01426">1426</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;{</div>
<div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search, * lastSearch;</div>
<div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;    <a class="code" href="../../d4/de3/structdirectory__t.html">directory_t</a>* dir;</div>
<div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* pack;</div>
<div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;    <span class="keywordtype">char</span> dllName[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>], qvmName[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>];</div>
<div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;    <span class="keywordtype">char</span>* netpath;</div>
<div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160; </div>
<div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>)</div>
<div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160; </div>
<div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;    <span class="keywordflow">if</span> (enableDll)</div>
<div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(dllName, <span class="keyword">sizeof</span>(dllName), <span class="stringliteral">&quot;%s&quot;</span> ARCH_STRING <a class="code" href="../../d7/de2/q__platform_8h.html#ae0759b49dc9497aa5c04cd88fa316009">DLL_EXT</a>, name);</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160; </div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(qvmName, <span class="keyword">sizeof</span>(qvmName), <span class="stringliteral">&quot;vm/%s.qvm&quot;</span>, name);</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;    lastSearch = *startSearch;</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;    <span class="keywordflow">if</span> (*startSearch == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;        search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>;</div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;    <span class="keywordflow">else</span></div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;        search = lastSearch-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>;</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160; </div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;    <span class="keywordflow">while</span> (search) {</div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a> &amp;&amp; !<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>) {</div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            dir = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>;</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160; </div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            <span class="keywordflow">if</span> (enableDll) {</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;                netpath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>, dllName);</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists</a>(netpath)) {</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(found, netpath, foundlen);</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                    *startSearch = search;</div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160; </div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="../../d1/df7/qcommon_8h.html#a8ffc60e84daf6f160ab3c6250c9e38e5ad3aad61376e7f4e53de20fc12732f9af">VMI_NATIVE</a>;</div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                }</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            }</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir</a>(qvmName, search, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>) &gt; 0) {</div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                *startSearch = search;</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d1/df7/qcommon_8h.html#a8ffc60e84daf6f160ab3c6250c9e38e5a27ca42205a92c1e7250ccca442a54e63">VMI_COMPILED</a>;</div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;            }</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            pack = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>;</div>
<div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160; </div>
<div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;            <span class="keywordflow">if</span> (lastSearch &amp;&amp; lastSearch-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;                <span class="comment">// make sure we only try loading one VM file per game dir</span></div>
<div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;                <span class="comment">// i.e. if VM from pak7.pk3 fails we won&#39;t try one from pak6.pk3</span></div>
<div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160; </div>
<div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(lastSearch-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ad8150938ef90694f4621a31443f06f69">pakPathname</a>, pack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ad8150938ef90694f4621a31443f06f69">pakPathname</a>)) {</div>
<div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;                    search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>;</div>
<div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;                }</div>
<div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;            }</div>
<div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160; </div>
<div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir</a>(qvmName, search, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>) &gt; 0) {</div>
<div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;                *startSearch = search;</div>
<div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160; </div>
<div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d1/df7/qcommon_8h.html#a8ffc60e84daf6f160ab3c6250c9e38e5a27ca42205a92c1e7250ccca442a54e63">VMI_COMPILED</a>;</div>
<div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;            }</div>
<div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;        }</div>
<div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160; </div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>;</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;    }</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160; </div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf()</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">searchpath_s::dir</a>, <a class="el" href="../../d7/de2/q__platform_8h.html#ae0759b49dc9497aa5c04cd88fa316009">DLL_EXT</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists()</a>, <a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">directory_t::gamedir</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#ad8150938ef90694f4621a31443f06f69">pack_t::pakPathname</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">directory_t::path</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a8ffc60e84daf6f160ab3c6250c9e38e5a27ca42205a92c1e7250ccca442a54e63">VMI_COMPILED</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a8ffc60e84daf6f160ab3c6250c9e38e5ad3aad61376e7f4e53de20fc12732f9af">VMI_NATIVE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/de9/vm_8c.html#a5c8a5796658036796660804ecb169fae">VM_Create()</a>.</p>

</div>
</div>
<a id="ab8090de10f7d898f9365e63c2bc97291"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab8090de10f7d898f9365e63c2bc97291">&#9670;&nbsp;</a></span>FS_Flush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Flush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l04139">4139</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;{</div>
<div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;    fflush(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o);</div>
<div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>.</p>

</div>
</div>
<a id="a2f8d7dda752ca630c38cc2abcb44a95f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f8d7dda752ca630c38cc2abcb44a95f">&#9670;&nbsp;</a></span>FS_FOpenFileAppend()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> FS_FOpenFileAppend </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00950">950</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;{</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    <span class="keywordtype">char</span>* ospath;</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    f;</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160; </div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160; </div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    f = <a class="code" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a>();</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">zipFile</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160; </div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name));</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160; </div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="comment">// don&#39;t let sound stutter</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <a class="code" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer</a>();</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160; </div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;    ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160; </div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_FOpenFileAppend: %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    }</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(ospath, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160; </div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath</a>(ospath)) {</div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    }</div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160; </div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(ospath, <span class="stringliteral">&quot;ab&quot;</span>);</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o) {</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;        f = 0;</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    }</div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="keywordflow">return</span> f;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">fileHandleData_t::handleSync</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer()</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen()</a>, and <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">fileHandleData_t::zipFile</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a5461bc4bb843e134575ea1798cdf2450">FS_FOpenFileByMode()</a>.</p>

</div>
</div>
<a id="a2671d7fe6e49c046aa3fb5659b18696f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2671d7fe6e49c046aa3fb5659b18696f">&#9670;&nbsp;</a></span>FS_FOpenFileByMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_FOpenFileByMode </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>qpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323ab">fsMode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>opens a file for reading, writing, or appending depending on the value of mode. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">qpath</td><td></td></tr>
    <tr><td class="paramname">f</td><td></td></tr>
    <tr><td class="paramname">mode</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l04074">4074</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;{</div>
<div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;    <span class="keywordtype">int</span>        r;</div>
<div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>    sync;</div>
<div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160; </div>
<div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;    sync = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160; </div>
<div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;    <span class="keywordflow">switch</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#ac964b0cf0c94deb3fd1b75f58fe84c11">mode</a>) {</div>
<div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323aba16e40511e654a299d4374c25a6f5d577">FS_READ</a>:</div>
<div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;        r = <a class="code" href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead</a>(qpath, f, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div>
<div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323abab0017622d7011e9c191ddc8422dbb4cf">FS_WRITE</a>:</div>
<div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;        *f = <a class="code" href="../../d8/d8c/files_8c.html#a53b5e83245e636947c7b951c869fd91e">FS_FOpenFileWrite</a>(qpath);</div>
<div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;        r = 0;</div>
<div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;        <span class="keywordflow">if</span> (*f == 0) {</div>
<div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;            r = -1;</div>
<div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;        }</div>
<div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323abace9b0c88352359a6ab35a182409a926c">FS_APPEND_SYNC</a>:</div>
<div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;        sync = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323aba82e0a3b4b9ab26ffe6c17be816b6fd0e">FS_APPEND</a>:</div>
<div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;        *f = <a class="code" href="../../d8/d8c/files_8c.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend</a>(qpath);</div>
<div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;        r = 0;</div>
<div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;        <span class="keywordflow">if</span> (*f == 0) {</div>
<div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;            r = -1;</div>
<div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;        }</div>
<div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;    <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_FOpenFileByMode: bad mode&quot;</span>);</div>
<div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;    }</div>
<div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160; </div>
<div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;    <span class="keywordflow">if</span> (!f) {</div>
<div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;    }</div>
<div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160; </div>
<div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;    <span class="keywordflow">if</span> (*f) {</div>
<div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a7d700514ee28041cf7a87cb8e079bfdc">fileSize</a> = r;</div>
<div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;    }</div>
<div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = sync;</div>
<div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160; </div>
<div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;    <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a7d700514ee28041cf7a87cb8e079bfdc">fileHandleData_t::fileSize</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323aba82e0a3b4b9ab26ffe6c17be816b6fd0e">FS_APPEND</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323abace9b0c88352359a6ab35a182409a926c">FS_APPEND_SYNC</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a53b5e83245e636947c7b951c869fd91e">FS_FOpenFileWrite()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323aba16e40511e654a299d4374c25a6f5d577">FS_READ</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323abab0017622d7011e9c191ddc8422dbb4cf">FS_WRITE</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">fileHandleData_t::handleSync</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/dde/cl__cgame_8c.html#a71ede2bb98f1ae6f01efc81cd25f4a3c">CL_CgameSystemCalls()</a>, <a class="el" href="../../d9/dd6/cl__ui_8c.html#a816b2b94718d7146f200ba4a378c6834">CL_UISystemCalls()</a>, <a class="el" href="../../d5/d09/sv__bot_8c.html#ab297fdd094aac594bca6abeda876b949">SV_BotInitBotLib()</a>, and <a class="el" href="../../d7/d3c/sv__game_8c.html#a73948936d23d65d3a27c6027767af7c8">SV_GameSystemCalls()</a>.</p>

</div>
</div>
<a id="ac5f39eddf80c89df5f1f9f0b6b48b482"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5f39eddf80c89df5f1f9f0b6b48b482">&#9670;&nbsp;</a></span>FS_FOpenFileRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_FOpenFileRead </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>uniqueFILE</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds the file in the search path. </p>
<p>Returns filesize and an open FILE pointer. Used for streaming data out of either a separate file or a ZIP file.</p>
<p>If uniqueFILE is true, then a new FILE will be fopened, even if the file is found in an already open pak file. If uniqueFILE is false, you must call FS_FCloseFile instead of fclose, otherwise the pak FILE would be improperly closed. It is generally safe to always set uniqueFILE to true, because the majority of file IO goes through FS_ReadFile, which Does The Right Thing already.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">file</td><td></td></tr>
    <tr><td class="paramname">uniqueFILE</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns filesize and an open FILE pointer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01366">1366</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;{</div>
<div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;    <span class="keywordtype">long</span> len;</div>
<div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> isLocalConfig;</div>
<div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160; </div>
<div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>)</div>
<div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160; </div>
<div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;    isLocalConfig = !strcmp(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;autoexec.cfg&quot;</span>) || !strcmp(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <a class="code" href="../../d1/df7/qcommon_8h.html#aae6e0b2caf30a7978021b344ca90148d">Q3CONFIG_CFG</a>);</div>
<div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;        <span class="comment">// autoexec.cfg and q3config.cfg can only be loaded outside of pk3 files.</span></div>
<div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;        <span class="keywordflow">if</span> (isLocalConfig &amp;&amp; search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>)</div>
<div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160; </div>
<div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;        len = <a class="code" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search, file, uniqueFILE, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160; </div>
<div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;        <span class="keywordflow">if</span> (file == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;            <span class="keywordflow">if</span> (len &gt; 0)</div>
<div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;            <span class="keywordflow">if</span> (len &gt;= 0 &amp;&amp; *file)</div>
<div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;        }</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160; </div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;    }</div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160; </div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;<span class="preprocessor">#ifdef FS_MISSING</span></div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;    <span class="keywordflow">if</span> (missingFiles)</div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        fprintf(missingFiles, <span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;    <span class="keywordflow">if</span> (file) {</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;        *file = 0;</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;        <span class="comment">// When file is NULL, we&#39;re querying the existence of the file</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;        <span class="comment">// If we&#39;ve got here, it doesn&#39;t exist</span></div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;    }</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aae6e0b2caf30a7978021b344ca90148d">Q3CONFIG_CFG</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#a639bc6cb98e1ee99e686df704f61958e">CIN_PlayCinematic()</a>, <a class="el" href="../../d8/de1/client_8h.html#a7d10cc40f267012964f0144ed90c0768">CL_CloseAVI()</a>, <a class="el" href="../../d8/de1/client_8h.html#ab3428055e93d99224b0dfc2dd0906320">CL_LoadConsoleHistory()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#a85e8cf759481416ac430eddf8d6ceb7d">CL_PlayDemo_f()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#afb4964d494c1e93fa3c209a5a5cbca04">CL_WalkDemoExt()</a>, <a class="el" href="../../d8/d19/common_8c.html#afac93f6eb61b38734c1eb0439c8a43f9">Com_InitJournaling()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a5461bc4bb843e134575ea1798cdf2450">FS_FOpenFileByMode()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab003187b06c3851b2e4650616ba8d67d">FS_TouchFile_f()</a>, <a class="el" href="../../df/d64/cl__cin_8c.html#aaf93fb352b2cca41d16e101b79d3992c">RoQReset()</a>, <a class="el" href="../../d2/db9/snd__codec_8h.html#ae422cabfeae85d6ec9d6f94f93c1cc95">S_CodecUtilOpen()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a8f0c5acee1988796f49090cc8b947714">S_WAV_CodecLoad()</a>, and <a class="el" href="../../d5/d49/sv__init_8c.html#aabbcbd48dc0125fba8055530af7f650f">SV_TouchFile()</a>.</p>

</div>
</div>
<a id="a55de3ab916ba6dfd40c0f5f819dbb37b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55de3ab916ba6dfd40c0f5f819dbb37b">&#9670;&nbsp;</a></span>FS_FOpenFileReadDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_FOpenFileReadDir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d8c/files_8c.html#ad981c40cf85a47ca73156ece3fe32c31">searchpath_t</a> *&#160;</td>
          <td class="paramname"><em>search</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>uniqueFILE</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>unpure</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tries opening file "filename" in searchpath "search". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">search</td><td></td></tr>
    <tr><td class="paramname">file</td><td></td></tr>
    <tr><td class="paramname">uniqueFILE</td><td></td></tr>
    <tr><td class="paramname">unpure</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>filesize and an open FILE pointer. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01133">1133</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;{</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;    <span class="keywordtype">long</span>            hash;</div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* pak;</div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;    <a class="code" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_t</a>* pakFile;</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;    <a class="code" href="../../d4/de3/structdirectory__t.html">directory_t</a>* dir;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;    <span class="keywordtype">char</span>* netpath;</div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;    FILE* filep;</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;    <span class="keywordtype">int</span>            len;</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160; </div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a> == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_FOpenFileRead: NULL &#39;filename&#39; parameter passed&quot;</span>);</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160; </div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;    <span class="comment">// qpaths are not supposed to have a leading slash</span></div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[0] == <span class="charliteral">&#39;/&#39;</span> || <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[0] == <span class="charliteral">&#39;\\&#39;</span>)</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;        <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>++;</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;    <span class="comment">// make absolutely sure that it can&#39;t back up the path.</span></div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;    <span class="comment">// The searchpaths do guarantee that something will always</span></div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;    <span class="comment">// be prepended, so we don&#39;t need to worry about &quot;c:&quot; or &quot;//limbo&quot; </span></div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;    <span class="keywordflow">if</span> (strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;..&quot;</span>) || strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;::&quot;</span>)) {</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;        <span class="keywordflow">if</span> (file == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;        *file = 0;</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;    }</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160; </div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;    <span class="comment">// make sure the q3key file is only readable by the quake3.exe at initialization</span></div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;    <span class="comment">// any other time the key should only be accessed in memory using the provided functions</span></div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;    <span class="keyword">extern</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> <a class="code" href="../../d8/d19/common_8c.html#a2e77a0dee4708a102d3c6ad795ae5b6a">com_fullyInitialized</a>;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d19/common_8c.html#a2e77a0dee4708a102d3c6ad795ae5b6a">com_fullyInitialized</a> &amp;&amp; strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;q3key&quot;</span>)) {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;        <span class="keywordflow">if</span> (file == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;        *file = 0;</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;    }</div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160; </div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;    <span class="keywordflow">if</span> (file == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;        <span class="comment">// just wants to see if file is there</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160; </div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;        <span class="comment">// is the element a pak file?</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;            hash = <a class="code" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">hashSize</a>);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160; </div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;            <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">hashTable</a>[hash]) {</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                <span class="comment">// look through all the pak file elements</span></div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                pak = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>;</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                pakFile = pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">hashTable</a>[hash];</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160; </div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;                <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                    <span class="comment">// case and separator insensitive comparisons</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">name</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)) {</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                        <span class="comment">// found it!</span></div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;                        <span class="keywordflow">if</span> (pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">len</a>)</div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                            <span class="keywordflow">return</span> pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">len</a>;</div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                            <span class="comment">// It&#39;s not nice, but legacy code depends</span></div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                            <span class="comment">// on positive value if file exists no matter</span></div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                            <span class="comment">// what size</span></div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;                            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                        }</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                    }</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160; </div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                    pakFile = pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">next</a>;</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;                } <span class="keywordflow">while</span> (pakFile != <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            }</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>) {</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            dir = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>;</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160; </div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            netpath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;            filep = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(netpath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="keywordflow">if</span> (filep) {</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;                len = <a class="code" href="../../d8/d8c/files_8c.html#a8c412643fabf5a6d0a2b30ac3f7876f6">FS_fplength</a>(filep);</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;                fclose(filep);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160; </div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;                <span class="keywordflow">if</span> (len)</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;                    <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;                    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;            }</div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;        }</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;    }</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;    *file = <a class="code" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a>();</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#abe51094b301d3ff4ef30047d1cb94d36">unique</a> = uniqueFILE;</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;    <span class="comment">// is the element a pak file?</span></div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;    <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;        hash = <a class="code" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">hashSize</a>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">hashTable</a>[hash]) {</div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;            <span class="comment">// disregard if it doesn&#39;t match one of the allowed pure pak files</span></div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            <span class="keywordflow">if</span> (!unpure &amp;&amp; !<a class="code" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>)) {</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                *file = 0;</div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;            }</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160; </div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;            <span class="comment">// look through all the pak file elements</span></div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;            pak = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>;</div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;            pakFile = pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">hashTable</a>[hash];</div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160; </div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;            <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                <span class="comment">// case and separator insensitive comparisons</span></div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">name</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>)) {</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                    <span class="comment">// found it!</span></div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160; </div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                    <span class="comment">// mark the pak as having been referenced and mark specifics on cgame and ui</span></div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                    <span class="comment">// shaders, txt, arena files  by themselves do not count as a reference as </span></div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                    <span class="comment">// these are loaded from all pk3s </span></div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;                    <span class="comment">// from every pk3 file.. </span></div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                    len = strlen(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160; </div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                    <span class="keywordflow">if</span> (!(pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> &amp; <a class="code" href="../../d1/df7/qcommon_8h.html#ab8b6a83a99eb8a03f77b3ec7f827835c">FS_GENERAL_REF</a>)) {</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.shader&quot;</span>, len) &amp;&amp;</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;                            !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.txt&quot;</span>, len) &amp;&amp;</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;                            !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.cfg&quot;</span>, len) &amp;&amp;</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;                            !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.config&quot;</span>, len) &amp;&amp;</div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;                            !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.bot&quot;</span>, len) &amp;&amp;</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;                            !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.arena&quot;</span>, len) &amp;&amp;</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                            !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.menu&quot;</span>, len) &amp;&amp;</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;                            <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;vm/qagame.qvm&quot;</span>) != 0 &amp;&amp;</div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;                            !strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;levelshots&quot;</span>)) {</div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;                            pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> |= <a class="code" href="../../d1/df7/qcommon_8h.html#ab8b6a83a99eb8a03f77b3ec7f827835c">FS_GENERAL_REF</a>;</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;                        }</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;                    }</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160; </div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;                    <span class="keywordflow">if</span> (strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;cgame.qvm&quot;</span>))</div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;                        pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> |= <a class="code" href="../../d1/df7/qcommon_8h.html#ac25952608c50e3c39548267ee82ff8f2">FS_CGAME_REF</a>;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;                    <span class="keywordflow">if</span> (strstr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;ui.qvm&quot;</span>))</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                        pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> |= <a class="code" href="../../d1/df7/qcommon_8h.html#a4c31ebc9163957944f0c21c72f83bf95">FS_UI_REF</a>;</div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160; </div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;                    <span class="keywordflow">if</span> (uniqueFILE) {</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                        <span class="comment">// open a new file on the pakfile</span></div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                        <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a6ad8421dfb8437ac0ee0a290a4583808">z</a> = <a class="code" href="../../d6/da7/unzip_8c.html#a614a4ee72e9055e5657d28487c2a7936">unzOpen</a>(pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pakFilename</a>);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].handleFiles.file.z == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                            <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Couldn&#39;t open %s&quot;</span>, pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pakFilename</a>);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                        <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a6ad8421dfb8437ac0ee0a290a4583808">z</a> = pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a7e4b0981f0168a46ecb8c08cbcf9ee5d">handle</a>;</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].name, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].name));</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">zipFile</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                    <span class="comment">// set the file position in the zip file (also sets the current file info)</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                    <a class="code" href="../../d6/da7/unzip_8c.html#a12c4062aa3dae4cddf7527c3caf8c519">unzSetOffset</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].handleFiles.file.z, pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#a78de898acc4a12eb1e833de902be74f1">pos</a>);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                    <span class="comment">// open the file in the zip</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                    <a class="code" href="../../d6/da7/unzip_8c.html#a65deebb4ecb3ba110c343c21a4cd9a75">unzOpenCurrentFile</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].handleFiles.file.z);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a4a2d47b4ac20b0856125be4bc229017a">zipFilePos</a> = pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#a78de898acc4a12eb1e833de902be74f1">pos</a>;</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;                    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ab74c94ba839c4c7aa9df8207bf02d43a">zipFileLen</a> = pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">len</a>;</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160; </div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_FOpenFileRead: %s (found in &#39;%s&#39;)\n&quot;</span>,</div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                            <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pakFilename</a>);</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;                    }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160; </div>
<div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;                    <span class="keywordflow">return</span> pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">len</a>;</div>
<div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;                }</div>
<div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160; </div>
<div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;                pakFile = pakFile-&gt;<a class="code" href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">next</a>;</div>
<div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;            } <span class="keywordflow">while</span> (pakFile != <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        }</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>) {</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;        <span class="comment">// check a file in the directory tree</span></div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        <span class="comment">// if we are running restricted, the only files we</span></div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;        <span class="comment">// will allow to come from the directory are .cfg files</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;        len = strlen(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;        <span class="comment">// FIXME TTimo I&#39;m not sure about the fs_numServerPaks test</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;        <span class="comment">// if you are using FS_ReadFile to find out if a file exists,</span></div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;        <span class="comment">//   this test can make the search fail although the file is in the directory</span></div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;        <span class="comment">// I had the problem on https://zerowing.idsoftware.com/bugzilla/show_bug.cgi?id=8</span></div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;        <span class="comment">// turned out I used FS_FileExists instead</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;        <span class="keywordflow">if</span> (!unpure &amp;&amp; <a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>) {</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.cfg&quot;</span>, len) &amp;&amp;        <span class="comment">// for config files</span></div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.menu&quot;</span>, len) &amp;&amp;        <span class="comment">// menu files</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.game&quot;</span>, len) &amp;&amp;        <span class="comment">// menu files</span></div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                !<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;.dat&quot;</span>, len) &amp;&amp;        <span class="comment">// for journal files</span></div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                !<a class="code" href="../../d8/d8c/files_8c.html#ad2381b59cd3dba516a289108f96b77d3">FS_IsDemoExt</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, len))            <span class="comment">// demos</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            {</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                *file = 0;</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            }</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;        }</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160; </div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        dir = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>;</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;        netpath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;        filep = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(netpath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160; </div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        <span class="keywordflow">if</span> (filep == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;            *file = 0;</div>
<div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;        }</div>
<div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160; </div>
<div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].name, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].name));</div>
<div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">zipFile</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160; </div>
<div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_FOpenFileRead: %s (found in &#39;%s%c%s&#39;)\n&quot;</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>,</div>
<div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;                dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, dir-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>);</div>
<div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        }</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160; </div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[*file].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = filep;</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a8c412643fabf5a6d0a2b30ac3f7876f6">FS_fplength</a>(filep);</div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;    }</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160; </div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;    *file = 0;</div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d8/d19/common_8c.html#a2e77a0dee4708a102d3c6ad795ae5b6a">com_fullyInitialized</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">searchpath_s::dir</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac25952608c50e3c39548267ee82ff8f2">FS_CGAME_REF</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8c412643fabf5a6d0a2b30ac3f7876f6">FS_fplength()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ab8b6a83a99eb8a03f77b3ec7f827835c">FS_GENERAL_REF</a>, <a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad2381b59cd3dba516a289108f96b77d3">FS_IsDemoExt()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a4c31ebc9163957944f0c21c72f83bf95">FS_UI_REF</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">directory_t::gamedir</a>, <a class="el" href="../../dc/dad/structpack__t.html#a7e4b0981f0168a46ecb8c08cbcf9ee5d">pack_t::handle</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a>, <a class="el" href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">pack_t::hashSize</a>, <a class="el" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">pack_t::hashTable</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">fileInPack_s::len</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">fileInPack_s::name</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">fileInPack_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pack_t::pakFilename</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">directory_t::path</a>, <a class="el" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#a78de898acc4a12eb1e833de902be74f1">fileInPack_s::pos</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, <a class="el" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">pack_t::referenced</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen()</a>, <a class="el" href="../../de/d47/structqfile__us.html#abe51094b301d3ff4ef30047d1cb94d36">qfile_us::unique</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a614a4ee72e9055e5657d28487c2a7936">unzOpen()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a65deebb4ecb3ba110c343c21a4cd9a75">unzOpenCurrentFile()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a12c4062aa3dae4cddf7527c3caf8c519">unzSetOffset()</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a6ad8421dfb8437ac0ee0a290a4583808">qfile_gus::z</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">fileHandleData_t::zipFile</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ab74c94ba839c4c7aa9df8207bf02d43a">fileHandleData_t::zipFileLen</a>, and <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a4a2d47b4ac20b0856125be4bc229017a">fileHandleData_t::zipFilePos</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ad71dab25afd483c3ef8457a060c77076">FS_FindVM()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a26b150e15f3b3fb81d998402a82a5a7b">FS_FOpenFileRead()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a9ff51d1c7623edd3d80b4b46fb56d467">FS_Which()</a>.</p>

</div>
</div>
<a id="a53b5e83245e636947c7b951c869fd91e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53b5e83245e636947c7b951c869fd91e">&#9670;&nbsp;</a></span>FS_FOpenFileWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> FS_FOpenFileWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00907">907</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;{</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;    <span class="keywordtype">char</span>* ospath;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    f;</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160; </div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    }</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    f = <a class="code" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a>();</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">zipFile</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160; </div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;    ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160; </div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_FOpenFileWrite: %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160; </div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(ospath, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160; </div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath</a>(ospath)) {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;    }</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;    <span class="comment">// enabling the following line causes a recursive function call loop</span></div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;    <span class="comment">// when running with +set logfile 1 +set developer 1</span></div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;    <span class="comment">//Com_DPrintf( &quot;writing to: %s\n&quot;, ospath );</span></div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(ospath, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160; </div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name));</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160; </div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o) {</div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;        f = 0;</div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    }</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="keywordflow">return</span> f;</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">fileHandleData_t::handleSync</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen()</a>, and <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">fileHandleData_t::zipFile</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#afb207419701d140ad2fd6efbf659cfda">CL_DemoCompleted()</a>, <a class="el" href="../../d8/de1/client_8h.html#a724604b6c9ade91b0692f6863c0bf492">CL_OpenAVIForWriting()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#a39d84591bff8ab333c7fa8875c35d42b">CL_Record_f()</a>, <a class="el" href="../../d8/de1/client_8h.html#a8b7397f7c1e0de4f6d89e1b6d984eedc">CL_SaveConsoleHistory()</a>, <a class="el" href="../../d8/d19/common_8c.html#afac93f6eb61b38734c1eb0439c8a43f9">Com_InitJournaling()</a>, <a class="el" href="../../d8/d19/common_8c.html#aa9f31322df94ece8f2f18c0ffdb7192e">Com_Printf()</a>, <a class="el" href="../../d8/d19/common_8c.html#a6b4aa8ef2ffefa9263cfa04b52565d95">Com_WriteConfigToFile()</a>, <a class="el" href="../../dd/d5a/cl__console_8c.html#aa4063c6dde81cbf162b11d302350fdef">Con_Dump_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a5461bc4bb843e134575ea1798cdf2450">FS_FOpenFileByMode()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#af5bb678d83f1c6291ddfe69eb4267030">FS_WriteFile()</a>.</p>

</div>
</div>
<a id="a52005b87fc757d0609a63d1e63c015c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52005b87fc757d0609a63d1e63c015c1">&#9670;&nbsp;</a></span>FS_ForceFlush()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_ForceFlush </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>forces flush on files we're writing to. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00447">447</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;{</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    FILE* file;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    file = <a class="code" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle</a>(f);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    setvbuf(file, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, _IONBF, 0);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle()</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d19/common_8c.html#aa9f31322df94ece8f2f18c0ffdb7192e">Com_Printf()</a>.</p>

</div>
</div>
<a id="a8c412643fabf5a6d0a2b30ac3f7876f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c412643fabf5a6d0a2b30ac3f7876f6">&#9670;&nbsp;</a></span>FS_fplength()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_fplength </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>h</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00460">460</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;{</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    <span class="keywordtype">long</span>        pos;</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordtype">long</span>        end;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160; </div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    pos = ftell(h);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    fseek(h, 0, <a class="code" href="../../d5/d84/ioapi_8c.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    end = ftell(h);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    fseek(h, pos, <a class="code" href="../../d5/d84/ioapi_8c.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>);</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160; </div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    <span class="keywordflow">return</span> end;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d84/ioapi_8c.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>, and <a class="el" href="../../d5/d84/ioapi_8c.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a94716234fc9383efe0af2b1286b4a677">FS_filelength()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>.</p>

</div>
</div>
<a id="a896eee490bab9dfb635454e2ea979e41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a896eee490bab9dfb635454e2ea979e41">&#9670;&nbsp;</a></span>FS_FreeFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_FreeFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>buffer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>frees the memory returned by FS_ReadFile. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01953">1953</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;{</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;    }</div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>) {</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_FreeFile( NULL )&quot;</span>);</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;    }</div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a>--;</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#aface39ec30682758a3e0ce07d2edb571">Hunk_FreeTempMemory</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160; </div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;    <span class="comment">// if all of our temp files are free, clear all of our space</span></div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a> == 0) {</div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;        <a class="code" href="../../d8/d19/common_8c.html#a1e46859d6986c50c28862949ad452c26">Hunk_ClearTempMemory</a>();</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;    }</div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d19/common_8c.html#a1e46859d6986c50c28862949ad452c26">Hunk_ClearTempMemory()</a>, and <a class="el" href="../../d8/d19/common_8c.html#aface39ec30682758a3e0ce07d2edb571">Hunk_FreeTempMemory()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a737fb4745a9b5322c41533d5c870dbbd">CL_InitRef()</a>, <a class="el" href="../../d4/d5c/cm__public_8h.html#a998bafe2f447bb7f7f727ca02e215cbc">CM_LoadMap()</a>, <a class="el" href="../../da/d32/cmd_8c.html#a8144707a5cc5b3b4e1f346efb97a26aa">Cmd_Exec_f()</a>, <a class="el" href="../../de/de9/vm_8c.html#a5c8a5796658036796660804ecb169fae">VM_Create()</a>, <a class="el" href="../../de/de9/vm_8c.html#a7be32af178d4fadbcf2584d1f1fb8f34">VM_LoadQVM()</a>, <a class="el" href="../../de/de9/vm_8c.html#a9e5d63b20e7310ff2fdf44e57678fd9d">VM_LoadSymbols()</a>, and <a class="el" href="../../de/de9/vm_8c.html#aa2627a16cf6701ee9047ed850daac24a">VM_Restart()</a>.</p>

</div>
</div>
<a id="a6e0550cf0dc49189ddff506b01687d38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e0550cf0dc49189ddff506b01687d38">&#9670;&nbsp;</a></span>FS_FreeFileList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_FreeFileList </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02377">2377</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;{</div>
<div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;    <span class="keywordtype">int</span>        i;</div>
<div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160; </div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;    }</div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160; </div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;    <span class="keywordflow">if</span> (!list) {</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;    }</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160; </div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;    <span class="keywordflow">for</span> (i = 0; list[i]; i++) {</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;        <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(list[i]);</div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;    }</div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160; </div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(list);</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, and <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a737fb4745a9b5322c41533d5c870dbbd">CL_InitRef()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14db47fd7a399697847cdd67685c5426">FS_Dir_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a5577445f5311114a0d765a7077f5744e">FS_FilenameCompletion()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aa9e3a61cb246fd92cece14039e09dd80">FS_GetFileList()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f()</a>.</p>

</div>
</div>
<a id="aa1cd6e2d2ec0cfb811788155f7c52689"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1cd6e2d2ec0cfb811788155f7c52689">&#9670;&nbsp;</a></span>FS_FreePak()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_FreePak </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dad/structpack__t.html">pack_t</a> *&#160;</td>
          <td class="paramname"><em>thepak</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Frees a pak structure and releases all associated resources. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thepak</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02121">2121</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;{</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#af6ab0ba88ab5da62747df8f9336f1bb3">unzClose</a>(thepak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a7e4b0981f0168a46ecb8c08cbcf9ee5d">handle</a>);</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(thepak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#af85f9a022f6a140f509a22c5d1de7e62">buildBuffer</a>);</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(thepak);</div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/dad/structpack__t.html#af85f9a022f6a140f509a22c5d1de7e62">pack_t::buildBuffer</a>, <a class="el" href="../../dc/dad/structpack__t.html#a7e4b0981f0168a46ecb8c08cbcf9ee5d">pack_t::handle</a>, <a class="el" href="../../d6/da7/unzip_8c.html#af6ab0ba88ab5da62747df8f9336f1bb3">unzClose()</a>, and <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#adef5a7e7eb51f7c6231a399c8c43ee51">FS_CompareZipChecksum()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown()</a>.</p>

</div>
</div>
<a id="a5dcb6aeb63861669677dec37c033f807"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dcb6aeb63861669677dec37c033f807">&#9670;&nbsp;</a></span>FS_FTell()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_FTell </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tell where we are. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l04124">4124</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;{</div>
<div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;    <span class="keywordtype">int</span> pos;</div>
<div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].zipFile == <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>) {</div>
<div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;        pos = <a class="code" href="../../d6/da7/unzip_8c.html#a17362e5016023e9424a318d93c0475d4">unztell</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.z);</div>
<div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;        pos = ftell(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o);</div>
<div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;    }</div>
<div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;    <span class="keywordflow">return</span> pos;</div>
<div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d6/da7/unzip_8c.html#a17362e5016023e9424a318d93c0475d4">unztell()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a50a6dfd18abd85eb58f5778d8f4a9ce4">FS_Seek()</a>, and <a class="el" href="../../d8/da9/cl__scrn_8c.html#abd483e33454ff09dad9d05e5a1a93ffe">SCR_DrawDemoRecording()</a>.</p>

</div>
</div>
<a id="a2fb9e1b8c14757cfe172a3ebf022bcd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fb9e1b8c14757cfe172a3ebf022bcd6">&#9670;&nbsp;</a></span>FS_GetCurrentGameDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* FS_GetCurrentGameDir </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l04183">4183</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;{</div>
<div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0])</div>
<div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>;</div>
<div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160; </div>
<div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>;</div>
<div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dd6/sys__main_8c.html#aafaf04447b9accd478fb9d31a839870c">__attribute__()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2c763f2f5b9d3262b65192c08d1e8744">Com_Init()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, <a class="el" href="../../d6/df0/sv__ccmds_8c.html#afedaa2cfe45e23191b2125fe8ff9a8cb">SV_RehashBans_f()</a>, and <a class="el" href="../../d6/df0/sv__ccmds_8c.html#a1a0a205b55ebb0978d5dc97c823f4093">SV_WriteBans()</a>.</p>

</div>
</div>
<a id="aa9e3a61cb246fd92cece14039e09dd80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9e3a61cb246fd92cece14039e09dd80">&#9670;&nbsp;</a></span>FS_GetFileList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_GetFileList </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>extension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>listbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>bufsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">extension</td><td></td></tr>
    <tr><td class="paramname">listbuf</td><td></td></tr>
    <tr><td class="paramname">bufsize</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02404">2404</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;{</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;    <span class="keywordtype">int</span>        nFiles, i, nTotal, nLen;</div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;    <span class="keywordtype">char</span>** pFiles = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160; </div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;    *listbuf = 0;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;    nFiles = 0;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;    nTotal = 0;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160; </div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(path, <span class="stringliteral">&quot;$modlist&quot;</span>) == 0) {</div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList</a>(listbuf, bufsize);</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;    }</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160; </div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;    pFiles = <a class="code" href="../../d8/d8c/files_8c.html#a57f26ffcc37676a8213c96762a07458a">FS_ListFiles</a>(path, extension, &amp;nFiles);</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160; </div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; nFiles; i++) {</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;        nLen = strlen(pFiles[i]) + 1;</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;        <span class="keywordflow">if</span> (nTotal + nLen + 1 &lt; bufsize) {</div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;            strcpy(listbuf, pFiles[i]);</div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;            listbuf += nLen;</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;            nTotal += nLen;</div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;            nFiles = i;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;        }</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;    }</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160; </div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList</a>(pFiles);</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160; </div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;    <span class="keywordflow">return</span> nFiles;</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a57f26ffcc37676a8213c96762a07458a">FS_ListFiles()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dd6/cl__ui_8c.html#a816b2b94718d7146f200ba4a378c6834">CL_UISystemCalls()</a>, and <a class="el" href="../../d7/d3c/sv__game_8c.html#a73948936d23d65d3a27c6027767af7c8">SV_GameSystemCalls()</a>.</p>

</div>
</div>
<a id="a6d35e4aedee94ce5450b455873bfca2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d35e4aedee94ce5450b455873bfca2e">&#9670;&nbsp;</a></span>FS_GetModDescription()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_GetModDescription </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>modDir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>descriptionLen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">modDir</td><td></td></tr>
    <tr><td class="paramname">description</td><td></td></tr>
    <tr><td class="paramname">descriptionLen</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02503">2503</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;{</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    descHandle;</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;    <span class="keywordtype">char</span>            descPath[<a class="code" href="../../de/d01/q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>];</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;    <span class="keywordtype">int</span>                nDescLen;</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;    FILE* file;</div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160; </div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a>(descPath, <span class="keyword">sizeof</span>(descPath), <span class="stringliteral">&quot;%s%cdescription.txt&quot;</span>, modDir, <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;    nDescLen = <a class="code" href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead</a>(descPath, &amp;descHandle);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160; </div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;    <span class="keywordflow">if</span> (nDescLen &gt; 0) {</div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;        file = <a class="code" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle</a>(descHandle);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;        <a class="code" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>(description, 0, descriptionLen);</div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;        nDescLen = fread(description, 1, descriptionLen, file);</div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;        <span class="keywordflow">if</span> (nDescLen &gt;= 0) {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;            description[nDescLen] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        }</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(description, modDir, descriptionLen);</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;    }</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160; </div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;    <span class="keywordflow">if</span> (descHandle) {</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(descHandle);</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;    }</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a>, <a class="el" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, and <a class="el" href="../../d5/dd6/sys__main_8c.html#a375eeb5d9e57783a5a6d602d8647dd1b">Sys_InitPIDFile()</a>.</p>

</div>
</div>
<a id="a13b37fc93130136e7921cf1f1a4283f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13b37fc93130136e7921cf1f1a4283f1">&#9670;&nbsp;</a></span>FS_GetModList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_GetModList </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>listbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>bufsize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a list of mod directory names. </p>
<p>A mod directory is a peer to baseq3 with a pk3 or pk3dir in it.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">listbuf</td><td></td></tr>
    <tr><td class="paramname">bufsize</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns a list of mod directory names. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02537">2537</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;{</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;    <span class="keywordtype">int</span> nMods, i, j, k, nTotal, nLen, nPaks, nDirs, nPakDirs, nPotential, nDescLen;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;    <span class="keywordtype">char</span>** pFiles = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;    <span class="keywordtype">char</span>** pPaks = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;    <span class="keywordtype">char</span>** pDirs = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;    <span class="keywordtype">char</span>* name, * path;</div>
<div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;    <span class="keywordtype">char</span> description[<a class="code" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>];</div>
<div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160; </div>
<div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;    <span class="keywordtype">int</span> dummy;</div>
<div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;    <span class="keywordtype">char</span>** pFiles0 = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> bDrop = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160; </div>
<div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;    <span class="comment">// paths to search for mods</span></div>
<div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* <span class="keyword">const</span> paths[] = { <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a> };</div>
<div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160; </div>
<div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;    *listbuf = 0;</div>
<div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;    nMods = nTotal = 0;</div>
<div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160; </div>
<div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;    <span class="comment">// iterate through paths and get list of potential mods</span></div>
<div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(paths); i++) {</div>
<div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;        pFiles0 = <a class="code" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles</a>(paths[i], <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;dummy, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>);</div>
<div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;        <span class="comment">// Sys_ConcatenateFileLists frees the lists so Sys_FreeFileList isn&#39;t required</span></div>
<div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;        pFiles = <a class="code" href="../../d8/d8c/files_8c.html#ad06f3a08b27ffe3a721b0d726e0fa8f7">Sys_ConcatenateFileLists</a>(pFiles, pFiles0);</div>
<div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;    }</div>
<div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160; </div>
<div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;    nPotential = <a class="code" href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">Sys_CountFileList</a>(pFiles);</div>
<div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160; </div>
<div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; nPotential; i++) {</div>
<div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;        name = pFiles[i];</div>
<div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;        <span class="comment">// NOTE: cleaner would involve more changes</span></div>
<div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;        <span class="comment">// ignore duplicate mod directories</span></div>
<div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;        <span class="keywordflow">if</span> (i != 0) {</div>
<div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            bDrop = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            <span class="keywordflow">for</span> (j = 0; j &lt; i; j++) {</div>
<div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(pFiles[j], name) == 0) {</div>
<div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;                    <span class="comment">// this one can be dropped</span></div>
<div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;                    bDrop = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;                }</div>
<div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            }</div>
<div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;        }</div>
<div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;        <span class="comment">// we also drop &quot;baseq3&quot; &quot;.&quot; and &quot;..&quot;</span></div>
<div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;        <span class="keywordflow">if</span> (bDrop || <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(name, <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>) == 0 || <a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(name, <span class="stringliteral">&quot;.&quot;</span>, 1) == 0) {</div>
<div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;        }</div>
<div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160; </div>
<div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;        <span class="comment">// in order to be a valid mod the directory must contain at least one .pk3 or .pk3dir</span></div>
<div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;        <span class="comment">// we didn&#39;t keep the information when we merged the directory names, as to what OS Path it was found under</span></div>
<div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;        <span class="comment">// so we will try each of them here</span></div>
<div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(paths); j++) {</div>
<div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;            path = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(paths[j], name, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;            nPaks = nDirs = nPakDirs = 0;</div>
<div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;            pPaks = <a class="code" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles</a>(path, <span class="stringliteral">&quot;.pk3&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;nPaks, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;            pDirs = <a class="code" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles</a>(path, <span class="stringliteral">&quot;/&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;nDirs, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;            <span class="keywordflow">for</span> (k = 0; k &lt; nDirs; k++) {</div>
<div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;                <span class="comment">// we only want to count directories ending with &quot;.pk3dir&quot;</span></div>
<div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a>(pDirs[k], <span class="stringliteral">&quot;.pk3dir&quot;</span>, strlen(pDirs[k]))) {</div>
<div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;                    nPakDirs++;</div>
<div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;                }</div>
<div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;            }</div>
<div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;            <span class="comment">// we only use Sys_ListFiles to check whether files are present</span></div>
<div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;            <a class="code" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList</a>(pPaks);</div>
<div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;            <a class="code" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList</a>(pDirs);</div>
<div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160; </div>
<div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;            <span class="keywordflow">if</span> (nPaks &gt; 0 || nPakDirs &gt; 0) {</div>
<div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;            }</div>
<div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;        }</div>
<div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160; </div>
<div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;        <span class="keywordflow">if</span> (nPaks &gt; 0 || nPakDirs &gt; 0) {</div>
<div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;            nLen = strlen(name) + 1;</div>
<div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;            <span class="comment">// nLen is the length of the mod path</span></div>
<div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;            <span class="comment">// we need to see if there is a description available</span></div>
<div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a6d35e4aedee94ce5450b455873bfca2e">FS_GetModDescription</a>(name, description, <span class="keyword">sizeof</span>(description));</div>
<div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;            nDescLen = strlen(description) + 1;</div>
<div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160; </div>
<div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;            <span class="keywordflow">if</span> (nTotal + nLen + 1 + nDescLen + 1 &lt; bufsize) {</div>
<div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;                strcpy(listbuf, name);</div>
<div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;                listbuf += nLen;</div>
<div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;                strcpy(listbuf, description);</div>
<div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;                listbuf += nDescLen;</div>
<div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;                nTotal += nLen + nDescLen;</div>
<div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;                nMods++;</div>
<div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;            }</div>
<div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;        }</div>
<div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;    }</div>
<div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;    <a class="code" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList</a>(pFiles);</div>
<div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160; </div>
<div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;    <span class="keywordflow">return</span> nMods;</div>
<div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>, <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a6d35e4aedee94ce5450b455873bfca2e">FS_GetModDescription()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad06f3a08b27ffe3a721b0d726e0fa8f7">Sys_ConcatenateFileLists()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">Sys_CountFileList()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#aa9e3a61cb246fd92cece14039e09dd80">FS_GetFileList()</a>.</p>

</div>
</div>
<a id="a78ced81260ee2821fa8d398830e55855"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ced81260ee2821fa8d398830e55855">&#9670;&nbsp;</a></span>FS_HandleForFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> FS_HandleForFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00409">409</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;{</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; <a class="code" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>; i++) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[i].handleFiles.file.o == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        }</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    }</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;FS_HandleForFile: none free&quot;</span>);</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>.</p>

</div>
</div>
<a id="a41577d0c844f4e801242c4c17343e0da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41577d0c844f4e801242c4c17343e0da">&#9670;&nbsp;</a></span>FS_HashFileName()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_HashFileName </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>hashSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>return a hash value for the filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fname</td><td></td></tr>
    <tr><td class="paramname">hashSize</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00384">384</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;{</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    <span class="keywordtype">int</span>        i;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    <span class="keywordtype">long</span>    hash;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;    <span class="keywordtype">char</span>    letter;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    hash = 0;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;    i = 0;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    <span class="keywordflow">while</span> (fname[i] != <span class="charliteral">&#39;\0&#39;</span>) {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        letter = tolower(fname[i]);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">if</span> (letter == <span class="charliteral">&#39;.&#39;</span>) <span class="keywordflow">break</span>;                <span class="comment">// don&#39;t include extension</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <span class="keywordflow">if</span> (letter == <span class="charliteral">&#39;\\&#39;</span>) letter = <span class="charliteral">&#39;/&#39;</span>;        <span class="comment">// damn path names</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        <span class="keywordflow">if</span> (letter == <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>) letter = <span class="charliteral">&#39;/&#39;</span>;        <span class="comment">// damn path names</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        hash += (<a class="code" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>)(letter) * (i + 119);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;        i++;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    hash = (hash ^ (hash &gt;&gt; 10) ^ (hash &gt;&gt; 20));</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    hash &amp;= (hashSize - 1);</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <span class="keywordflow">return</span> hash;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long()</a>, and <a class="el" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a762b35729743799fe79df7acd009f3b7">FS_FileIsInPAK()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile()</a>.</p>

</div>
</div>
<a id="a7669ed35dabfd22231b3651cda65cc37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7669ed35dabfd22231b3651cda65cc37">&#9670;&nbsp;</a></span>FS_HomeRemove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_HomeRemove </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>homePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">homePath</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00620">620</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;{</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(<a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;    remove(<a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>,</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>));</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#a7d10cc40f267012964f0144ed90c0768">CL_CloseAVI()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ac35b061af7f9355c2c3906433f95f80e">Com_Shutdown()</a>.</p>

</div>
</div>
<a id="aa3c5469d16b3b5b09a1e0fa39c2a0e24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3c5469d16b3b5b09a1e0fa39c2a0e24">&#9670;&nbsp;</a></span>FS_idPak()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_idPak </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>pak</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>base</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>numPaks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pak</td><td></td></tr>
    <tr><td class="paramname">base</td><td></td></tr>
    <tr><td class="paramname">numPaks</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03048">3048</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;{</div>
<div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160; </div>
<div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d1/df7/qcommon_8h.html#a365c7380a4f5454e7a51ec401282eff4">NUM_ID_PAKS</a>; i++) {</div>
<div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(pak, <a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%s/pak%d&quot;</span>, base, i))) {</div>
<div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;        }</div>
<div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;    }</div>
<div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;    <span class="keywordflow">if</span> (i &lt; numPaks) {</div>
<div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;    }</div>
<div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a365c7380a4f5454e7a51ec401282eff4">NUM_ID_PAKS</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks()</a>, and <a class="el" href="../../db/d01/sv__client_8c.html#a9e3957a357260512ec0724ce88c5c581">SV_WriteDownloadToClient()</a>.</p>

</div>
</div>
<a id="aa392470e1a37d86f0a2fdb60d5f9210e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa392470e1a37d86f0a2fdb60d5f9210e">&#9670;&nbsp;</a></span>FS_InitFilesystem()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_InitFilesystem </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called only at initial startup, not when the filesystem is resetting due to a game change. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03931">3931</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;{</div>
<div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;    <span class="comment">// allow command line parms to override our defaults</span></div>
<div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;    <span class="comment">// we have to specially handle this, because normal command</span></div>
<div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;    <span class="comment">// line variable sets don&#39;t happen until after the filesystem</span></div>
<div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;    <span class="comment">// has already been initialized</span></div>
<div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#a4cdc241a40649ca5b806e36e5b8c7fcc">Com_StartupVariable</a>(<span class="stringliteral">&quot;fs_basepath&quot;</span>);</div>
<div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#a4cdc241a40649ca5b806e36e5b8c7fcc">Com_StartupVariable</a>(<span class="stringliteral">&quot;fs_homepath&quot;</span>);</div>
<div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#a4cdc241a40649ca5b806e36e5b8c7fcc">Com_StartupVariable</a>(<span class="stringliteral">&quot;fs_game&quot;</span>);</div>
<div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160; </div>
<div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(<a class="code" href="../../d7/de8/cvar_8c.html#a47803524e8f002b6540d91b8cccc7e0e">Cvar_VariableString</a>(<span class="stringliteral">&quot;fs_game&quot;</span>), <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>))</div>
<div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;        <a class="code" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a>(<span class="stringliteral">&quot;fs_game&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160; </div>
<div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;    <span class="comment">// try to start up normally</span></div>
<div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup</a>(<a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160; </div>
<div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;<span class="preprocessor">#ifndef STANDALONE</span></div>
<div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0</a>();</div>
<div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160; </div>
<div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;    <span class="comment">// if we can&#39;t find default.cfg, assume that the paths are</span></div>
<div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;    <span class="comment">// busted and error out now, rather than getting an unreadable</span></div>
<div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;    <span class="comment">// graphics screen when the font fails to load</span></div>
<div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a671ffbf506ea8d57d193c072ade04343">FS_ReadFile</a>(<span class="stringliteral">&quot;default.cfg&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &lt;= 0) {</div>
<div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Couldn&#39;t load default.cfg&quot;</span>);</div>
<div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;    }</div>
<div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160; </div>
<div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>, <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>));</div>
<div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>, <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>));</div>
<div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>, <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>));</div>
<div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>));</div>
<div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d8/d19/common_8c.html#a4cdc241a40649ca5b806e36e5b8c7fcc">Com_StartupVariable()</a>, <a class="el" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set()</a>, <a class="el" href="../../d7/de8/cvar_8c.html#a47803524e8f002b6540d91b8cccc7e0e">Cvar_VariableString()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0()</a>, <a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>, <a class="el" href="../../d8/d8c/files_8c.html#a671ffbf506ea8d57d193c072ade04343">FS_ReadFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>, <a class="el" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a2c763f2f5b9d3262b65192c08d1e8744">Com_Init()</a>.</p>

</div>
</div>
<a id="af5da17e7070d410478748895e29c3dd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5da17e7070d410478748895e29c3dd1">&#9670;&nbsp;</a></span>FS_Initialized()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_Initialized </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If fs_searchpaths. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00340">340</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a> != <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d19/common_8c.html#aa9f31322df94ece8f2f18c0ffdb7192e">Com_Printf()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a12dc3f925eb43321ffc3cc226f01f9aa">Hunk_Log()</a>, <a class="el" href="../../d8/d19/common_8c.html#ac5a4cadd7cfa8f61c4ca788f0e134674">Hunk_SmallLog()</a>, and <a class="el" href="../../d8/d19/common_8c.html#ae88242f4fb5e2cb3bd31948e804884a3">Z_LogZoneHeap()</a>.</p>

</div>
</div>
<a id="a900505aca395309f53085ae0ce5663f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a900505aca395309f53085ae0ce5663f7">&#9670;&nbsp;</a></span>FS_InvalidGameDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_InvalidGameDir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>gamedir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return true if path is a reference to current directory or directory traversal or a sub-directory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gamedir</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03082">3082</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;{</div>
<div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;    <span class="keywordflow">if</span> (!strcmp(gamedir, <span class="stringliteral">&quot;.&quot;</span>) || !strcmp(gamedir, <span class="stringliteral">&quot;..&quot;</span>)</div>
<div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;        || strchr(gamedir, <span class="charliteral">&#39;/&#39;</span>) || strchr(gamedir, <span class="charliteral">&#39;\\&#39;</span>)) {</div>
<div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;    }</div>
<div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160; </div>
<div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#a815613b593195ad97e13d9055e7aebdf">CL_SystemInfoChanged()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="ad2381b59cd3dba516a289108f96b77d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2381b59cd3dba516a289108f96b77d3">&#9670;&nbsp;</a></span>FS_IsDemoExt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_IsDemoExt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>namelen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return qtrue if filename has a demo extension. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">namelen</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01097">1097</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;{</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;    <span class="keywordtype">char</span>* ext_test;</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;    <span class="keywordtype">int</span> index, protocol;</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160; </div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;    ext_test = strrchr(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;    <span class="keywordflow">if</span> (ext_test &amp;&amp; !<a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(ext_test + 1, <a class="code" href="../../de/d01/q__shared_8h.html#ac7b24ebb5f889a3101ae83331cbfd358">DEMOEXT</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(<a class="code" href="../../de/d01/q__shared_8h.html#ac7b24ebb5f889a3101ae83331cbfd358">DEMOEXT</a>) - 1)) {</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;        protocol = atoi(ext_test + <a class="code" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(<a class="code" href="../../de/d01/q__shared_8h.html#ac7b24ebb5f889a3101ae83331cbfd358">DEMOEXT</a>));</div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160; </div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;        <span class="keywordflow">if</span> (protocol == <a class="code" href="../../d8/d19/common_8c.html#a7eb1d10a704d4f8996292a012c1050c5">com_protocol</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160; </div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="preprocessor">#ifdef LEGACY_PROTOCOL</span></div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;        <span class="keywordflow">if</span> (protocol == <a class="code" href="../../d8/d19/common_8c.html#a42a92adf0430f1d0c4b0c078226aef09">com_legacyprotocol</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>)</div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160; </div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">for</span> (index = 0; <a class="code" href="../../d8/d19/common_8c.html#aa61f8a8a391cfb842265fa5a141f3e59">demo_protocols</a>[index]; index++) {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d19/common_8c.html#aa61f8a8a391cfb842265fa5a141f3e59">demo_protocols</a>[index] == protocol)</div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;        }</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;    }</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160; </div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>, <a class="el" href="../../d8/d19/common_8c.html#a42a92adf0430f1d0c4b0c078226aef09">com_legacyprotocol</a>, <a class="el" href="../../d8/d19/common_8c.html#a7eb1d10a704d4f8996292a012c1050c5">com_protocol</a>, <a class="el" href="../../d8/d19/common_8c.html#aa61f8a8a391cfb842265fa5a141f3e59">demo_protocols</a>, <a class="el" href="../../de/d01/q__shared_8h.html#ac7b24ebb5f889a3101ae83331cbfd358">DEMOEXT</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>.</p>

</div>
</div>
<a id="a95f53b203279a4babb672e39ddac3f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95f53b203279a4babb672e39ddac3f83">&#9670;&nbsp;</a></span>FS_IsExt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_IsExt </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>ext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>namelen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return qtrue if ext matches file extension filename. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">ext</td><td></td></tr>
    <tr><td class="paramname">namelen</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01077">1077</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;{</div>
<div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;    <span class="keywordtype">int</span> extlen;</div>
<div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160; </div>
<div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;    extlen = strlen(ext);</div>
<div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160; </div>
<div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;    <span class="keywordflow">if</span> (extlen &gt; namelen)</div>
<div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160; </div>
<div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;    <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a> += namelen - extlen;</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160; </div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;    <span class="keywordflow">return</span> !<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, ext);</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>.</p>

</div>
</div>
<a id="a57f26ffcc37676a8213c96762a07458a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57f26ffcc37676a8213c96762a07458a">&#9670;&nbsp;</a></span>FS_ListFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** FS_ListFiles </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>extension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *&#160;</td>
          <td class="paramname"><em>numfiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Directory should not have either a leading or trailing '/' , if extension is "/", only subdirectories will be returned. </p>
<p>The returned files will not include any directories or '/'.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">extension</td><td></td></tr>
    <tr><td class="paramname">numfiles</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02368">2368</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;{</div>
<div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles</a>(path, extension, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, numfiles, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a737fb4745a9b5322c41533d5c870dbbd">CL_InitRef()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14db47fd7a399697847cdd67685c5426">FS_Dir_f()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#aa9e3a61cb246fd92cece14039e09dd80">FS_GetFileList()</a>.</p>

</div>
</div>
<a id="a3776903aa012bf28a0107683c8d9a1b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3776903aa012bf28a0107683c8d9a1b7">&#9670;&nbsp;</a></span>FS_ListFilteredFiles()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char** FS_ListFilteredFiles </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>extension</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filter</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *&#160;</td>
          <td class="paramname"><em>numfiles</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>allowNonPureFilesOnDisk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a uniqued list of files that match the given criteria from all search paths. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
    <tr><td class="paramname">extension</td><td></td></tr>
    <tr><td class="paramname">filter</td><td></td></tr>
    <tr><td class="paramname">numfiles</td><td></td></tr>
    <tr><td class="paramname">allowNonPureFilesOnDisk</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02230">2230</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;{</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;    <span class="keywordtype">int</span>                nfiles;</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;    <span class="keywordtype">char</span>** listCopy;</div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;    <span class="keywordtype">char</span>* list[<a class="code" href="../../d8/d8c/files_8c.html#ad5b07871465d84bfd80a97dc24093151">MAX_FOUND_FILES</a>];</div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;    <span class="keywordtype">int</span>                i;</div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;    <span class="keywordtype">int</span>                pathLength;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;    <span class="keywordtype">int</span>                extensionLength;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;    <span class="keywordtype">int</span>                length, pathDepth, temp;</div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* pak;</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;    <a class="code" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_t</a>* buildBuffer;</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;    <span class="keywordtype">char</span>            zpath[<a class="code" href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a>];</div>
<div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160; </div>
<div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;    }</div>
<div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160; </div>
<div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;    <span class="keywordflow">if</span> (!path) {</div>
<div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;        *numfiles = 0;</div>
<div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;    }</div>
<div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;    <span class="keywordflow">if</span> (!extension) {</div>
<div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;        extension = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;    }</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160; </div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;    pathLength = strlen(path);</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;    <span class="keywordflow">if</span> (path[pathLength - 1] == <span class="charliteral">&#39;\\&#39;</span> || path[pathLength - 1] == <span class="charliteral">&#39;/&#39;</span>) {</div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        pathLength--;</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;    }</div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;    extensionLength = strlen(extension);</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;    nfiles = 0;</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a60b9d8c773b74225a800532bbb0a3779">FS_ReturnPath</a>(path, zpath, &amp;pathDepth);</div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160; </div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;    <span class="comment">// search through the path, one element at a time, adding to list</span></div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;    <span class="comment">//</span></div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;        <span class="comment">// is the element a pak file?</span></div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160; </div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;            <span class="comment">//ZOID:  If we are pure, don&#39;t search for files on paks that</span></div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;            <span class="comment">// aren&#39;t on the pure list</span></div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>)) {</div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            }</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160; </div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            <span class="comment">// look through all the pak file elements</span></div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;            pak = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>;</div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            buildBuffer = pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#af85f9a022f6a140f509a22c5d1de7e62">buildBuffer</a>;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; pak-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a0a5041adb1336a5ff6b8a22a1fe80949">numfiles</a>; i++) {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                <span class="keywordtype">char</span>* name;</div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                <span class="keywordtype">int</span>        zpathLen, depth;</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                <span class="comment">// check for directory match</span></div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                name = buildBuffer[i].<a class="code" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">name</a>;</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;                <span class="comment">//</span></div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                <span class="keywordflow">if</span> (filter) {</div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                    <span class="comment">// case insensitive</span></div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;                    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d19/common_8c.html#a9ae978943aacf56718d9d873d439186b">Com_FilterPath</a>(filter, name, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>))</div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                    <span class="comment">// unique the match</span></div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;                    nfiles = <a class="code" href="../../d8/d8c/files_8c.html#a146c14808e970bc75796397ccec06eb5">FS_AddFileToList</a>(name, list, nfiles);</div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160; </div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;                    zpathLen = <a class="code" href="../../d8/d8c/files_8c.html#a60b9d8c773b74225a800532bbb0a3779">FS_ReturnPath</a>(name, zpath, &amp;depth);</div>
<div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160; </div>
<div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;                    <span class="keywordflow">if</span> ((depth - pathDepth) &gt; 2 || pathLength &gt; zpathLen || <a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(name, path, pathLength)) {</div>
<div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;                    }</div>
<div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160; </div>
<div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;                    <span class="comment">// check for extension match</span></div>
<div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;                    length = strlen(name);</div>
<div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;                    <span class="keywordflow">if</span> (length &lt; extensionLength) {</div>
<div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;                    }</div>
<div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160; </div>
<div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(name + length - extensionLength, extension)) {</div>
<div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;                    }</div>
<div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;                    <span class="comment">// unique the match</span></div>
<div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160; </div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;                    temp = pathLength;</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;                    <span class="keywordflow">if</span> (pathLength) {</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;                        temp++; <span class="comment">// include the &#39;/&#39;</span></div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;                    }</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;                    nfiles = <a class="code" href="../../d8/d8c/files_8c.html#a146c14808e970bc75796397ccec06eb5">FS_AddFileToList</a>(name + temp, list, nfiles);</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;                }</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;            }</div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>) { <span class="comment">// scan for files in the filesystem</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            <span class="keywordtype">char</span>* netpath;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            <span class="keywordtype">int</span>        numSysFiles;</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;            <span class="keywordtype">char</span>** sysFiles;</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;            <span class="keywordtype">char</span>* name;</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160; </div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;            <span class="comment">// don&#39;t scan directories for files if we are pure or restricted</span></div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a> &amp;&amp; !allowNonPureFilesOnDisk) {</div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                netpath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">path</a>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">gamedir</a>, path);</div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                sysFiles = <a class="code" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles</a>(netpath, extension, filter, &amp;numSysFiles, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;                <span class="keywordflow">for</span> (i = 0; i &lt; numSysFiles; i++) {</div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                    <span class="comment">// unique the match</span></div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                    name = sysFiles[i];</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;                    nfiles = <a class="code" href="../../d8/d8c/files_8c.html#a146c14808e970bc75796397ccec06eb5">FS_AddFileToList</a>(name, list, nfiles);</div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                }</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                <a class="code" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList</a>(sysFiles);</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;            }</div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;        }</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;    }</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160; </div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;    <span class="comment">// return a copy of the list</span></div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;    *numfiles = nfiles;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160; </div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;    <span class="keywordflow">if</span> (!nfiles) {</div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;    }</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160; </div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;    listCopy = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>((nfiles + 1) * <span class="keyword">sizeof</span>(*listCopy));</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; nfiles; i++) {</div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;        listCopy[i] = list[i];</div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;    }</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;    listCopy[i] = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160; </div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;    <span class="keywordflow">return</span> listCopy;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/dad/structpack__t.html#af85f9a022f6a140f509a22c5d1de7e62">pack_t::buildBuffer</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d8/d19/common_8c.html#a9ae978943aacf56718d9d873d439186b">Com_FilterPath()</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">searchpath_s::dir</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a146c14808e970bc75796397ccec06eb5">FS_AddFileToList()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a60b9d8c773b74225a800532bbb0a3779">FS_ReturnPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">directory_t::gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad5b07871465d84bfd80a97dc24093151">MAX_FOUND_FILES</a>, <a class="el" href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">fileInPack_s::name</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../dc/dad/structpack__t.html#a0a5041adb1336a5ff6b8a22a1fe80949">pack_t::numfiles</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">directory_t::path</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a5577445f5311114a0d765a7077f5744e">FS_FilenameCompletion()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#adc33a5dd4efaa8adfa2196efa77de4eb">FS_ListFiles()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f()</a>.</p>

</div>
</div>
<a id="acdf8781bbd0104a2bee1d53f1a3413c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdf8781bbd0104a2bee1d53f1a3413c9">&#9670;&nbsp;</a></span>FS_LoadedPakChecksums()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* FS_LoadedPakChecksums </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a space separated string containing the checksums of all loaded pk3 files. </p>
<p>Servers with sv_pure set will get this string and pass it to clients. </p><dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03613">3613</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;{</div>
<div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span>    info[<a class="code" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>];</div>
<div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160; </div>
<div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;    info[0] = 0;</div>
<div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160; </div>
<div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;        <span class="comment">// is the element a pak file? </span></div>
<div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;        <span class="keywordflow">if</span> (!search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;        }</div>
<div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160; </div>
<div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%i &quot;</span>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a>));</div>
<div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;    }</div>
<div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160; </div>
<div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;    <span class="keywordflow">return</span> info;</div>
<div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>, <a class="el" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">pack_t::checksum</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d49/sv__init_8c.html#ac2c5754f02da3857796506ea5271ccee">SV_SpawnServer()</a>.</p>

</div>
</div>
<a id="a35212f789c0b97e6971ee34361583e63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a35212f789c0b97e6971ee34361583e63">&#9670;&nbsp;</a></span>FS_LoadedPakNames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* FS_LoadedPakNames </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a space separated string containing the names of all loaded pk3 files. </p>
<p>Servers with sv_pure set will get this string and pass it to clients. </p><dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03637">3637</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;{</div>
<div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span>    info[<a class="code" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>];</div>
<div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160; </div>
<div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;    info[0] = 0;</div>
<div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160; </div>
<div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;        <span class="comment">// is the element a pak file?</span></div>
<div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;        <span class="keywordflow">if</span> (!search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;        }</div>
<div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160; </div>
<div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;        <span class="keywordflow">if</span> (*info) {</div>
<div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;            <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;        }</div>
<div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a6b6912c1d86e57717e1f52174825c0d6">pakBasename</a>);</div>
<div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;    }</div>
<div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160; </div>
<div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;    <span class="keywordflow">return</span> info;</div>
<div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#a6b6912c1d86e57717e1f52174825c0d6">pack_t::pakBasename</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#a5b405bbe462b8045ae74325e1046ee5a">CL_OpenedPK3List_f()</a>, and <a class="el" href="../../d5/d49/sv__init_8c.html#ac2c5754f02da3857796506ea5271ccee">SV_SpawnServer()</a>.</p>

</div>
</div>
<a id="af287f1310afea542ea308bb4e5cf8910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af287f1310afea542ea308bb4e5cf8910">&#9670;&nbsp;</a></span>FS_LoadedPakPureChecksums()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* FS_LoadedPakPureChecksums </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a space separated string containing the checksums of all loaded pk3 files. </p>
<p>Servers with sv_pure set will get this string and pass it to clients.</p>
<p>Returns a space separated string containing the pure checksums of all loaded pk3 files. Servers with sv_pure use these checksums to compare with the checksums the clients send back to the server.</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03668">3668</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;{</div>
<div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span>    info[<a class="code" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>];</div>
<div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160; </div>
<div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;    info[0] = 0;</div>
<div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160; </div>
<div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;        <span class="comment">// is the element a pak file? </span></div>
<div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;        <span class="keywordflow">if</span> (!search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;        }</div>
<div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160; </div>
<div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%i &quot;</span>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pure_checksum</a>));</div>
<div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;    }</div>
<div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160; </div>
<div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;    <span class="keywordflow">return</span> info;</div>
<div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pack_t::pure_checksum</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d01/sv__client_8c.html#a698002d88372c1e95c076026f8736a16">SV_VerifyPaks_f()</a>.</p>

</div>
</div>
<a id="a9f965c88a2d5272bf0ee4f0d10b2b3c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f965c88a2d5272bf0ee4f0d10b2b3c1">&#9670;&nbsp;</a></span>FS_LoadStack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_LoadStack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>return load stack. </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00373">373</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;{</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a>;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d19/common_8c.html#a6ae2deac3f3c895a02e067042ca0fe39">Com_InitHunkMemory()</a>.</p>

</div>
</div>
<a id="a83603ac5600d0e36b364125755ebacca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83603ac5600d0e36b364125755ebacca">&#9670;&nbsp;</a></span>FS_LoadZipFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../dc/dad/structpack__t.html">pack_t</a>* FS_LoadZipFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>zipfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>basename</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new pak_t in the search chain for the contents of a zip file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zipfile</td><td></td></tr>
    <tr><td class="paramname">basename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02018">2018</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;{</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;    <a class="code" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_t</a>* buildBuffer;</div>
<div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;    <a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>* pack;</div>
<div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;    <a class="code" href="../../d2/d5c/unzip_8h.html#ad578db1d36691a2a244482a3b2360ca3">unzFile</a>            uf;</div>
<div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;    <span class="keywordtype">int</span>                err;</div>
<div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;    <a class="code" href="../../db/d9c/structunz__global__info__s.html">unz_global_info</a> gi;</div>
<div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;    <span class="keywordtype">char</span>            filename_inzip[<a class="code" href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a>];</div>
<div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;    <a class="code" href="../../dc/dbc/structunz__file__info__s.html">unz_file_info</a>    file_info;</div>
<div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;    <span class="keywordtype">int</span>                i, len;</div>
<div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;    <span class="keywordtype">long</span>            hash;</div>
<div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;    <span class="keywordtype">int</span>                fs_numHeaderLongs;</div>
<div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;    <span class="keywordtype">int</span>* fs_headerLongs;</div>
<div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;    <span class="keywordtype">char</span>* namePtr;</div>
<div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160; </div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;    fs_numHeaderLongs = 0;</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160; </div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;    uf = <a class="code" href="../../d6/da7/unzip_8c.html#a614a4ee72e9055e5657d28487c2a7936">unzOpen</a>(zipfile);</div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;    err = <a class="code" href="../../d6/da7/unzip_8c.html#af05d6e3eac6ec396d9d134ca140fec61">unzGetGlobalInfo</a>(uf, &amp;gi);</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160; </div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;    <span class="keywordflow">if</span> (err != <a class="code" href="../../d2/d5c/unzip_8h.html#ada043545f95ccd4dae93fa44d95e39a8">UNZ_OK</a>)</div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160; </div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;    len = 0;</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a54821c0b6da683800164a56f2ae14f33">unzGoToFirstFile</a>(uf);</div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; gi.<a class="code" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">number_entry</a>; i++) {</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;        err = <a class="code" href="../../d6/da7/unzip_8c.html#ac99166540260b60340f4787af0a90029">unzGetCurrentFileInfo</a>(uf, &amp;file_info, filename_inzip, <span class="keyword">sizeof</span>(filename_inzip), <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;        <span class="keywordflow">if</span> (err != <a class="code" href="../../d2/d5c/unzip_8h.html#ada043545f95ccd4dae93fa44d95e39a8">UNZ_OK</a>) {</div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;        }</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        len += strlen(filename_inzip) + 1;</div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;        <a class="code" href="../../d6/da7/unzip_8c.html#acb457ebeaee7cb850c11a4a3d4b58201">unzGoToNextFile</a>(uf);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;    }</div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160; </div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;    buildBuffer = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>((gi.<a class="code" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">number_entry</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_t</a>)) + len);</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;    namePtr = ((<span class="keywordtype">char</span>*)buildBuffer) + gi.<a class="code" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">number_entry</a> * <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a17b0350b6ca9a5cbdddb50ba177f9862">fileInPack_t</a>);</div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;    fs_headerLongs = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>((gi.<a class="code" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">number_entry</a> + 1) * <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;    fs_headerLongs[fs_numHeaderLongs++] = <a class="code" href="../../d7/de2/q__platform_8h.html#ae86909c78fbe3c1e12c8f5500d640e01">LittleLong</a>(<a class="code" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;    <span class="comment">// get the hash table size from the number of files in the zip</span></div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;    <span class="comment">// because lots of custom pk3 files have less than 32 or 64 files</span></div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt;= <a class="code" href="../../d8/d8c/files_8c.html#a92854eddea9f8e06383c850a57ac918a">MAX_FILEHASH_SIZE</a>; i &lt;&lt;= 1) {</div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        <span class="keywordflow">if</span> (i &gt; gi.<a class="code" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">number_entry</a>) {</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        }</div>
<div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;    }</div>
<div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160; </div>
<div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;    pack = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>) + i * <span class="keyword">sizeof</span>(<a class="code" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_t</a>*));</div>
<div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;    pack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">hashSize</a> = i;</div>
<div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;    pack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">hashTable</a> = (<a class="code" href="../../d1/d16/structfile_in_pack__s.html">fileInPack_t</a>**)(((<span class="keywordtype">char</span>*)pack) + <span class="keyword">sizeof</span>(<a class="code" href="../../dc/dad/structpack__t.html">pack_t</a>));</div>
<div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; pack-&gt;hashSize; i++) {</div>
<div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;        pack-&gt;hashTable[i] = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;    }</div>
<div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160; </div>
<div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(pack-&gt;pakFilename, zipfile, <span class="keyword">sizeof</span>(pack-&gt;pakFilename));</div>
<div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(pack-&gt;pakBasename, basename, <span class="keyword">sizeof</span>(pack-&gt;pakBasename));</div>
<div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160; </div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;    <span class="comment">// strip .pk3 if needed</span></div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;    <span class="keywordflow">if</span> (strlen(pack-&gt;pakBasename) &gt; 4 &amp;&amp; !<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(pack-&gt;pakBasename + strlen(pack-&gt;pakBasename) - 4, <span class="stringliteral">&quot;.pk3&quot;</span>)) {</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        pack-&gt;pakBasename[strlen(pack-&gt;pakBasename) - 4] = 0;</div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;    }</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160; </div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;    pack-&gt;handle = uf;</div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;    pack-&gt;numfiles = gi.<a class="code" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">number_entry</a>;</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;    <a class="code" href="../../d6/da7/unzip_8c.html#a54821c0b6da683800164a56f2ae14f33">unzGoToFirstFile</a>(uf);</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160; </div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; gi.<a class="code" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">number_entry</a>; i++) {</div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;        err = <a class="code" href="../../d6/da7/unzip_8c.html#ac99166540260b60340f4787af0a90029">unzGetCurrentFileInfo</a>(uf, &amp;file_info, filename_inzip, <span class="keyword">sizeof</span>(filename_inzip), <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;        <span class="keywordflow">if</span> (err != <a class="code" href="../../d2/d5c/unzip_8h.html#ada043545f95ccd4dae93fa44d95e39a8">UNZ_OK</a>) {</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;        }</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;        <span class="keywordflow">if</span> (file_info.<a class="code" href="../../dc/dbc/structunz__file__info__s.html#a7696a98511bc57e389485e5313a9c2bf">uncompressed_size</a> &gt; 0) {</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;            fs_headerLongs[fs_numHeaderLongs++] = <a class="code" href="../../d7/de2/q__platform_8h.html#ae86909c78fbe3c1e12c8f5500d640e01">LittleLong</a>(file_info.<a class="code" href="../../dc/dbc/structunz__file__info__s.html#a6d741cb2df07794d7a4794841148893b">crc</a>);</div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        }</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;        <a class="code" href="../../d3/d86/q__shared_8c.html#ad93d94d7048c649d11a5eea9729842a3">Q_strlwr</a>(filename_inzip);</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;        hash = <a class="code" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName</a>(filename_inzip, pack-&gt;hashSize);</div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        buildBuffer[i].<a class="code" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">name</a> = namePtr;</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        strcpy(buildBuffer[i].name, filename_inzip);</div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;        namePtr += strlen(filename_inzip) + 1;</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;        <span class="comment">// store the file position in the zip</span></div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;        buildBuffer[i].<a class="code" href="../../d1/d16/structfile_in_pack__s.html#a78de898acc4a12eb1e833de902be74f1">pos</a> = <a class="code" href="../../d6/da7/unzip_8c.html#a1c325877d63ca4e205424add563ae01d">unzGetOffset</a>(uf);</div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;        buildBuffer[i].<a class="code" href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">len</a> = file_info.<a class="code" href="../../dc/dbc/structunz__file__info__s.html#a7696a98511bc57e389485e5313a9c2bf">uncompressed_size</a>;</div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;        buildBuffer[i].<a class="code" href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">next</a> = pack-&gt;hashTable[hash];</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        pack-&gt;hashTable[hash] = &amp;buildBuffer[i];</div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        <a class="code" href="../../d6/da7/unzip_8c.html#acb457ebeaee7cb850c11a4a3d4b58201">unzGoToNextFile</a>(uf);</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;    }</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;    pack-&gt;checksum = <a class="code" href="../../d8/d71/md4_8c.html#aacc6f230ca3f48954f6546e9d26ac4fc">Com_BlockChecksum</a>(&amp;fs_headerLongs[1], <span class="keyword">sizeof</span>(*fs_headerLongs) * (fs_numHeaderLongs - 1));</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;    pack-&gt;pure_checksum = <a class="code" href="../../d8/d71/md4_8c.html#aacc6f230ca3f48954f6546e9d26ac4fc">Com_BlockChecksum</a>(fs_headerLongs, <span class="keyword">sizeof</span>(*fs_headerLongs) * fs_numHeaderLongs);</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;    pack-&gt;checksum = <a class="code" href="../../d7/de2/q__platform_8h.html#ae86909c78fbe3c1e12c8f5500d640e01">LittleLong</a>(pack-&gt;checksum);</div>
<div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;    pack-&gt;pure_checksum = <a class="code" href="../../d7/de2/q__platform_8h.html#ae86909c78fbe3c1e12c8f5500d640e01">LittleLong</a>(pack-&gt;pure_checksum);</div>
<div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160; </div>
<div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(fs_headerLongs);</div>
<div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160; </div>
<div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;    pack-&gt;buildBuffer = buildBuffer;</div>
<div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;    <span class="keywordflow">return</span> pack;</div>
<div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d71/md4_8c.html#aacc6f230ca3f48954f6546e9d26ac4fc">Com_BlockChecksum()</a>, <a class="el" href="../../dc/dbc/structunz__file__info__s.html#a6d741cb2df07794d7a4794841148893b">unz_file_info_s::crc</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>, <a class="el" href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName()</a>, <a class="el" href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">pack_t::hashSize</a>, <a class="el" href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">pack_t::hashTable</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">fileInPack_s::len</a>, <a class="el" href="../../d7/de2/q__platform_8h.html#ae86909c78fbe3c1e12c8f5500d640e01">LittleLong</a>, <a class="el" href="../../d8/d8c/files_8c.html#a92854eddea9f8e06383c850a57ac918a">MAX_FILEHASH_SIZE</a>, <a class="el" href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">fileInPack_s::name</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">fileInPack_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">unz_global_info_s::number_entry</a>, <a class="el" href="../../d1/d16/structfile_in_pack__s.html#a78de898acc4a12eb1e833de902be74f1">fileInPack_s::pos</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad93d94d7048c649d11a5eea9729842a3">Q_strlwr()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../dc/dbc/structunz__file__info__s.html#a7696a98511bc57e389485e5313a9c2bf">unz_file_info_s::uncompressed_size</a>, <a class="el" href="../../d2/d5c/unzip_8h.html#ada043545f95ccd4dae93fa44d95e39a8">UNZ_OK</a>, <a class="el" href="../../d6/da7/unzip_8c.html#ac99166540260b60340f4787af0a90029">unzGetCurrentFileInfo()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#af05d6e3eac6ec396d9d134ca140fec61">unzGetGlobalInfo()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a1c325877d63ca4e205424add563ae01d">unzGetOffset()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a54821c0b6da683800164a56f2ae14f33">unzGoToFirstFile()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#acb457ebeaee7cb850c11a4a3d4b58201">unzGoToNextFile()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a614a4ee72e9055e5657d28487c2a7936">unzOpen()</a>, <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#adef5a7e7eb51f7c6231a399c8c43ee51">FS_CompareZipChecksum()</a>.</p>

</div>
</div>
<a id="af3c0fdcf6f42a8c443fc5c924b72e40d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3c0fdcf6f42a8c443fc5c924b72e40d">&#9670;&nbsp;</a></span>FS_NewDir_f()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_NewDir_f </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cmd_AddCommand("fdir", FS_NewDir_f);. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02754">2754</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;{</div>
<div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;    <span class="keywordtype">char</span>* filter;</div>
<div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;    <span class="keywordtype">char</span>** dirnames;</div>
<div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;    <span class="keywordtype">int</span>        ndirs;</div>
<div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;    <span class="keywordtype">int</span>        i;</div>
<div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160; </div>
<div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>() &lt; 2) {</div>
<div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;usage: fdir &lt;filter&gt;\n&quot;</span>);</div>
<div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;example: fdir *q3dm*.bsp\n&quot;</span>);</div>
<div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;    }</div>
<div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160; </div>
<div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;    filter = <a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(1);</div>
<div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160; </div>
<div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;---------------\n&quot;</span>);</div>
<div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160; </div>
<div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;    dirnames = <a class="code" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles</a>(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, filter, &amp;ndirs, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160; </div>
<div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a4b00bf6d8a82595ed18b1d40f7a00fa9">FS_SortFileList</a>(dirnames, ndirs);</div>
<div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160; </div>
<div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; ndirs; i++) {</div>
<div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a6b74272893392639294195e6e3b07914">FS_ConvertPath</a>(dirnames[i]);</div>
<div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, dirnames[i]);</div>
<div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;    }</div>
<div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;%d files listed\n&quot;</span>, ndirs);</div>
<div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList</a>(dirnames);</div>
<div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc()</a>, <a class="el" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a6b74272893392639294195e6e3b07914">FS_ConvertPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a4b00bf6d8a82595ed18b1d40f7a00fa9">FS_SortFileList()</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a2774c2469ce0036a9f1b09737eed5066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2774c2469ce0036a9f1b09737eed5066">&#9670;&nbsp;</a></span>FS_PakIsPure()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_PakIsPure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dc/dad/structpack__t.html">pack_t</a> *&#160;</td>
          <td class="paramname"><em>pack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pack</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00350">350</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160; </div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>) {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>; i++) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">// FIXME: also use hashed file names</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="comment">// NOTE TTimo: a pk3 with same checksum but different name would be validated too</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            <span class="comment">//   I don&#39;t see this as allowing for any exploit, it would only happen if the client does manips of its file names &#39;not a bug&#39;</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="keywordflow">if</span> (pack-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a> == <a class="code" href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a>[i]) {</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;        <span class="comment">// on the aproved list</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            }</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;    <span class="comment">// not on the pure server pak list</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">pack_t::checksum</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a762b35729743799fe79df7acd009f3b7">FS_FileIsInPAK()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f()</a>.</p>

</div>
</div>
<a id="aed9b00d4e7637e781a7757538adf1dd2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed9b00d4e7637e781a7757538adf1dd2">&#9670;&nbsp;</a></span>FS_Path_f()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Path_f </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02786">2786</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;{</div>
<div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>;</div>
<div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;    <span class="keywordtype">int</span>                i;</div>
<div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160; </div>
<div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;We are looking in the current search path:\n&quot;</span>);</div>
<div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>; <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> = <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;next) {</div>
<div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;pack) {</div>
<div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;%s (%i files)\n&quot;</span>, <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;pack-&gt;pakFilename, <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;pack-&gt;numfiles);</div>
<div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>) {</div>
<div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure</a>(<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;pack)) {</div>
<div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;                    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;    not on the pure list\n&quot;</span>);</div>
<div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;                    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;    on the pure list\n&quot;</span>);</div>
<div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;                }</div>
<div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;            }</div>
<div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;%s%c%s\n&quot;</span>, <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;dir-&gt;path, <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;dir-&gt;gamedir);</div>
<div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;        }</div>
<div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;    }</div>
<div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160; </div>
<div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160; </div>
<div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;    <span class="keywordflow">for</span> (i = 1; i &lt; <a class="code" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>; i++) {</div>
<div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[i].handleFiles.file.o) {</div>
<div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;handle %i: %s\n&quot;</span>, i, <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[i].name);</div>
<div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;        }</div>
<div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;    }</div>
<div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>, <a class="el" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, and <a class="el" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="af2a6bd66a22d9da08effd972d87e9f5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2a6bd66a22d9da08effd972d87e9f5b">&#9670;&nbsp;</a></span>FS_PathCmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_PathCmp </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ignore case and seprator char distinctions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s1</td><td></td></tr>
    <tr><td class="paramname">s2</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02689">2689</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;{</div>
<div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;    <span class="keywordtype">int</span>        c1, c2;</div>
<div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160; </div>
<div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;        c1 = *s1++;</div>
<div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;        c2 = *s2++;</div>
<div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160; </div>
<div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;        <span class="keywordflow">if</span> (c1 &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c1 &lt;= <span class="charliteral">&#39;z&#39;</span>) {</div>
<div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;            c1 -= (<span class="charliteral">&#39;a&#39;</span> - <span class="charliteral">&#39;A&#39;</span>);</div>
<div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;        }</div>
<div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;        <span class="keywordflow">if</span> (c2 &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c2 &lt;= <span class="charliteral">&#39;z&#39;</span>) {</div>
<div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;            c2 -= (<span class="charliteral">&#39;a&#39;</span> - <span class="charliteral">&#39;A&#39;</span>);</div>
<div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;        }</div>
<div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160; </div>
<div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;        <span class="keywordflow">if</span> (c1 == <span class="charliteral">&#39;\\&#39;</span> || c1 == <span class="charliteral">&#39;:&#39;</span>) {</div>
<div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;            c1 = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;        }</div>
<div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;        <span class="keywordflow">if</span> (c2 == <span class="charliteral">&#39;\\&#39;</span> || c2 == <span class="charliteral">&#39;:&#39;</span>) {</div>
<div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;            c2 = <span class="charliteral">&#39;/&#39;</span>;</div>
<div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;        }</div>
<div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160; </div>
<div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;        <span class="keywordflow">if</span> (c1 &lt; c2) {</div>
<div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;            <span class="keywordflow">return</span> -1;        <span class="comment">// strings not equal</span></div>
<div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;        }</div>
<div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;        <span class="keywordflow">if</span> (c1 &gt; c2) {</div>
<div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;            <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l02716"></a><span class="lineno"> 2716</span>&#160;        }</div>
<div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;    } <span class="keywordflow">while</span> (c1);</div>
<div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160; </div>
<div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;    <span class="keywordflow">return</span> 0;        <span class="comment">// strings are equal</span></div>
<div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a4b00bf6d8a82595ed18b1d40f7a00fa9">FS_SortFileList()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a25a8e0c344d0b412acb449c3076d5274">paksort()</a>.</p>

</div>
</div>
<a id="a28fb7a9d3ddf3b9761d7578add3377b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28fb7a9d3ddf3b9761d7578add3377b3">&#9670;&nbsp;</a></span>FS_Printf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> <a class="el" href="../../d7/de2/q__platform_8h.html#af8273ae2b4cacc8b918137c2c3f097b1">QDECL</a> FS_Printf </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>like fprintf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">h</td><td></td></tr>
    <tr><td class="paramname">fmt</td><td></td></tr>
    <tr><td class="paramname">...</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01610">1610</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;{</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;    va_list        argptr;</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;    <span class="keywordtype">char</span>        msg[<a class="code" href="../../d1/df7/qcommon_8h.html#ab7f347e6426456fcc8702ac02da8307b">MAXPRINTMSG</a>];</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;    va_start(argptr, fmt);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a8c68b6486c8e49831592d9f46aadaaa2">Q_vsnprintf</a>(msg, <span class="keyword">sizeof</span>(msg), fmt, argptr);</div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;    va_end(argptr);</div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160; </div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a>(msg, strlen(msg), h);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ab7f347e6426456fcc8702ac02da8307b">MAXPRINTMSG</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#a8c68b6486c8e49831592d9f46aadaaa2">Q_vsnprintf()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#afb207419701d140ad2fd6efbf659cfda">CL_DemoCompleted()</a>, <a class="el" href="../../d8/d19/common_8c.html#af7503f857ab4b343d8e47b13d103b613">Com_WriteCDKey()</a>, <a class="el" href="../../d8/d19/common_8c.html#a6b4aa8ef2ffefa9263cfa04b52565d95">Com_WriteConfigToFile()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#aa8c9befb390ecb9f7a9d8389f0cf3a3a">Key_WriteBindings()</a>.</p>

</div>
</div>
<a id="ac259dfbc6260f1056d4a2b82c8d788db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac259dfbc6260f1056d4a2b82c8d788db">&#9670;&nbsp;</a></span>FS_PureServerSetLoadedPaks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_PureServerSetLoadedPaks </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pakSums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pakNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If the string is empty, all data sources will be allowed. </p>
<p>If not empty, only pk3 files that match one of the space separated checksums will be checked for files, with the sole exception of .cfg files.</p>
<p>If the string is empty, all data sources will be allowed.</p>
<p>If not empty, only pk3 files that match one of the space separated checksums will be checked for files, with the exception of .cfg and .dat files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pakSums</td><td></td></tr>
    <tr><td class="paramname">pakNames</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03829">3829</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;{</div>
<div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;    <span class="keywordtype">int</span>        i, c, d;</div>
<div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160; </div>
<div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#aff8c983f8d2d2c161cdc35f8cafcfbe6">Cmd_TokenizeString</a>(pakSums);</div>
<div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160; </div>
<div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;    c = <a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>();</div>
<div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;    <span class="keywordflow">if</span> (c &gt; <a class="code" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>) {</div>
<div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;        c = <a class="code" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>;</div>
<div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;    }</div>
<div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160; </div>
<div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a> = c;</div>
<div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160; </div>
<div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; c; i++) {</div>
<div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a>[i] = atoi(<a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(i));</div>
<div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;    }</div>
<div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160; </div>
<div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>) {</div>
<div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;        <a class="code" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a>(<span class="stringliteral">&quot;Connected to a pure server.\n&quot;</span>);</div>
<div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a>) {</div>
<div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;            <span class="comment">// https://zerowing.idsoftware.com/bugzilla/show_bug.cgi?id=540</span></div>
<div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;            <span class="comment">// force a restart to make sure the search order will be correct</span></div>
<div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a>(<span class="stringliteral">&quot;FS search reorder is required\n&quot;</span>);</div>
<div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart</a>(<a class="code" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>);</div>
<div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;        }</div>
<div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;    }</div>
<div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160; </div>
<div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; c; i++) {</div>
<div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">fs_serverPakNames</a>[i]) {</div>
<div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(<a class="code" href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">fs_serverPakNames</a>[i]);</div>
<div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;        }</div>
<div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">fs_serverPakNames</a>[i] = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;    }</div>
<div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;    <span class="keywordflow">if</span> (pakNames &amp;&amp; *pakNames) {</div>
<div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;        <a class="code" href="../../da/d32/cmd_8c.html#aff8c983f8d2d2c161cdc35f8cafcfbe6">Cmd_TokenizeString</a>(pakNames);</div>
<div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160; </div>
<div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;        d = <a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>();</div>
<div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;        <span class="keywordflow">if</span> (d &gt; <a class="code" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>) {</div>
<div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;            d = <a class="code" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>;</div>
<div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;        }</div>
<div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160; </div>
<div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; d; i++) {</div>
<div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">fs_serverPakNames</a>[i] = <a class="code" href="../../d8/d19/common_8c.html#accd6e59ffb1ddbc8b7975e74345db7e5">CopyString</a>(<a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(i));</div>
<div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;        }</div>
<div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;    }</div>
<div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc()</a>, <a class="el" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv()</a>, <a class="el" href="../../da/d32/cmd_8c.html#aff8c983f8d2d2c161cdc35f8cafcfbe6">Cmd_TokenizeString()</a>, <a class="el" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf()</a>, <a class="el" href="../../d8/d19/common_8c.html#accd6e59ffb1ddbc8b7975e74345db7e5">CopyString()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a>, <a class="el" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">fs_serverPakNames</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#af070127d1b56d0e78f3b844d2902fcda">CL_Disconnect()</a>, <a class="el" href="../../d8/de1/client_8h.html#a815613b593195ad97e13d9055e7aebdf">CL_SystemInfoChanged()</a>, <a class="el" href="../../d8/d19/common_8c.html#a9dd33177baf325e3d430fdbb89e5b8c3">Com_Error()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="ae5fff84a7d6f1fc02e946cbb99cad0e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5fff84a7d6f1fc02e946cbb99cad0e5">&#9670;&nbsp;</a></span>FS_PureServerSetReferencedPaks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_PureServerSetReferencedPaks </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pakSums</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pakNames</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The checksums and names of the pk3 files referenced at the server are sent to the client and stored here. </p>
<p>The client will use these checksums to see if any pk3 files need to be auto-downloaded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pakSums</td><td></td></tr>
    <tr><td class="paramname">pakNames</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03886">3886</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;{</div>
<div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;    <span class="keywordtype">int</span>        i, c, d = 0;</div>
<div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160; </div>
<div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#aff8c983f8d2d2c161cdc35f8cafcfbe6">Cmd_TokenizeString</a>(pakSums);</div>
<div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160; </div>
<div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;    c = <a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>();</div>
<div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;    <span class="keywordflow">if</span> (c &gt; <a class="code" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>) {</div>
<div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;        c = <a class="code" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>;</div>
<div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;    }</div>
<div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160; </div>
<div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; c; i++) {</div>
<div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a>[i] = atoi(<a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(i));</div>
<div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;    }</div>
<div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160; </div>
<div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>(<a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>); i++) {</div>
<div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i])</div>
<div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(<a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i]);</div>
<div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160; </div>
<div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i] = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;    }</div>
<div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160; </div>
<div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;    <span class="keywordflow">if</span> (pakNames &amp;&amp; *pakNames) {</div>
<div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;        <a class="code" href="../../da/d32/cmd_8c.html#aff8c983f8d2d2c161cdc35f8cafcfbe6">Cmd_TokenizeString</a>(pakNames);</div>
<div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160; </div>
<div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;        d = <a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>();</div>
<div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160; </div>
<div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;        <span class="keywordflow">if</span> (d &gt; c)</div>
<div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;            d = c;</div>
<div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160; </div>
<div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;        <span class="keywordflow">for</span> (i = 0; i &lt; d; i++) {</div>
<div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>[i] = <a class="code" href="../../d8/d19/common_8c.html#accd6e59ffb1ddbc8b7975e74345db7e5">CopyString</a>(<a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(i));</div>
<div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;        }</div>
<div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;    }</div>
<div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160; </div>
<div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;    <span class="comment">// ensure that there are as many checksums as there are pak names.</span></div>
<div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;    <span class="keywordflow">if</span> (d &lt; c)</div>
<div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;        c = d;</div>
<div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160; </div>
<div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a> = c;</div>
<div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a>, <a class="el" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc()</a>, <a class="el" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv()</a>, <a class="el" href="../../da/d32/cmd_8c.html#aff8c983f8d2d2c161cdc35f8cafcfbe6">Cmd_TokenizeString()</a>, <a class="el" href="../../d8/d19/common_8c.html#accd6e59ffb1ddbc8b7975e74345db7e5">CopyString()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#af070127d1b56d0e78f3b844d2902fcda">CL_Disconnect()</a>, and <a class="el" href="../../d8/de1/client_8h.html#a815613b593195ad97e13d9055e7aebdf">CL_SystemInfoChanged()</a>.</p>

</div>
</div>
<a id="a4e635a7a368bbd1ef3dbd99140c69e39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e635a7a368bbd1ef3dbd99140c69e39">&#9670;&nbsp;</a></span>FS_Read()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_Read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Properly handles partial reads. </p>
<p>Properly handles partial reads and reads from other dlls.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td></td></tr>
    <tr><td class="paramname">len</td><td></td></tr>
    <tr><td class="paramname">f</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01501">1501</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;{</div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;    <span class="keywordtype">int</span>        block, remaining;</div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;    <span class="keywordtype">int</span>        read;</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;    <span class="keywordtype">byte</span>* <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>;</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;    <span class="keywordtype">int</span>        tries;</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160; </div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;    }</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160; </div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;    <span class="keywordflow">if</span> (!f) {</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;    }</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160; </div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;    <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a> = (<span class="keywordtype">byte</span>*)<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>;</div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3a7653feeeb72d09401102400c55f6f3">fs_readCount</a> += len;</div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160; </div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].zipFile == <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>) {</div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;        remaining = len;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;        tries = 0;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;        <span class="keywordflow">while</span> (remaining) {</div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;            block = remaining;</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            read = fread(<a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>, 1, block, <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o);</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;            <span class="keywordflow">if</span> (read == 0) {</div>
<div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;                <span class="comment">// we might have been trying to read from a CD, which</span></div>
<div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;                <span class="comment">// sometimes returns a 0 read on windows</span></div>
<div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;                <span class="keywordflow">if</span> (!tries) {</div>
<div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;                    tries = 1;</div>
<div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;                } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;                    <span class="keywordflow">return</span> len - remaining;    <span class="comment">//Com_Error (ERR_FATAL, &quot;FS_Read: 0 bytes read&quot;);</span></div>
<div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;                }</div>
<div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;            }</div>
<div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160; </div>
<div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;            <span class="keywordflow">if</span> (read == -1) {</div>
<div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_Read: -1 bytes read&quot;</span>);</div>
<div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;            }</div>
<div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160; </div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;            remaining -= read;</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a> += read;</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;        }</div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;        <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d6/da7/unzip_8c.html#a782029e380dc5ab5dab00361c9c14f58">unzReadCurrentFile</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.z, <a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, len);</div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;    }</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3a7653feeeb72d09401102400c55f6f3">fs_readCount</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../d6/da7/unzip_8c.html#a782029e380dc5ab5dab00361c9c14f58">unzReadCurrentFile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/de1/client_8h.html#a639bc6cb98e1ee99e686df704f61958e">CIN_PlayCinematic()</a>, <a class="el" href="../../d2/dde/cl__cgame_8c.html#a71ede2bb98f1ae6f01efc81cd25f4a3c">CL_CgameSystemCalls()</a>, <a class="el" href="../../d8/de1/client_8h.html#a7d10cc40f267012964f0144ed90c0768">CL_CloseAVI()</a>, <a class="el" href="../../d8/de1/client_8h.html#ab3428055e93d99224b0dfc2dd0906320">CL_LoadConsoleHistory()</a>, <a class="el" href="../../d8/de1/client_8h.html#a424da74a7a9e39e8807980cdc8d7db5c">CL_ReadDemoMessage()</a>, <a class="el" href="../../d9/dd6/cl__ui_8c.html#a816b2b94718d7146f200ba4a378c6834">CL_UISystemCalls()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad7ba8f4e667339f48746407580f90d0e">Com_AppendCDKey()</a>, <a class="el" href="../../d8/d19/common_8c.html#a3b7310bba041784a8f5dd07f7e6ad852">Com_GetRealEvent()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6efb2ecbf6e3e60a7d216c91a82e951c">Com_MD5File()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1de8ef7048063ff2bd814d66f47d74e0">Com_ReadCDKey()</a>, <a class="el" href="../../d8/d19/common_8c.html#a45257f3f2a1eb473f8a34f18d2825212">Com_ReadFromPipe()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#ad566b91577d62de81e579c0b2830dd17">FGetLittleLong()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a3299ea621dd6ca475817664c12ea3c26">FGetLittleShort()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a50a6dfd18abd85eb58f5778d8f4a9ce4">FS_Seek()</a>, <a class="el" href="../../d8/de1/client_8h.html#aa213f972c9f4474bf1dc8de2d63ed08e">LAN_LoadCachedServers()</a>, <a class="el" href="../../df/d64/cl__cin_8c.html#a71538e4aa1ed75e7aa37b0f834bc8877">RoQInterrupt()</a>, <a class="el" href="../../df/d64/cl__cin_8c.html#aaf93fb352b2cca41d16e101b79d3992c">RoQReset()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a57144bdac97f2fc68b9a7a66f62881ff">S_ReadChunkInfo()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a0f9f3c4c590b101625637dbd87b97f47">S_ReadRIFFHeader()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a8f0c5acee1988796f49090cc8b947714">S_WAV_CodecLoad()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#aebf5ba098979eb72edd9ff879f62ebcd">S_WAV_CodecReadStream()</a>, <a class="el" href="../../d5/d09/sv__bot_8c.html#ab297fdd094aac594bca6abeda876b949">SV_BotInitBotLib()</a>, <a class="el" href="../../d7/d3c/sv__game_8c.html#a73948936d23d65d3a27c6027767af7c8">SV_GameSystemCalls()</a>, <a class="el" href="../../d6/df0/sv__ccmds_8c.html#afedaa2cfe45e23191b2125fe8ff9a8cb">SV_RehashBans_f()</a>, and <a class="el" href="../../db/d01/sv__client_8c.html#a9e3957a357260512ec0724ce88c5c581">SV_WriteDownloadToClient()</a>.</p>

</div>
</div>
<a id="a671ffbf506ea8d57d193c072ade04343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a671ffbf506ea8d57d193c072ade04343">&#9670;&nbsp;</a></span>FS_ReadFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_ReadFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>qpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> **&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the file. </p>
<p>Filename are relative to the quake search path.</p>
<p>as a quick check for existence. -1 length == not present A 0 byte will always be appended at the end, so string ops are safe. the buffer should be considered read-only, because it may be cached for other uses.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">qpath</td><td></td></tr>
    <tr><td class="paramname">buffer</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of the file. A null buffer will just return the file length without loading. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01943">1943</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;{</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir</a>(qpath, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>);</div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a737fb4745a9b5322c41533d5c870dbbd">CL_InitRef()</a>, <a class="el" href="../../d4/d5c/cm__public_8h.html#a998bafe2f447bb7f7f727ca02e215cbc">CM_LoadMap()</a>, <a class="el" href="../../da/d32/cmd_8c.html#a8144707a5cc5b3b4e1f346efb97a26aa">Cmd_Exec_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, <a class="el" href="../../d6/df0/sv__ccmds_8c.html#a3164710aaf270b53451158f7aea1cae1">SV_Map_f()</a>, and <a class="el" href="../../de/de9/vm_8c.html#a9e5d63b20e7310ff2fdf44e57678fd9d">VM_LoadSymbols()</a>.</p>

</div>
</div>
<a id="a1c1815394d013a4db34e8f7910039ba0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1815394d013a4db34e8f7910039ba0">&#9670;&nbsp;</a></span>FS_ReadFileDir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_ReadFileDir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>qpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>searchPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>unpure</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> **&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read the file directory. </p>
<p>Filename are relative to the quake search path. If searchPath is non-NULL search only in that specific search path.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">qpath</td><td></td></tr>
    <tr><td class="paramname">searchPath</td><td></td></tr>
    <tr><td class="paramname">unpure</td><td></td></tr>
    <tr><td class="paramname">buffer</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of the file. A null buffer will just return the file length without loading. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01810">1810</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;{</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    h;</div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;    <span class="keywordtype">byte</span>* <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>;</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>        isConfig;</div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;    <span class="keywordtype">long</span>                len;</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160; </div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;    }</div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160; </div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;    <span class="keywordflow">if</span> (!qpath || !qpath[0]) {</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_ReadFile with empty name&quot;</span>);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;    }</div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160; </div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;    <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;    <span class="comment">// quiet compiler warning</span></div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160; </div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;    <span class="comment">// if this is a .cfg file and we are playing back a journal, read</span></div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;    <span class="comment">// it from the journal file</span></div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;    <span class="keywordflow">if</span> (strstr(qpath, <span class="stringliteral">&quot;.cfg&quot;</span>)) {</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        isConfig = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a> &amp;&amp; <a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> == 2) {</div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            <span class="keywordtype">int</span>        r;</div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160; </div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a>(<span class="stringliteral">&quot;Loading %s from journal file.\n&quot;</span>, qpath);</div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;            r = <a class="code" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a>(&amp;len, <span class="keyword">sizeof</span>(len), <a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;            <span class="keywordflow">if</span> (r != <span class="keyword">sizeof</span>(len)) {</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> != <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) *<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            }</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;            <span class="comment">// if the file didn&#39;t exist when the journal was created</span></div>
<div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;            <span class="keywordflow">if</span> (!len) {</div>
<div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;                    <span class="keywordflow">return</span> 1;            <span class="comment">// hack for old journal files</span></div>
<div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;                }</div>
<div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;                *<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;            }</div>
<div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;                <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;            }</div>
<div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160; </div>
<div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a> = <a class="code" href="../../d8/d19/common_8c.html#a29b5324017dad948331c674fa15e43a7">Hunk_AllocateTempMemory</a>(len + 1);</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            *<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> = <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>;</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160; </div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            r = <a class="code" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>, len, <a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            <span class="keywordflow">if</span> (r != len) {</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Read from journalDataFile failed&quot;</span>);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;            }</div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160; </div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a2cbd9bc46024eeafe267d1e3a4dfad06">fs_loadCount</a>++;</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a>++;</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160; </div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            <span class="comment">// guarantee that it will have a trailing 0 for string operations</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>[len] = 0;</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160; </div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;            <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        }</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        isConfig = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;    }</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;    search = searchPath;</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160; </div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;    <span class="keywordflow">if</span> (search == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="comment">// look for it in the filesystem or pack files</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;        len = <a class="code" href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead</a>(qpath, &amp;h, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;        <span class="comment">// look for it in a specific search path only</span></div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;        len = <a class="code" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir</a>(qpath, search, &amp;h, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, unpure);</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;    }</div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160; </div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;    <span class="keywordflow">if</span> (h == 0) {</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>) {</div>
<div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;            *<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;        }</div>
<div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;        <span class="comment">// if we are journalling and it is a config file, write a zero to the journal file</span></div>
<div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;        <span class="keywordflow">if</span> (isConfig &amp;&amp; <a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a> &amp;&amp; <a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> == 1) {</div>
<div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a>(<span class="stringliteral">&quot;Writing zero for %s to journal file.\n&quot;</span>, qpath);</div>
<div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;            len = 0;</div>
<div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a>(&amp;len, <span class="keyword">sizeof</span>(len), <a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ab8090de10f7d898f9365e63c2bc97291">FS_Flush</a>(<a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;        }</div>
<div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;    }</div>
<div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160; </div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>) {</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        <span class="keywordflow">if</span> (isConfig &amp;&amp; <a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a> &amp;&amp; <a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> == 1) {</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a>(<span class="stringliteral">&quot;Writing len for %s to journal file.\n&quot;</span>, qpath);</div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a>(&amp;len, <span class="keyword">sizeof</span>(len), <a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ab8090de10f7d898f9365e63c2bc97291">FS_Flush</a>(<a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;        }</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(h);</div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;        <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;    }</div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160; </div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a2cbd9bc46024eeafe267d1e3a4dfad06">fs_loadCount</a>++;</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a>++;</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;    <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a> = <a class="code" href="../../d8/d19/common_8c.html#a29b5324017dad948331c674fa15e43a7">Hunk_AllocateTempMemory</a>(len + 1);</div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;    *<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a> = <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>;</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160; </div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>, len, h);</div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160; </div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;    <span class="comment">// guarantee that it will have a trailing 0 for string operations</span></div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;    <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>[len] = 0;</div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(h);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160; </div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;    <span class="comment">// if we are journalling and it is a config file, write it to the journal file</span></div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;    <span class="keywordflow">if</span> (isConfig &amp;&amp; <a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a> &amp;&amp; <a class="code" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a> == 1) {</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;        <a class="code" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a>(<span class="stringliteral">&quot;Writing %s to journal file.\n&quot;</span>, qpath);</div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a>(&amp;len, <span class="keyword">sizeof</span>(len), <a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>, len, <a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ab8090de10f7d898f9365e63c2bc97291">FS_Flush</a>(<a class="code" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>);</div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;    }</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;    <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a>, <a class="el" href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab8090de10f7d898f9365e63c2bc97291">FS_Flush()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2cbd9bc46024eeafe267d1e3a4dfad06">fs_loadCount</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a>, <a class="el" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write()</a>, <a class="el" href="../../d8/d19/common_8c.html#a29b5324017dad948331c674fa15e43a7">Hunk_AllocateTempMemory()</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a671ffbf506ea8d57d193c072ade04343">FS_ReadFile()</a>, and <a class="el" href="../../de/de9/vm_8c.html#a7be32af178d4fadbcf2584d1f1fb8f34">VM_LoadQVM()</a>.</p>

</div>
</div>
<a id="a7830bbd93c06152b49bef6e49ec2cac4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7830bbd93c06152b49bef6e49ec2cac4">&#9670;&nbsp;</a></span>FS_ReferencedPakChecksums()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* FS_ReferencedPakChecksums </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a space separated string containing the checksums of all referenced pk3 files. </p>
<p>The server will send this to the clients so they can check which files should be auto-downloaded.</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03694">3694</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;{</div>
<div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span>    info[<a class="code" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>];</div>
<div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160; </div>
<div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;    info[0] = 0;</div>
<div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160; </div>
<div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160; </div>
<div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;        <span class="comment">// is the element a pak file?</span></div>
<div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;            <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> || <a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>, <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, strlen(<a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>))) {</div>
<div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%i &quot;</span>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">checksum</a>));</div>
<div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;            }</div>
<div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;        }</div>
<div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;    }</div>
<div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160; </div>
<div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;    <span class="keywordflow">return</span> info;</div>
<div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>, <a class="el" href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">pack_t::checksum</a>, <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pack_t::pakGamename</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn()</a>, <a class="el" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">pack_t::referenced</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d49/sv__init_8c.html#ac2c5754f02da3857796506ea5271ccee">SV_SpawnServer()</a>.</p>

</div>
</div>
<a id="a3383b0380111f9f9645c961011849ea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3383b0380111f9f9645c961011849ea7">&#9670;&nbsp;</a></span>FS_ReferencedPakNames()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* FS_ReferencedPakNames </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a space separated string containing the names of all referenced pk3 files. </p>
<p>The server will send this to the clients so they can check which files should be auto-downloaded.</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03769">3769</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;{</div>
<div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span>    info[<a class="code" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>];</div>
<div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160; </div>
<div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;    info[0] = 0;</div>
<div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160; </div>
<div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;    <span class="comment">// we want to return ALL pk3&#39;s from the fs_game path</span></div>
<div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;    <span class="comment">// and referenced one&#39;s from baseq3</span></div>
<div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;        <span class="comment">// is the element a pak file?</span></div>
<div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;            <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> || <a class="code" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a>(search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>, <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, strlen(<a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>))) {</div>
<div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;                <span class="keywordflow">if</span> (*info) {</div>
<div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;                    <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;                }</div>
<div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pakGamename</a>);</div>
<div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <span class="stringliteral">&quot;/&quot;</span>);</div>
<div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a6b6912c1d86e57717e1f52174825c0d6">pakBasename</a>);</div>
<div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;            }</div>
<div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;        }</div>
<div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;    }</div>
<div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160; </div>
<div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;    <span class="keywordflow">return</span> info;</div>
<div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>, <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#a6b6912c1d86e57717e1f52174825c0d6">pack_t::pakBasename</a>, <a class="el" href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pack_t::pakGamename</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn()</a>, <a class="el" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">pack_t::referenced</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#a1992a46e56106e831fed25cf445ba598">CL_ReferencedPK3List_f()</a>, <a class="el" href="../../d5/d49/sv__init_8c.html#ac2c5754f02da3857796506ea5271ccee">SV_SpawnServer()</a>, and <a class="el" href="../../db/d01/sv__client_8c.html#a9e3957a357260512ec0724ce88c5c581">SV_WriteDownloadToClient()</a>.</p>

</div>
</div>
<a id="a1cd8d5cc010597eca54a3af1b12141f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cd8d5cc010597eca54a3af1b12141f3">&#9670;&nbsp;</a></span>FS_ReferencedPakPureChecksums()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* FS_ReferencedPakPureChecksums </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a space separated string containing the checksums of all loaded AND referenced pk3 files. </p>
<p>Servers with sv_pure set will get this string back from clients for pure validation.</p>
<p>Returns a space separated string containing the pure checksums of all referenced pk3 files. Servers with sv_pure set will get this string back from clients for pure validation. The string has a specific order, "cgame ui @ ref1 ref2 ref3 ...".</p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03724">3724</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;{</div>
<div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;    <span class="keyword">static</span> <span class="keywordtype">char</span>    info[<a class="code" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>];</div>
<div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;    <span class="keywordtype">int</span> nFlags, numPaks, checksum;</div>
<div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160; </div>
<div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;    info[0] = 0;</div>
<div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160; </div>
<div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;    checksum = <a class="code" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>;</div>
<div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;    numPaks = 0;</div>
<div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;    <span class="keywordflow">for</span> (nFlags = <a class="code" href="../../d1/df7/qcommon_8h.html#ac25952608c50e3c39548267ee82ff8f2">FS_CGAME_REF</a>; nFlags; nFlags = nFlags &gt;&gt; 1) {</div>
<div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;        <span class="keywordflow">if</span> (nFlags &amp; <a class="code" href="../../d1/df7/qcommon_8h.html#ab8b6a83a99eb8a03f77b3ec7f827835c">FS_GENERAL_REF</a>) {</div>
<div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;            <span class="comment">// add a delimter between must haves and general refs</span></div>
<div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;            <span class="comment">//Q_strcat(info, sizeof(info), &quot;@ &quot;);</span></div>
<div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;            info[strlen(info) + 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;            info[strlen(info) + 2] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;            info[strlen(info)] = <span class="charliteral">&#39;@&#39;</span>;</div>
<div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;            info[strlen(info)] = <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;        }</div>
<div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;        <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;            <span class="comment">// is the element a pak file and has it been referenced based on flag?</span></div>
<div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;            <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a> &amp;&amp; (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">referenced</a> &amp; nFlags)) {</div>
<div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;                <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%i &quot;</span>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pure_checksum</a>));</div>
<div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;                <span class="keywordflow">if</span> (nFlags &amp; (<a class="code" href="../../d1/df7/qcommon_8h.html#ac25952608c50e3c39548267ee82ff8f2">FS_CGAME_REF</a> | <a class="code" href="../../d1/df7/qcommon_8h.html#a4c31ebc9163957944f0c21c72f83bf95">FS_UI_REF</a>)) {</div>
<div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;                }</div>
<div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;                checksum ^= search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pure_checksum</a>;</div>
<div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;                numPaks++;</div>
<div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;            }</div>
<div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;        }</div>
<div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;    }</div>
<div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;    <span class="comment">// last checksum is the encoded number of referenced pk3s</span></div>
<div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;    checksum ^= numPaks;</div>
<div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a>(info, <span class="keyword">sizeof</span>(info), <a class="code" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a>(<span class="stringliteral">&quot;%i &quot;</span>, checksum));</div>
<div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160; </div>
<div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;    <span class="keywordflow">return</span> info;</div>
<div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac25952608c50e3c39548267ee82ff8f2">FS_CGAME_REF</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ab8b6a83a99eb8a03f77b3ec7f827835c">FS_GENERAL_REF</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a4c31ebc9163957944f0c21c72f83bf95">FS_UI_REF</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pack_t::pure_checksum</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat()</a>, <a class="el" href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">pack_t::referenced</a>, and <a class="el" href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#ab40ac243821ac950f48a64f5da2aa319">CL_SendPureChecksums()</a>.</p>

</div>
</div>
<a id="ae6c5a67161e29cb78b2261240dc4da9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6c5a67161e29cb78b2261240dc4da9f">&#9670;&nbsp;</a></span>FS_Remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Remove </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>osPath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">osPath</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00609">609</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;{</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(osPath, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160; </div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    remove(osPath);</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, and <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>.</p>

</div>
</div>
<a id="a264d0d65ff0b17851b2861f8a5311042"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a264d0d65ff0b17851b2861f8a5311042">&#9670;&nbsp;</a></span>FS_Rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Rename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td></td></tr>
    <tr><td class="paramname">to</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00848">848</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;{</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="keywordtype">char</span>* from_ospath, * to_ospath;</div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160; </div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;    }</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;    <span class="comment">// don&#39;t let sound stutter</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;    <a class="code" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer</a>();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;    from_ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, from);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    to_ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, to);</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160; </div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_Rename: %s --&gt; %s\n&quot;</span>, from_ospath, to_ospath);</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;    }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160; </div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(to_ospath, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160; </div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;    rename(from_ospath, to_ospath);</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer()</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

</div>
</div>
<a id="a0d875191082cf26460654f6fb6d6e662"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d875191082cf26460654f6fb6d6e662">&#9670;&nbsp;</a></span>FS_ReorderPurePaks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_ReorderPurePaks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>FS_ReorderPurePaks. </p>
<p>NOTE: TTimo: the reordering that happens here is not reflected in the cvars (\cvarlist <em>pak</em>). This can lead to misleading situations, see <a href="https://zerowing.idsoftware.com/bugzilla/show_bug.cgi?id=540">https://zerowing.idsoftware.com/bugzilla/show_bug.cgi?id=540</a> </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03269">3269</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;{</div>
<div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>;</div>
<div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>** p_insert_index, <span class="comment">// for linked list reordering</span></div>
<div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;        ** p_previous; <span class="comment">// when doing the scan</span></div>
<div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160; </div>
<div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160; </div>
<div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;    <span class="comment">// only relevant when connected to pure server</span></div>
<div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>)</div>
<div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160; </div>
<div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;    p_insert_index = &amp;<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; <span class="comment">// we insert in order at the beginning of the list</span></div>
<div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>; i++) {</div>
<div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;        p_previous = p_insert_index; <span class="comment">// track the pointer-to-current-item</span></div>
<div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> = *p_insert_index; <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>; <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> = <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;next) {</div>
<div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;            <span class="comment">// the part of the list before p_insert_index has been sorted already</span></div>
<div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;pack &amp;&amp; <a class="code" href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a>[i] == <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;pack-&gt;checksum) {</div>
<div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;                <a class="code" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;                <span class="comment">// move this element to the insert list</span></div>
<div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;                *p_previous = <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;next;</div>
<div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;                <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;next = *p_insert_index;</div>
<div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;                *p_insert_index = <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>;</div>
<div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;                <span class="comment">// increment insert list</span></div>
<div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;                p_insert_index = &amp;<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;next;</div>
<div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;                <span class="keywordflow">break</span>; <span class="comment">// iterate to next server pack</span></div>
<div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;            }</div>
<div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;            p_previous = &amp;<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>-&gt;next;</div>
<div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;        }</div>
<div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;    }</div>
<div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a97842b2a865eb7cfbcc222ae71c35063"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97842b2a865eb7cfbcc222ae71c35063">&#9670;&nbsp;</a></span>FS_ReplaceSeparators()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_ReplaceSeparators </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fix things up differently for win/unix/mac. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00499">499</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;{</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> lastCharWasSep = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160; </div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordflow">for</span> (<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> = path; *<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>; <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>++) {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;        <span class="keywordflow">if</span> (*<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> == <span class="charliteral">&#39;/&#39;</span> || *<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> == <span class="charliteral">&#39;\\&#39;</span>) {</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <span class="keywordflow">if</span> (!lastCharWasSep) {</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                *<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> = <a class="code" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                lastCharWasSep = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                memmove(<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>, <a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a> + 1, strlen(<a class="code" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>));</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            }</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            lastCharWasSep = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;        }</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    }</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, and <a class="el" href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath()</a>.</p>

</div>
</div>
<a id="a7859424617923fdf80df33e240fdb893"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7859424617923fdf80df33e240fdb893">&#9670;&nbsp;</a></span>FS_Restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Restart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>checksumFeed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Shutdown and restart the filesystem so changes to fs_gamedir can take effect. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">checksumFeed</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03969">3969</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;{</div>
<div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* lastGameDir;</div>
<div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160; </div>
<div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;    <span class="comment">// free anything we currently have loaded</span></div>
<div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown</a>(<a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160; </div>
<div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;    <span class="comment">// set the checksum feed</span></div>
<div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a> = checksumFeed;</div>
<div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160; </div>
<div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;    <span class="comment">// clear pak references</span></div>
<div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ac081b293868efda8f11bde4a39a0792e">FS_ClearPakReferences</a>(0);</div>
<div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160; </div>
<div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;    <span class="comment">// try to start up normally</span></div>
<div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup</a>(<a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160; </div>
<div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;<span class="preprocessor">#ifndef STANDALONE</span></div>
<div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0</a>();</div>
<div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160; </div>
<div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;    <span class="comment">// if we can&#39;t find default.cfg, assume that the paths are</span></div>
<div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;    <span class="comment">// busted and error out now, rather than getting an unreadable</span></div>
<div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;    <span class="comment">// graphics screen when the font fails to load</span></div>
<div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a671ffbf506ea8d57d193c072ade04343">FS_ReadFile</a>(<span class="stringliteral">&quot;default.cfg&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &lt;= 0) {</div>
<div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;        <span class="comment">// this might happen when connecting to a pure server not using BASEGAME/pak0.pk3</span></div>
<div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;        <span class="comment">// (for instance a TA demo server)</span></div>
<div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>[0]) {</div>
<div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks</a>(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;            <a class="code" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a>(<span class="stringliteral">&quot;fs_basepath&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>);</div>
<div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;            <a class="code" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a>(<span class="stringliteral">&quot;com_basegame&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>);</div>
<div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;            <a class="code" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a>(<span class="stringliteral">&quot;fs_basegame&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>);</div>
<div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;            <a class="code" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a>(<span class="stringliteral">&quot;fs_game&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>);</div>
<div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart</a>(checksumFeed);</div>
<div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;Invalid game folder&quot;</span>);</div>
<div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;        }</div>
<div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Couldn&#39;t load default.cfg&quot;</span>);</div>
<div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;    }</div>
<div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160; </div>
<div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;    lastGameDir = (<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>[0]) ? <a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a> : <a class="code" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>;</div>
<div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160; </div>
<div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d8c/files_8c.html#a2fb9e1b8c14757cfe172a3ebf022bcd6">FS_GetCurrentGameDir</a>(), lastGameDir)) {</div>
<div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;        <a class="code" href="../../d1/df7/qcommon_8h.html#a8fc8943955da7142902847ba9c1a38cd">Sys_RemovePIDFile</a>(lastGameDir);</div>
<div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;        <a class="code" href="../../d1/df7/qcommon_8h.html#a375eeb5d9e57783a5a6d602d8647dd1b">Sys_InitPIDFile</a>(<a class="code" href="../../d8/d8c/files_8c.html#a2fb9e1b8c14757cfe172a3ebf022bcd6">FS_GetCurrentGameDir</a>());</div>
<div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160; </div>
<div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;        <span class="comment">// skip the q3config.cfg if &quot;safe&quot; is on the command line</span></div>
<div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d19/common_8c.html#a30e51dc31a5b9d27f44e42d8dea6ff8a">Com_SafeMode</a>()) {</div>
<div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;            <a class="code" href="../../da/d32/cmd_8c.html#a64f2928056fbc22633bf72cadc92e16a">Cbuf_AddText</a>(<span class="stringliteral">&quot;exec &quot;</span> <a class="code" href="../../d1/df7/qcommon_8h.html#aae6e0b2caf30a7978021b344ca90148d">Q3CONFIG_CFG</a> <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;        }</div>
<div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;    }</div>
<div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160; </div>
<div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>, <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>));</div>
<div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>, <a class="code" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>));</div>
<div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>, <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>));</div>
<div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>));</div>
<div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160; </div>
<div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d32/cmd_8c.html#a64f2928056fbc22633bf72cadc92e16a">Cbuf_AddText()</a>, <a class="el" href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d8/d19/common_8c.html#a30e51dc31a5b9d27f44e42d8dea6ff8a">Com_SafeMode()</a>, <a class="el" href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac081b293868efda8f11bde4a39a0792e">FS_ClearPakReferences()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2fb9e1b8c14757cfe172a3ebf022bcd6">FS_GetCurrentGameDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a671ffbf506ea8d57d193c072ade04343">FS_ReadFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a>, <a class="el" href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aae6e0b2caf30a7978021b344ca90148d">Q3CONFIG_CFG</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a375eeb5d9e57783a5a6d602d8647dd1b">Sys_InitPIDFile()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a8fc8943955da7142902847ba9c1a38cd">Sys_RemovePIDFile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#ababe3061a34260e85a5d0270b2a041ea">CL_DownloadsComplete()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a5a0fb0e6f63c56cbf766ea79f1f9a662">Com_GameRestart()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, and <a class="el" href="../../d5/d49/sv__init_8c.html#ac2c5754f02da3857796506ea5271ccee">SV_SpawnServer()</a>.</p>

</div>
</div>
<a id="a60b9d8c773b74225a800532bbb0a3779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60b9d8c773b74225a800532bbb0a3779">&#9670;&nbsp;</a></span>FS_ReturnPath()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_ReturnPath </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>zname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>zpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> *&#160;</td>
          <td class="paramname"><em>depth</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">zname</td><td></td></tr>
    <tr><td class="paramname">zpath</td><td></td></tr>
    <tr><td class="paramname">depth</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02172">2172</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;{</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;    <span class="keywordtype">int</span> len, at, newdep;</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160; </div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;    newdep = 0;</div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;    zpath[0] = 0;</div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;    len = 0;</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;    at = 0;</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160; </div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;    <span class="keywordflow">while</span> (zname[at] != 0) {</div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;        <span class="keywordflow">if</span> (zname[at] == <span class="charliteral">&#39;/&#39;</span> || zname[at] == <span class="charliteral">&#39;\\&#39;</span>) {</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;            len = at;</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;            newdep++;</div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;        }</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;        at++;</div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;    }</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;    strcpy(zpath, zname);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;    zpath[len] = 0;</div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;    *depth = newdep;</div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160; </div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;    <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>.</p>

</div>
</div>
<a id="a50a6dfd18abd85eb58f5778d8f4a9ce4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50a6dfd18abd85eb58f5778d8f4a9ce4">&#9670;&nbsp;</a></span>FS_Seek()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_Seek </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>origin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>seek on a file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">f</td><td></td></tr>
    <tr><td class="paramname">offset</td><td></td></tr>
    <tr><td class="paramname">origin</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01632">1632</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;{</div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;    <span class="keywordtype">int</span>        _origin;</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;    }</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160; </div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].zipFile == <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>) {</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;        <span class="comment">//FIXME: this is really, really crappy</span></div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;        <span class="comment">//(but better than what was here before)</span></div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;        <span class="keywordtype">byte</span>    <a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>[<a class="code" href="../../d8/d8c/files_8c.html#a3fbd31416bb8711f264a06d133a9273d">PK3_SEEK_BUFFER_SIZE</a>];</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        <span class="keywordtype">int</span>        remainder;</div>
<div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;        <span class="keywordtype">int</span>        currentPosition = <a class="code" href="../../d8/d8c/files_8c.html#a5dcb6aeb63861669677dec37c033f807">FS_FTell</a>(f);</div>
<div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160; </div>
<div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;        <span class="comment">// change negative offsets into FS_SEEK_SET</span></div>
<div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a> &lt; 0) {</div>
<div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;            <span class="keywordflow">switch</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a6ad5e17860121e666df109329b95c83e">origin</a>) {</div>
<div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cba36dd416e193650f2c191423d3e3dad6d">FS_SEEK_END</a>:</div>
<div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;                remainder = <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ab74c94ba839c4c7aa9df8207bf02d43a">zipFileLen</a> + <a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>;</div>
<div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160; </div>
<div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbab7f080d71bee180296706c77d2cf3383">FS_SEEK_CUR</a>:</div>
<div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;                remainder = currentPosition + <a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>;</div>
<div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160; </div>
<div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;            <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbaf39a070ab167a90b3c87ab6b058469cd">FS_SEEK_SET</a>:</div>
<div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;            <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;                remainder = 0;</div>
<div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;            }</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160; </div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;            <span class="keywordflow">if</span> (remainder &lt; 0) {</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;                remainder = 0;</div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            }</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            <a class="code" href="../../d2/db7/ioapi_8h.html#a6ad5e17860121e666df109329b95c83e">origin</a> = <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbaf39a070ab167a90b3c87ab6b058469cd">FS_SEEK_SET</a>;</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a6ad5e17860121e666df109329b95c83e">origin</a> == <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cba36dd416e193650f2c191423d3e3dad6d">FS_SEEK_END</a>) {</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;                remainder = <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ab74c94ba839c4c7aa9df8207bf02d43a">zipFileLen</a> - currentPosition + <a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>;</div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;                remainder = <a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>;</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            }</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;        }</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160; </div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a6ad5e17860121e666df109329b95c83e">origin</a>) {</div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbaf39a070ab167a90b3c87ab6b058469cd">FS_SEEK_SET</a>:</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            <span class="keywordflow">if</span> (remainder == currentPosition) {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>;</div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;            }</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#a12c4062aa3dae4cddf7527c3caf8c519">unzSetOffset</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.z, <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a4a2d47b4ac20b0856125be4bc229017a">zipFilePos</a>);</div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            <a class="code" href="../../d6/da7/unzip_8c.html#a65deebb4ecb3ba110c343c21a4cd9a75">unzOpenCurrentFile</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.z);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            <span class="comment">//fallthrough</span></div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cba36dd416e193650f2c191423d3e3dad6d">FS_SEEK_END</a>:</div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbab7f080d71bee180296706c77d2cf3383">FS_SEEK_CUR</a>:</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;            <span class="keywordflow">while</span> (remainder &gt; <a class="code" href="../../d8/d8c/files_8c.html#a3fbd31416bb8711f264a06d133a9273d">PK3_SEEK_BUFFER_SIZE</a>) {</div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                <a class="code" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="code" href="../../d8/d8c/files_8c.html#a3fbd31416bb8711f264a06d133a9273d">PK3_SEEK_BUFFER_SIZE</a>, f);</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                remainder -= <a class="code" href="../../d8/d8c/files_8c.html#a3fbd31416bb8711f264a06d133a9273d">PK3_SEEK_BUFFER_SIZE</a>;</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            }</div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, remainder, f);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>;</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160; </div>
<div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Bad origin in FS_Seek&quot;</span>);</div>
<div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;            <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;        }</div>
<div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;        FILE* file;</div>
<div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;        file = <a class="code" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle</a>(f);</div>
<div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;        <span class="keywordflow">switch</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a6ad5e17860121e666df109329b95c83e">origin</a>) {</div>
<div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbab7f080d71bee180296706c77d2cf3383">FS_SEEK_CUR</a>:</div>
<div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;            _origin = <a class="code" href="../../d5/d84/ioapi_8c.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>;</div>
<div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cba36dd416e193650f2c191423d3e3dad6d">FS_SEEK_END</a>:</div>
<div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;            _origin = <a class="code" href="../../d5/d84/ioapi_8c.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>;</div>
<div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;        <span class="keywordflow">case</span> <a class="code" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbaf39a070ab167a90b3c87ab6b058469cd">FS_SEEK_SET</a>:</div>
<div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;            _origin = <a class="code" href="../../d5/d84/ioapi_8c.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>;</div>
<div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;        <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Bad origin in FS_Seek&quot;</span>);</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;        }</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160; </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;        <span class="keywordflow">return</span> fseek(file, <a class="code" href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a>, _origin);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;    }</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a5dcb6aeb63861669677dec37c033f807">FS_FTell()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbab7f080d71bee180296706c77d2cf3383">FS_SEEK_CUR</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cba36dd416e193650f2c191423d3e3dad6d">FS_SEEK_END</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbaf39a070ab167a90b3c87ab6b058469cd">FS_SEEK_SET</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3fbd31416bb8711f264a06d133a9273d">PK3_SEEK_BUFFER_SIZE</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>, <a class="el" href="../../d5/d84/ioapi_8c.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a>, <a class="el" href="../../d5/d84/ioapi_8c.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a>, <a class="el" href="../../d5/d84/ioapi_8c.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a65deebb4ecb3ba110c343c21a4cd9a75">unzOpenCurrentFile()</a>, <a class="el" href="../../d6/da7/unzip_8c.html#a12c4062aa3dae4cddf7527c3caf8c519">unzSetOffset()</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ab74c94ba839c4c7aa9df8207bf02d43a">fileHandleData_t::zipFileLen</a>, and <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a4a2d47b4ac20b0856125be4bc229017a">fileHandleData_t::zipFilePos</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/dde/cl__cgame_8c.html#a71ede2bb98f1ae6f01efc81cd25f4a3c">CL_CgameSystemCalls()</a>, <a class="el" href="../../d8/de1/client_8h.html#a7d10cc40f267012964f0144ed90c0768">CL_CloseAVI()</a>, <a class="el" href="../../d9/dd6/cl__ui_8c.html#a816b2b94718d7146f200ba4a378c6834">CL_UISystemCalls()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a0c4a41da9b17fad6863f3442e505c9dc">S_FindRIFFChunk()</a>, <a class="el" href="../../d1/d5e/snd__codec__wav_8c.html#a0f9f3c4c590b101625637dbd87b97f47">S_ReadRIFFHeader()</a>, <a class="el" href="../../d5/d09/sv__bot_8c.html#ab297fdd094aac594bca6abeda876b949">SV_BotInitBotLib()</a>, and <a class="el" href="../../d7/d3c/sv__game_8c.html#a73948936d23d65d3a27c6027767af7c8">SV_GameSystemCalls()</a>.</p>

</div>
</div>
<a id="ab467f65f1b3661215ecb4ec7784d816e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab467f65f1b3661215ecb4ec7784d816e">&#9670;&nbsp;</a></span>FS_Shutdown()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Shutdown </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>closemfp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees all resources. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">closemfp</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03219">3219</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;{</div>
<div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* p, * next;</div>
<div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;    <span class="keywordtype">int</span>    i;</div>
<div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160; </div>
<div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>; i++) {</div>
<div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[i].fileSize) {</div>
<div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(i);</div>
<div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;        }</div>
<div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;    }</div>
<div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160; </div>
<div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;    <span class="comment">// free everything</span></div>
<div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;    <span class="keywordflow">for</span> (p = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; p; p = next) {</div>
<div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;        next = p-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>;</div>
<div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160; </div>
<div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>)</div>
<div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#aa1cd6e2d2ec0cfb811788155f7c52689">FS_FreePak</a>(p-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>);</div>
<div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;        <span class="keywordflow">if</span> (p-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>)</div>
<div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;            <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(p-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>);</div>
<div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160; </div>
<div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;        <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(p);</div>
<div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;    }</div>
<div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160; </div>
<div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;    <span class="comment">// any FS_ calls will now be an error until reinitialized</span></div>
<div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160; </div>
<div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a93726aad83fc281293e890274ae75dde">Cmd_RemoveCommand</a>(<span class="stringliteral">&quot;path&quot;</span>);</div>
<div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a93726aad83fc281293e890274ae75dde">Cmd_RemoveCommand</a>(<span class="stringliteral">&quot;dir&quot;</span>);</div>
<div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a93726aad83fc281293e890274ae75dde">Cmd_RemoveCommand</a>(<span class="stringliteral">&quot;fdir&quot;</span>);</div>
<div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a93726aad83fc281293e890274ae75dde">Cmd_RemoveCommand</a>(<span class="stringliteral">&quot;touchFile&quot;</span>);</div>
<div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a93726aad83fc281293e890274ae75dde">Cmd_RemoveCommand</a>(<span class="stringliteral">&quot;which&quot;</span>);</div>
<div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160; </div>
<div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;<span class="preprocessor">#ifdef FS_MISSING</span></div>
<div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;    <span class="keywordflow">if</span> (closemfp) {</div>
<div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;        fclose(missingFiles);</div>
<div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;    }</div>
<div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d32/cmd_8c.html#a93726aad83fc281293e890274ae75dde">Cmd_RemoveCommand()</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">searchpath_s::dir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aa1cd6e2d2ec0cfb811788155f7c52689">FS_FreePak()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, and <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a70647a7c2e9c6791fc29673747b999fb">Com_Quit_f()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="a4b00bf6d8a82595ed18b1d40f7a00fa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b00bf6d8a82595ed18b1d40f7a00fa9">&#9670;&nbsp;</a></span>FS_SortFileList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_SortFileList </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>filelist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>numfiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filelist</td><td></td></tr>
    <tr><td class="paramname">numfiles</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02727">2727</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;{</div>
<div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;    <span class="keywordtype">int</span> i, j, k, numsortedfiles;</div>
<div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;    <span class="keywordtype">char</span>** sortedlist;</div>
<div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160; </div>
<div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;    sortedlist = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>((numfiles + 1) * <span class="keyword">sizeof</span>(*sortedlist));</div>
<div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;    sortedlist[0] = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;    numsortedfiles = 0;</div>
<div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;    <span class="keywordflow">for</span> (i = 0; i &lt; numfiles; i++) {</div>
<div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;        <span class="keywordflow">for</span> (j = 0; j &lt; numsortedfiles; j++) {</div>
<div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#af2a6bd66a22d9da08effd972d87e9f5b">FS_PathCmp</a>(filelist[i], sortedlist[j]) &lt; 0) {</div>
<div class="line"><a name="l02738"></a><span class="lineno"> 2738</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;            }</div>
<div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;        }</div>
<div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;        <span class="keywordflow">for</span> (k = numsortedfiles; k &gt; j; k--) {</div>
<div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;            sortedlist[k] = sortedlist[k - 1];</div>
<div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;        }</div>
<div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;        sortedlist[j] = filelist[i];</div>
<div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;        numsortedfiles++;</div>
<div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;    }</div>
<div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a0701630965c52ce0cc99eda50fbb8235">Com_Memcpy</a>(filelist, sortedlist, numfiles * <span class="keyword">sizeof</span>(*filelist));</div>
<div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(sortedlist);</div>
<div class="line"><a name="l02749"></a><span class="lineno"> 2749</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a0701630965c52ce0cc99eda50fbb8235">Com_Memcpy</a>, <a class="el" href="../../d8/d8c/files_8c.html#af2a6bd66a22d9da08effd972d87e9f5b">FS_PathCmp()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a5577445f5311114a0d765a7077f5744e">FS_FilenameCompletion()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f()</a>.</p>

</div>
</div>
<a id="a14d05f54011f03ca6fb928a1931f35eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d05f54011f03ca6fb928a1931f35eb">&#9670;&nbsp;</a></span>FS_Startup()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Startup </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>gameName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gameName</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l03306">3306</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;{</div>
<div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* <a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>;</div>
<div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160; </div>
<div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;----- FS_Startup -----\n&quot;</span>);</div>
<div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160; </div>
<div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">fs_packFiles</a> = 0;</div>
<div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160; </div>
<div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_debug&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, 0);</div>
<div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_basepath&quot;</span>, <a class="code" href="../../d1/df7/qcommon_8h.html#a34f6a8f28b94b0c0263dea3dea07cb01">Sys_DefaultInstallPath</a>(), <a class="code" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a> | <a class="code" href="../../de/d01/q__shared_8h.html#a71a1b73d68bfe1ebb079417c587c5df9">CVAR_PROTECTED</a>);</div>
<div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_basegame&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a>);</div>
<div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;    <a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#a6fc918049f77c94085ee49d663f66ee4">Sys_DefaultHomePath</a>();</div>
<div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a> || !<a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>[0]) {</div>
<div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;        <a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a> = <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>;</div>
<div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;    }</div>
<div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_homepath&quot;</span>, <a class="code" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a> | <a class="code" href="../../de/d01/q__shared_8h.html#a71a1b73d68bfe1ebb079417c587c5df9">CVAR_PROTECTED</a>);</div>
<div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_game&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a> | <a class="code" href="../../de/d01/q__shared_8h.html#a27611779736399fa9840bfcc3b50b6cc">CVAR_SYSTEMINFO</a>);</div>
<div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160; </div>
<div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;    <span class="keywordflow">if</span> (!gameName[0]) {</div>
<div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;        <a class="code" href="../../d7/de8/cvar_8c.html#a9d7b23b195518b2a196a3cc013f4d11a">Cvar_ForceReset</a>(<span class="stringliteral">&quot;com_basegame&quot;</span>);</div>
<div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;    }</div>
<div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160; </div>
<div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a>(<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, gameName)) {</div>
<div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;        <span class="comment">// This is the standard base game. Servers and clients should</span></div>
<div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;        <span class="comment">// use &quot;&quot; and not the standard basegame name because this messes</span></div>
<div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;        <span class="comment">// up pak file negotiation and lots of other stuff</span></div>
<div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;        <a class="code" href="../../d7/de8/cvar_8c.html#a9d7b23b195518b2a196a3cc013f4d11a">Cvar_ForceReset</a>(<span class="stringliteral">&quot;fs_game&quot;</span>);</div>
<div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;    }</div>
<div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160; </div>
<div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a900505aca395309f53085ae0ce5663f7">FS_InvalidGameDir</a>(gameName)) {</div>
<div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;Invalid com_basegame &#39;%s&#39;&quot;</span>, gameName);</div>
<div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;    }</div>
<div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a900505aca395309f53085ae0ce5663f7">FS_InvalidGameDir</a>(<a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>)) {</div>
<div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;Invalid fs_basegame &#39;%s&#39;&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;    }</div>
<div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a900505aca395309f53085ae0ce5663f7">FS_InvalidGameDir</a>(<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>)) {</div>
<div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <span class="stringliteral">&quot;Invalid fs_game &#39;%s&#39;&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;    }</div>
<div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160; </div>
<div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;    <span class="comment">// add search path elements in reverse priority order</span></div>
<div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_gogpath&quot;</span>, <a class="code" href="../../d1/df7/qcommon_8h.html#a8c8cdd6a45dee8393d7c0c65d6df8b83">Sys_GogPath</a>(), <a class="code" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a> | <a class="code" href="../../de/d01/q__shared_8h.html#a71a1b73d68bfe1ebb079417c587c5df9">CVAR_PROTECTED</a>);</div>
<div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, gameName);</div>
<div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;    }</div>
<div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a> = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_steampath&quot;</span>, <a class="code" href="../../d1/df7/qcommon_8h.html#a137a12c218c78399558b41cb435949cd">Sys_SteamPath</a>(), <a class="code" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a> | <a class="code" href="../../de/d01/q__shared_8h.html#a71a1b73d68bfe1ebb079417c587c5df9">CVAR_PROTECTED</a>);</div>
<div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, gameName);</div>
<div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;    }</div>
<div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, gameName);</div>
<div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;    }</div>
<div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;    <span class="comment">// fs_homepath is somewhat particular to *nix systems, only add if relevant</span></div>
<div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160; </div>
<div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;<span class="preprocessor">#ifdef __APPLE__</span></div>
<div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;    fs_apppath = <a class="code" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a>(<span class="stringliteral">&quot;fs_apppath&quot;</span>, <a class="code" href="../../d5/dd6/sys__main_8c.html#a7bd7b1d5ac55ea5c067398bccf4a85ca">Sys_DefaultAppPath</a>(), <a class="code" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a> | <a class="code" href="../../de/d01/q__shared_8h.html#a71a1b73d68bfe1ebb079417c587c5df9">CVAR_PROTECTED</a>);</div>
<div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;    <span class="comment">// Make MacOSX also include the base path included with the .app bundle</span></div>
<div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;    <span class="keywordflow">if</span> (fs_apppath-&gt;string[0])</div>
<div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(fs_apppath-&gt;string, gameName);</div>
<div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160; </div>
<div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;    <span class="comment">// NOTE: same filtering below for mods and basegame</span></div>
<div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0] &amp;&amp; <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>)) {</div>
<div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, gameName);</div>
<div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;    }</div>
<div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160; </div>
<div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;    <span class="comment">// check for additional base game so mods can be based upon other mods</span></div>
<div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0] &amp;&amp; <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, gameName)) {</div>
<div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;        }</div>
<div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;        }</div>
<div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;        }</div>
<div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0] &amp;&amp; <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>)) {</div>
<div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;        }</div>
<div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;    }</div>
<div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160; </div>
<div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;    <span class="comment">// check for additional game folder for mods</span></div>
<div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0] &amp;&amp; <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, gameName)) {</div>
<div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;        }</div>
<div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;        }</div>
<div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;        }</div>
<div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0] &amp;&amp; <a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>)) {</div>
<div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;        }</div>
<div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;    }</div>
<div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160; </div>
<div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;<span class="preprocessor">#ifndef STANDALONE</span></div>
<div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d19/common_8c.html#a4a3fc59eece356bb6f4db037e33acf43">com_standalone</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a1de8ef7048063ff2bd814d66f47d74e0">Com_ReadCDKey</a>(<a class="code" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>);</div>
<div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#ad7ba8f4e667339f48746407580f90d0e">Com_AppendCDKey</a>(<a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>);</div>
<div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;        }</div>
<div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;    }</div>
<div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160; </div>
<div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;    <span class="comment">// add our commands</span></div>
<div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a9a231f06054959dab78df7335a8d2a47">Cmd_AddCommand</a>(<span class="stringliteral">&quot;path&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f</a>);</div>
<div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a9a231f06054959dab78df7335a8d2a47">Cmd_AddCommand</a>(<span class="stringliteral">&quot;dir&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a14db47fd7a399697847cdd67685c5426">FS_Dir_f</a>);</div>
<div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a9a231f06054959dab78df7335a8d2a47">Cmd_AddCommand</a>(<span class="stringliteral">&quot;fdir&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f</a>);</div>
<div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a9a231f06054959dab78df7335a8d2a47">Cmd_AddCommand</a>(<span class="stringliteral">&quot;touchFile&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#ab003187b06c3851b2e4650616ba8d67d">FS_TouchFile_f</a>);</div>
<div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;    <a class="code" href="../../da/d32/cmd_8c.html#a9a231f06054959dab78df7335a8d2a47">Cmd_AddCommand</a>(<span class="stringliteral">&quot;which&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a2e9ce2243dcda4094a06df205ec3f24d">FS_Which_f</a>);</div>
<div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160; </div>
<div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;    <span class="comment">// https://zerowing.idsoftware.com/bugzilla/show_bug.cgi?id=506</span></div>
<div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;    <span class="comment">// reorder the pure pk3 files according to server order</span></div>
<div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks</a>();</div>
<div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160; </div>
<div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;    <span class="comment">// print the current search paths</span></div>
<div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f</a>();</div>
<div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160; </div>
<div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#a5f1df4d8bd348465e156d90ff061cf48">modified</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>; <span class="comment">// We just loaded, it&#39;s not modified</span></div>
<div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160; </div>
<div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;----------------------\n&quot;</span>);</div>
<div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160; </div>
<div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;<span class="preprocessor">#ifdef FS_MISSING</span></div>
<div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;    <span class="keywordflow">if</span> (missingFiles == <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;        missingFiles = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(<span class="stringliteral">&quot;\\missing.txt&quot;</span>, <span class="stringliteral">&quot;ab&quot;</span>);</div>
<div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;    }</div>
<div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;%d files in pk3 files\n&quot;</span>, <a class="code" href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">fs_packFiles</a>);</div>
<div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a>, <a class="el" href="../../da/d32/cmd_8c.html#a9a231f06054959dab78df7335a8d2a47">Cmd_AddCommand()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad7ba8f4e667339f48746407580f90d0e">Com_AppendCDKey()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1de8ef7048063ff2bd814d66f47d74e0">Com_ReadCDKey()</a>, <a class="el" href="../../d8/d19/common_8c.html#a4a3fc59eece356bb6f4db037e33acf43">com_standalone</a>, <a class="el" href="../../d7/de8/cvar_8c.html#a9d7b23b195518b2a196a3cc013f4d11a">Cvar_ForceReset()</a>, <a class="el" href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a71a1b73d68bfe1ebb079417c587c5df9">CVAR_PROTECTED</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a27611779736399fa9840bfcc3b50b6cc">CVAR_SYSTEMINFO</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a>, <a class="el" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14db47fd7a399697847cdd67685c5426">FS_Dir_f()</a>, <a class="el" href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a900505aca395309f53085ae0ce5663f7">FS_InvalidGameDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">fs_packFiles</a>, <a class="el" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab003187b06c3851b2e4650616ba8d67d">FS_TouchFile_f()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2e9ce2243dcda4094a06df205ec3f24d">FS_Which_f()</a>, <a class="el" href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d8/d20/structcvar__s.html#a5f1df4d8bd348465e156d90ff061cf48">cvar_s::modified</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d5/dd6/sys__main_8c.html#a7bd7b1d5ac55ea5c067398bccf4a85ca">Sys_DefaultAppPath()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6fc918049f77c94085ee49d663f66ee4">Sys_DefaultHomePath()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a34f6a8f28b94b0c0263dea3dea07cb01">Sys_DefaultInstallPath()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a8c8cdd6a45dee8393d7c0c65d6df8b83">Sys_GogPath()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a137a12c218c78399558b41cb435949cd">Sys_SteamPath()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="a06e74b378ce96e91964bf188fd77ad59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e74b378ce96e91964bf188fd77ad59">&#9670;&nbsp;</a></span>FS_SV_FileExists()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_SV_FileExists </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tests if the file exists. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00669">669</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;{</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="keywordtype">char</span>* testpath;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160; </div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    testpath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, file, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    testpath[strlen(testpath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160; </div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists</a>(testpath);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks()</a>.</p>

</div>
</div>
<a id="ad406d41c306abb12491df47192457990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad406d41c306abb12491df47192457990">&#9670;&nbsp;</a></span>FS_SV_FOpenFileRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a> FS_SV_FOpenFileRead </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> *&#160;</td>
          <td class="paramname"><em>fp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Search for a file somewhere below the home path then base path in that order. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">fp</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00728">728</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;{</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="keywordtype">char</span>* ospath;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    f = 0;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    }</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160; </div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    f = <a class="code" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a>();</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">zipFile</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160; </div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name));</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160; </div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="comment">// don&#39;t let sound stutter</span></div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <a class="code" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer</a>();</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160; </div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    <span class="comment">// search homepath</span></div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <span class="comment">// remove trailing slash</span></div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    ospath[strlen(ospath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160; </div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_SV_FOpenFileRead (fs_homepath): %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    }</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160; </div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(ospath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o) {</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        <span class="comment">// If fs_homepath == fs_basepath, don&#39;t bother</span></div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>)) {</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;            <span class="comment">// search basepath</span></div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            ospath[strlen(ospath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160; </div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_SV_FOpenFileRead (fs_basepath): %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            }</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160; </div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(ospath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;        }</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160; </div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <span class="comment">// Check fs_steampath</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o &amp;&amp; <a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;            ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;            ospath[strlen(ospath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_SV_FOpenFileRead (fs_steampath): %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;            }</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160; </div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(ospath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;        }</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160; </div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        <span class="comment">// Check fs_gogpath</span></div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o &amp;&amp; <a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>[0]) {</div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;            ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;            ospath[strlen(ospath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_SV_FOpenFileRead (fs_gogpath): %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            }</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160; </div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(ospath, <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;        }</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160; </div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o) {</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;            f = 0;</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        }</div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;    }</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160; </div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;    *fp = f;</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;    <span class="keywordflow">if</span> (f) {</div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#a94716234fc9383efe0af2b1286b4a677">FS_filelength</a>(f);</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;    }</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;    <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a>, <a class="el" href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#a94716234fc9383efe0af2b1286b4a677">FS_filelength()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">fileHandleData_t::handleSync</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp()</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer()</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen()</a>, and <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">fileHandleData_t::zipFile</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#af4e5f71b8a1ed203717338b513b7ec16">CL_GenerateQKey()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#ab92ccfd130b5622092a771455bc18b68">CL_UpdateGUID()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ad7ba8f4e667339f48746407580f90d0e">Com_AppendCDKey()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6efb2ecbf6e3e60a7d216c91a82e951c">Com_MD5File()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1de8ef7048063ff2bd814d66f47d74e0">Com_ReadCDKey()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6d35e4aedee94ce5450b455873bfca2e">FS_GetModDescription()</a>, <a class="el" href="../../d8/de1/client_8h.html#aa213f972c9f4474bf1dc8de2d63ed08e">LAN_LoadCachedServers()</a>, <a class="el" href="../../d6/df0/sv__ccmds_8c.html#afedaa2cfe45e23191b2125fe8ff9a8cb">SV_RehashBans_f()</a>, and <a class="el" href="../../db/d01/sv__client_8c.html#a9e3957a357260512ec0724ce88c5c581">SV_WriteDownloadToClient()</a>.</p>

</div>
</div>
<a id="a3cf7e97bd1e6ce97117806e79a016be9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf7e97bd1e6ce97117806e79a016be9">&#9670;&nbsp;</a></span>FS_SV_FOpenFileWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> FS_SV_FOpenFileWrite </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00684">684</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;{</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    <span class="keywordtype">char</span>* ospath;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    f;</div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160; </div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    }</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160; </div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    ospath[strlen(ospath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    f = <a class="code" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a>();</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">zipFile</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160; </div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_SV_FOpenFileWrite: %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    }</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(ospath, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160; </div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath</a>(ospath)) {</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    }</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <a class="code" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a>(<span class="stringliteral">&quot;writing to: %s\n&quot;</span>, ospath);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">handleFiles</a>.<a class="code" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">file</a>.<a class="code" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">o</a> = <a class="code" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a>(ospath, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160; </div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <a class="code" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].name));</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160; </div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].<a class="code" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">handleSync</a> = <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[f].handleFiles.file.o) {</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;        f = 0;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    }</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">return</span> f;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, <a class="el" href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a>, <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">fileHandleData_t::handleSync</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a>, <a class="el" href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen()</a>, and <a class="el" href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">fileHandleData_t::zipFile</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d38/cl__main_8c.html#af4e5f71b8a1ed203717338b513b7ec16">CL_GenerateQKey()</a>, <a class="el" href="../../d4/d53/cl__parse_8c.html#aeca488e72296ca4f7c15070046ea8c63">CL_ParseDownload()</a>, <a class="el" href="../../d8/d19/common_8c.html#af7503f857ab4b343d8e47b13d103b613">Com_WriteCDKey()</a>, <a class="el" href="../../d8/de1/client_8h.html#a6f76347c8dee334ffb1c5d834bc309c4">LAN_SaveServersToCache()</a>, and <a class="el" href="../../d6/df0/sv__ccmds_8c.html#a1a0a205b55ebb0978d5dc97c823f4093">SV_WriteBans()</a>.</p>

</div>
</div>
<a id="ae79db0585126e3d1cc1062c31b0c6df2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae79db0585126e3d1cc1062c31b0c6df2">&#9670;&nbsp;</a></span>FS_SV_Rename()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_SV_Rename </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a>&#160;</td>
          <td class="paramname"><em>safe</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">from</td><td></td></tr>
    <tr><td class="paramname">to</td><td></td></tr>
    <tr><td class="paramname">safe</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00816">816</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;{</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;    <span class="keywordtype">char</span>* from_ospath, * to_ospath;</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160; </div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;    }</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160; </div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;    <span class="comment">// don&#39;t let sound stutter</span></div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;    <a class="code" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer</a>();</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160; </div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;    from_ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, from, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;    to_ospath = <a class="code" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a>(<a class="code" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">string</a>, to, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;    from_ospath[strlen(from_ospath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;    to_ospath[strlen(to_ospath) - 1] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160; </div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>-&gt;<a class="code" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">integer</a>) {</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_SV_Rename: %s --&gt; %s\n&quot;</span>, from_ospath, to_ospath);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;    }</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160; </div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;    <span class="keywordflow">if</span> (safe) {</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a>(to_ospath, <a class="code" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;    }</div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160; </div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;    rename(from_ospath, to_ospath);</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a>, <a class="el" href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a>, <a class="el" href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer()</a>, and <a class="el" href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d53/cl__parse_8c.html#aeca488e72296ca4f7c15070046ea8c63">CL_ParseDownload()</a>.</p>

</div>
</div>
<a id="ab003187b06c3851b2e4650616ba8d67d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab003187b06c3851b2e4650616ba8d67d">&#9670;&nbsp;</a></span>FS_TouchFile_f()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_TouchFile_f </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02819">2819</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;{</div>
<div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>    f;</div>
<div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160; </div>
<div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a>() != 2) {</div>
<div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;Usage: touchFile &lt;file&gt;\n&quot;</span>);</div>
<div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;    }</div>
<div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160; </div>
<div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead</a>(<a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(1), &amp;f, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>);</div>
<div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;    <span class="keywordflow">if</span> (f) {</div>
<div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;        <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(f);</div>
<div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;    }</div>
<div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc()</a>, <a class="el" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead()</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a9ff51d1c7623edd3d80b4b46fb56d467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ff51d1c7623edd3d80b4b46fb56d467">&#9670;&nbsp;</a></span>FS_Which()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> FS_Which </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>searchPath</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td></td></tr>
    <tr><td class="paramname">searchPath</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02840">2840</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;{</div>
<div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search = searchPath;</div>
<div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160; </div>
<div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search, <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>) &gt; 0) {</div>
<div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;        <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>) {</div>
<div class="line"><a name="l02846"></a><span class="lineno"> 2846</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;File \&quot;%s\&quot; found in \&quot;%s\&quot;\n&quot;</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">pack</a>-&gt;<a class="code" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pakFilename</a>);</div>
<div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>) {</div>
<div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;File \&quot;%s\&quot; found at \&quot;%s\&quot;\n&quot;</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">dir</a>-&gt;<a class="code" href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">fullpath</a>);</div>
<div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>;</div>
<div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;        }</div>
<div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;    }</div>
<div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160; </div>
<div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>;</div>
<div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">searchpath_s::dir</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">directory_t::fullpath</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a>, <a class="el" href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pack_t::pakFilename</a>, <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a>, and <a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a2e9ce2243dcda4094a06df205ec3f24d">FS_Which_f()</a>, and <a class="el" href="../../de/de9/vm_8c.html#a7be32af178d4fadbcf2584d1f1fb8f34">VM_LoadQVM()</a>.</p>

</div>
</div>
<a id="a2e9ce2243dcda4094a06df205ec3f24d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e9ce2243dcda4094a06df205ec3f24d">&#9670;&nbsp;</a></span>FS_Which_f()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_Which_f </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02860">2860</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;{</div>
<div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;    <a class="code" href="../../df/da7/structsearchpath__s.html">searchpath_t</a>* search;</div>
<div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;    <span class="keywordtype">char</span>* <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>;</div>
<div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160; </div>
<div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;    <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a> = <a class="code" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a>(1);</div>
<div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160; </div>
<div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[0]) {</div>
<div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;Usage: which &lt;file&gt;\n&quot;</span>);</div>
<div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;    }</div>
<div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160; </div>
<div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;    <span class="comment">// qpaths are not supposed to have a leading slash</span></div>
<div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[0] == <span class="charliteral">&#39;/&#39;</span> || <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>[0] == <span class="charliteral">&#39;\\&#39;</span>) {</div>
<div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;        <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>++;</div>
<div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;    }</div>
<div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160; </div>
<div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;    <span class="comment">// just wants to see if file is there</span></div>
<div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;    <span class="keywordflow">for</span> (search = <a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>; search; search = search-&gt;<a class="code" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">next</a>) {</div>
<div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a9ff51d1c7623edd3d80b4b46fb56d467">FS_Which</a>(<a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>, search))</div>
<div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;    }</div>
<div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160; </div>
<div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;    <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;File not found: \&quot;%s\&quot;\n&quot;</span>, <a class="code" href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a>);</div>
<div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, <a class="el" href="../../d8/d8c/files_8c.html#a9ff51d1c7623edd3d80b4b46fb56d467">FS_Which()</a>, and <a class="el" href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="af2f02a32d713bda5d8907bb011c22b75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2f02a32d713bda5d8907bb011c22b75">&#9670;&nbsp;</a></span>FS_Write()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> FS_Write </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a>&#160;</td>
          <td class="paramname"><em>h</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Properly handles partial writes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td></td></tr>
    <tr><td class="paramname">len</td><td></td></tr>
    <tr><td class="paramname">h</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01556">1556</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;{</div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;    <span class="keywordtype">int</span>        block, remaining;</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;    <span class="keywordtype">int</span>        written;</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;    <span class="keywordtype">byte</span>* <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>;</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;    <span class="keywordtype">int</span>        tries;</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;    FILE* f;</div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160; </div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;    }</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;    <span class="keywordflow">if</span> (!h) {</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;    }</div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160; </div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;    f = <a class="code" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle</a>(h);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;    <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a> = (<span class="keywordtype">byte</span>*)<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>;</div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160; </div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;    remaining = len;</div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;    tries = 0;</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;    <span class="keywordflow">while</span> (remaining) {</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;        block = remaining;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;        written = fwrite(<a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a>, 1, block, f);</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keywordflow">if</span> (written == 0) {</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;            <span class="keywordflow">if</span> (!tries) {</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;                tries = 1;</div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_Write: 0 bytes written\n&quot;</span>);</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;            }</div>
<div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;        }</div>
<div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160; </div>
<div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;        <span class="keywordflow">if</span> (written == -1) {</div>
<div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;            <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;FS_Write: -1 bytes written\n&quot;</span>);</div>
<div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;            <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        }</div>
<div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160; </div>
<div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;        remaining -= written;</div>
<div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;        <a class="code" href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a> += written;</div>
<div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;    }</div>
<div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>[h].handleSync) {</div>
<div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        fflush(f);</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;    }</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;    <span class="keywordflow">return</span> len;</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/dde/cl__cgame_8c.html#a71ede2bb98f1ae6f01efc81cd25f4a3c">CL_CgameSystemCalls()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#af4e5f71b8a1ed203717338b513b7ec16">CL_GenerateQKey()</a>, <a class="el" href="../../d4/d53/cl__parse_8c.html#aeca488e72296ca4f7c15070046ea8c63">CL_ParseDownload()</a>, <a class="el" href="../../d3/d38/cl__main_8c.html#a39d84591bff8ab333c7fa8875c35d42b">CL_Record_f()</a>, <a class="el" href="../../d8/de1/client_8h.html#a8b7397f7c1e0de4f6d89e1b6d984eedc">CL_SaveConsoleHistory()</a>, <a class="el" href="../../d8/de1/client_8h.html#a0bcfb5770413c65dc1c6409f56e35163">CL_StopRecord_f()</a>, <a class="el" href="../../d9/dd6/cl__ui_8c.html#a816b2b94718d7146f200ba4a378c6834">CL_UISystemCalls()</a>, <a class="el" href="../../d8/de1/client_8h.html#a50deb0f25820cc8e57a40bbd69839378">CL_WriteDemoMessage()</a>, <a class="el" href="../../d8/d19/common_8c.html#a3b7310bba041784a8f5dd07f7e6ad852">Com_GetRealEvent()</a>, <a class="el" href="../../d8/d19/common_8c.html#aa9f31322df94ece8f2f18c0ffdb7192e">Com_Printf()</a>, <a class="el" href="../../d8/d19/common_8c.html#af7503f857ab4b343d8e47b13d103b613">Com_WriteCDKey()</a>, <a class="el" href="../../dd/d5a/cl__console_8c.html#aa4063c6dde81cbf162b11d302350fdef">Con_Dump_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aca1b4e6c5af449b0519e4d9d7d624a55">Cvar_WriteVariables()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a28fb7a9d3ddf3b9761d7578add3377b3">FS_Printf()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#af5bb678d83f1c6291ddfe69eb4267030">FS_WriteFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a12dc3f925eb43321ffc3cc226f01f9aa">Hunk_Log()</a>, <a class="el" href="../../d8/d19/common_8c.html#ac5a4cadd7cfa8f61c4ca788f0e134674">Hunk_SmallLog()</a>, <a class="el" href="../../d8/de1/client_8h.html#a6f76347c8dee334ffb1c5d834bc309c4">LAN_SaveServersToCache()</a>, <a class="el" href="../../dc/d92/cl__avi_8c.html#a8c6773c26663ff21476c65692c5c39de">SafeFS_Write()</a>, <a class="el" href="../../d5/d09/sv__bot_8c.html#ab297fdd094aac594bca6abeda876b949">SV_BotInitBotLib()</a>, <a class="el" href="../../d7/d3c/sv__game_8c.html#a73948936d23d65d3a27c6027767af7c8">SV_GameSystemCalls()</a>, <a class="el" href="../../d6/df0/sv__ccmds_8c.html#a1a0a205b55ebb0978d5dc97c823f4093">SV_WriteBans()</a>, and <a class="el" href="../../d8/d19/common_8c.html#ae88242f4fb5e2cb3bd31948e804884a3">Z_LogZoneHeap()</a>.</p>

</div>
</div>
<a id="af5bb678d83f1c6291ddfe69eb4267030"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5bb678d83f1c6291ddfe69eb4267030">&#9670;&nbsp;</a></span>FS_WriteFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> FS_WriteFile </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>qpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a>&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a complete file, creating any subdirectories needed. </p>
<p>Filename are relative to the quake search path.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">qpath</td><td></td></tr>
    <tr><td class="paramname">buffer</td><td></td></tr>
    <tr><td class="paramname">size</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l01980">1980</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;{</div>
<div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;    <a class="code" href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a> f;</div>
<div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160; </div>
<div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>) {</div>
<div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;Filesystem call made without initialization&quot;</span>);</div>
<div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;    }</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160; </div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;    <span class="keywordflow">if</span> (!qpath || !<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>) {</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a>(<a class="code" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <span class="stringliteral">&quot;FS_WriteFile: NULL parameter&quot;</span>);</div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;    }</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160; </div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;    f = <a class="code" href="../../d8/d8c/files_8c.html#a53b5e83245e636947c7b951c869fd91e">FS_FOpenFileWrite</a>(qpath);</div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;    <span class="keywordflow">if</span> (!f) {</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <a class="code" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a>(<span class="stringliteral">&quot;Failed to open %s\n&quot;</span>, qpath);</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;    }</div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160; </div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a>(<a class="code" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="code" href="../../d2/db7/ioapi_8h.html#a014d89bd76f74ef3a29c8f04b473eb76">size</a>, f);</div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160; </div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;    <a class="code" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a>(f);</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error()</a>, <a class="el" href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf()</a>, <a class="el" href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a53b5e83245e636947c7b951c869fd91e">FS_FOpenFileWrite()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a>, and <a class="el" href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a737fb4745a9b5322c41533d5c870dbbd">CL_InitRef()</a>.</p>

</div>
</div>
<a id="a25a8e0c344d0b412acb449c3076d5274"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25a8e0c344d0b412acb449c3076d5274">&#9670;&nbsp;</a></span>paksort()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> <a class="el" href="../../d7/de2/q__platform_8h.html#af8273ae2b4cacc8b918137c2c3f097b1">QDECL</a> paksort </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d11/qgl_8h.html#a58d01f44c8d8b40e004e7769af34eb1b">void</a> *&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">a</td><td></td></tr>
    <tr><td class="paramname">b</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02894">2894</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;{</div>
<div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;    <span class="keywordtype">char</span>* aa, * bb;</div>
<div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160; </div>
<div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;    aa = *(<span class="keywordtype">char</span>**)<a class="code" href="../../de/d9f/snd__wavelet_8c.html#a09ebd310e71d5c5075c8631ceee3033d">a</a>;</div>
<div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;    bb = *(<span class="keywordtype">char</span>**)b;</div>
<div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160; </div>
<div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/files_8c.html#af2a6bd66a22d9da08effd972d87e9f5b">FS_PathCmp</a>(aa, bb);</div>
<div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d9f/snd__wavelet_8c.html#a09ebd310e71d5c5075c8631ceee3033d">a</a>, and <a class="el" href="../../d8/d8c/files_8c.html#af2a6bd66a22d9da08effd972d87e9f5b">FS_PathCmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>.</p>

</div>
</div>
<a id="ad06f3a08b27ffe3a721b0d726e0fa8f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad06f3a08b27ffe3a721b0d726e0fa8f7">&#9670;&nbsp;</a></span>Sys_ConcatenateFileLists()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char** Sys_ConcatenateFileLists </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>list0</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>list1</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>mkv: Naive implementation. </p>
<p>Concatenates three lists into a new list, and frees the old lists from the heap. bk001129 - from cvs1.17 (mkv).</p>
<p>FIXME: TTimo: those two should move to <a class="el" href="../../d8/d19/common_8c.html" title="misc functions used in client and server.">common.c</a> next to Sys_ListFiles.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list0</td><td></td></tr>
    <tr><td class="paramname">list1</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02465">2465</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;{</div>
<div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;    <span class="keywordtype">int</span> totalLength = 0;</div>
<div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;    <span class="keywordtype">char</span>** cat = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, ** dst, ** src;</div>
<div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160; </div>
<div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;    totalLength += <a class="code" href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">Sys_CountFileList</a>(list0);</div>
<div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;    totalLength += <a class="code" href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">Sys_CountFileList</a>(list1);</div>
<div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160; </div>
<div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;    <span class="comment">/* Create new list. */</span></div>
<div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;    dst = cat = <a class="code" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>((totalLength + 1) * <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>*));</div>
<div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160; </div>
<div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;    <span class="comment">/* Copy over lists. */</span></div>
<div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;    <span class="keywordflow">if</span> (list0) {</div>
<div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="keywordflow">for</span> (src = list0; *src; src++, dst++)</div>
<div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;            *dst = *src;</div>
<div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;    }</div>
<div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;    <span class="keywordflow">if</span> (list1) {</div>
<div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;        <span class="keywordflow">for</span> (src = list1; *src; src++, dst++)</div>
<div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;            *dst = *src;</div>
<div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;    }</div>
<div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160; </div>
<div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;    <span class="comment">// Terminate the list</span></div>
<div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;    *dst = <a class="code" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160; </div>
<div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;    <span class="comment">// Free our old lists.</span></div>
<div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;    <span class="comment">// NOTE: not freeing their content, it&#39;s been merged in dst and still being used</span></div>
<div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;    <span class="keywordflow">if</span> (list0) <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(list0);</div>
<div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;    <span class="keywordflow">if</span> (list1) <a class="code" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a>(list1);</div>
<div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160; </div>
<div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;    <span class="keywordflow">return</span> cat;</div>
<div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="el" href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">Sys_CountFileList()</a>, <a class="el" href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>.</p>

</div>
</div>
<a id="a1a1f8b60e7b74de9e8370a54c0e13fb6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a1f8b60e7b74de9e8370a54c0e13fb6">&#9670;&nbsp;</a></span>Sys_CountFileList()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static unsigned <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> Sys_CountFileList </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>list</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Count file list. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">list</td><td>The file list. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l02442">2442</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;{</div>
<div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;    <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160; </div>
<div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;    <span class="keywordflow">if</span> (list) {</div>
<div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;        <span class="keywordflow">while</span> (*list) {</div>
<div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            list++;</div>
<div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;            i++;</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;        }</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;    }</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;    <span class="keywordflow">return</span> i;</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#ad06f3a08b27ffe3a721b0d726e0fa8f7">Sys_ConcatenateFileLists()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a9b7aef69f91c6fd24c87dc983cfee937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9b7aef69f91c6fd24c87dc983cfee937">&#9670;&nbsp;</a></span>fs_basegame</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a>* fs_basegame</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00261">261</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a938c473ecd04cd5f883e6da32d9e7e4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a938c473ecd04cd5f883e6da32d9e7e4a">&#9670;&nbsp;</a></span>fs_basepath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a>* fs_basepath</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00260">260</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>.</p>

</div>
</div>
<a id="a40b145fdbc84b66bb8d3a901c09c79ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40b145fdbc84b66bb8d3a901c09c79ef">&#9670;&nbsp;</a></span>fs_checksumFeed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_checksumFeed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00269">269</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1cd8d5cc010597eca54a3af1b12141f3">FS_ReferencedPakPureChecksums()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="a3e64d1d88a399fb3d1dcfc582326ccde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e64d1d88a399fb3d1dcfc582326ccde">&#9670;&nbsp;</a></span>fs_debug</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a>* fs_debug</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00249">249</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a264d0d65ff0b17851b2861f8a5311042">FS_Rename()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ae79db0585126e3d1cc1062c31b0c6df2">FS_SV_Rename()</a>.</p>

</div>
</div>
<a id="a0a0d4940920cae5cd03989225834c4bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a0d4940920cae5cd03989225834c4bb">&#9670;&nbsp;</a></span>fs_gamedir</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char fs_gamedir[<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this will be a single file name with no separators. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00248">248</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a966590935244c0d031a419129bf844a6">FS_FileExists()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7669ed35dabfd22231b3651cda65cc37">FS_HomeRemove()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a264d0d65ff0b17851b2861f8a5311042">FS_Rename()</a>.</p>

</div>
</div>
<a id="a40a7a15cecdc9d90a1c9156f76325ab2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40a7a15cecdc9d90a1c9156f76325ab2">&#9670;&nbsp;</a></span>fs_gamedirvar</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a>* fs_gamedirvar</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00262">262</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2fb9e1b8c14757cfe172a3ebf022bcd6">FS_GetCurrentGameDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="ad6f954ef4612e6512fe03502b1e279ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6f954ef4612e6512fe03502b1e279ec">&#9670;&nbsp;</a></span>fs_gogpath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a>* fs_gogpath</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00258">258</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>.</p>

</div>
</div>
<a id="ab531c515d93bd273104648ca6e06d3e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab531c515d93bd273104648ca6e06d3e9">&#9670;&nbsp;</a></span>fs_homepath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a>* fs_homepath</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00250">250</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a966590935244c0d031a419129bf844a6">FS_FileExists()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7669ed35dabfd22231b3651cda65cc37">FS_HomeRemove()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a264d0d65ff0b17851b2861f8a5311042">FS_Rename()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ae79db0585126e3d1cc1062c31b0c6df2">FS_SV_Rename()</a>.</p>

</div>
</div>
<a id="a2cbd9bc46024eeafe267d1e3a4dfad06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cbd9bc46024eeafe267d1e3a4dfad06">&#9670;&nbsp;</a></span>fs_loadCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_loadCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>total files read. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00265">265</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>.</p>

</div>
</div>
<a id="ae978c586cc2c42c3351d74281bbe64b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae978c586cc2c42c3351d74281bbe64b3">&#9670;&nbsp;</a></span>fs_loadStack</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_loadStack</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>total files in memory. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00266">266</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a896eee490bab9dfb635454e2ea979e41">FS_FreeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a9f965c88a2d5272bf0ee4f0d10b2b3c1">FS_LoadStack()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>.</p>

</div>
</div>
<a id="a40e76dfd3d7fc3350e4622886146518f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40e76dfd3d7fc3350e4622886146518f">&#9670;&nbsp;</a></span>fs_numServerPaks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_numServerPaks = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Never load anything from pk3 files that are not present at the server when pure. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00307">307</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad71dab25afd483c3ef8457a060c77076">FS_FindVM()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks()</a>.</p>

</div>
</div>
<a id="ab93fddea633353e7697001f72a5a833a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab93fddea633353e7697001f72a5a833a">&#9670;&nbsp;</a></span>fs_numServerReferencedPaks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_numServerReferencedPaks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00313">313</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#adef5a7e7eb51f7c6231a399c8c43ee51">FS_CompareZipChecksum()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ae5fff84a7d6f1fc02e946cbb99cad0e5">FS_PureServerSetReferencedPaks()</a>.</p>

</div>
</div>
<a id="a3d9f952e589557b6e08b3ab2fd90852e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d9f952e589557b6e08b3ab2fd90852e">&#9670;&nbsp;</a></span>fs_packFiles</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_packFiles = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>total number of files in packs. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00267">267</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>.</p>

</div>
</div>
<a id="a3a7653feeeb72d09401102400c55f6f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a7653feeeb72d09401102400c55f6f3">&#9670;&nbsp;</a></span>fs_readCount</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_readCount</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>total bytes read. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00264">264</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read()</a>.</p>

</div>
</div>
<a id="a3b5954e21375aa787d541039dd33681b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5954e21375aa787d541039dd33681b">&#9670;&nbsp;</a></span>fs_reordered</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a> fs_reordered</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Whether we did a reorder on the current search path when joining the server. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00304">304</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks()</a>.</p>

</div>
</div>
<a id="a708b7c81b06465508d84fee7e40aa257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a708b7c81b06465508d84fee7e40aa257">&#9670;&nbsp;</a></span>fs_searchpaths</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/d8c/files_8c.html#ad981c40cf85a47ca73156ece3fe32c31">searchpath_t</a>* fs_searchpaths</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00263">263</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac081b293868efda8f11bde4a39a0792e">FS_ClearPakReferences()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a762b35729743799fe79df7acd009f3b7">FS_FileIsInPAK()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad71dab25afd483c3ef8457a060c77076">FS_FindVM()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a26b150e15f3b3fb81d998402a82a5a7b">FS_FOpenFileRead()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a896eee490bab9dfb635454e2ea979e41">FS_FreeFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#af5da17e7070d410478748895e29c3dd1">FS_Initialized()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#acdf8781bbd0104a2bee1d53f1a3413c9">FS_LoadedPakChecksums()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a35212f789c0b97e6971ee34361583e63">FS_LoadedPakNames()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#af287f1310afea542ea308bb4e5cf8910">FS_LoadedPakPureChecksums()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a7830bbd93c06152b49bef6e49ec2cac4">FS_ReferencedPakChecksums()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3383b0380111f9f9645c961011849ea7">FS_ReferencedPakNames()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1cd8d5cc010597eca54a3af1b12141f3">FS_ReferencedPakPureChecksums()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a264d0d65ff0b17851b2861f8a5311042">FS_Rename()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a50a6dfd18abd85eb58f5778d8f4a9ce4">FS_Seek()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ae79db0585126e3d1cc1062c31b0c6df2">FS_SV_Rename()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a2e9ce2243dcda4094a06df205ec3f24d">FS_Which_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a733a835e081673c32a6d77556d2c0b24">FS_Write()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#af5bb678d83f1c6291ddfe69eb4267030">FS_WriteFile()</a>.</p>

</div>
</div>
<a id="a349dcf043719b25af7d268ebcf553da0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a349dcf043719b25af7d268ebcf553da0">&#9670;&nbsp;</a></span>fs_serverPakNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* fs_serverPakNames[<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pk3 names. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00309">309</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks()</a>.</p>

</div>
</div>
<a id="ac8a7248e8a691f0165dd1b1cc58721ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8a7248e8a691f0165dd1b1cc58721ef">&#9670;&nbsp;</a></span>fs_serverPaks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_serverPaks[<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>checksums. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00308">308</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks()</a>, and <a class="el" href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks()</a>.</p>

</div>
</div>
<a id="aa6b5456b3205acbacc0c5556e57f0daa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa6b5456b3205acbacc0c5556e57f0daa">&#9670;&nbsp;</a></span>fs_serverReferencedPakNames</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char* fs_serverReferencedPakNames[<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>pk3 names. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00315">315</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ae5fff84a7d6f1fc02e946cbb99cad0e5">FS_PureServerSetReferencedPaks()</a>.</p>

</div>
</div>
<a id="a1d9456f921dcffa56a7f62c18675d033"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d9456f921dcffa56a7f62c18675d033">&#9670;&nbsp;</a></span>fs_serverReferencedPaks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> fs_serverReferencedPaks[<a class="el" href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>checksums. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00314">314</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a375ac9db1071acc5173c3a73d791d6b7">FS_ComparePaks()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#adef5a7e7eb51f7c6231a399c8c43ee51">FS_CompareZipChecksum()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ae5fff84a7d6f1fc02e946cbb99cad0e5">FS_PureServerSetReferencedPaks()</a>.</p>

</div>
</div>
<a id="a3cd37cc08d045674e76f674ae6a03051"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd37cc08d045674e76f674ae6a03051">&#9670;&nbsp;</a></span>fs_steampath</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d01/q__shared_8h.html#aa5d67a63e61a471b6142bb4ebffbaa86">cvar_t</a>* fs_steampath</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00257">257</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>.</p>

</div>
</div>
<a id="a62e052f74b4964c2e9a712b12efb288e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62e052f74b4964c2e9a712b12efb288e">&#9670;&nbsp;</a></span>fsh</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/dbc/structfile_handle_data__t.html">fileHandleData_t</a> fsh[<a class="el" href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p></p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00300">300</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a6fd15f3ba87302abddf2d7466af52ed8">FS_FCreateOpenPipeFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ab8090de10f7d898f9365e63c2bc97291">FS_Flush()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a5461bc4bb843e134575ea1798cdf2450">FS_FOpenFileByMode()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a1b1e36a3a5dac015ce09f45fbcaa5825">FS_FOpenFileWrite()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a5dcb6aeb63861669677dec37c033f807">FS_FTell()</a>, <a class="el" href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile()</a>, <a class="el" href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a50a6dfd18abd85eb58f5778d8f4a9ce4">FS_Seek()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#a3cf7e97bd1e6ce97117806e79a016be9">FS_SV_FOpenFileWrite()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a733a835e081673c32a6d77556d2c0b24">FS_Write()</a>.</p>

</div>
</div>
<a id="a786cbe7f1d25c6eceab37a60823ac73e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a786cbe7f1d25c6eceab37a60823ac73e">&#9670;&nbsp;</a></span>lastValidBase</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char lastValidBase[<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Last valid game folder used. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00317">317</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="a9641c907249b3e772a5165ecc58b065e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9641c907249b3e772a5165ecc58b065e">&#9670;&nbsp;</a></span>lastValidComBaseGame</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char lastValidComBaseGame[<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Last valid game folder used. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00318">318</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="ae44989e789fb1adc7b885c6ef8688f23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae44989e789fb1adc7b885c6ef8688f23">&#9670;&nbsp;</a></span>lastValidFsBaseGame</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char lastValidFsBaseGame[<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Last valid game folder used. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00319">319</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="a14541ceecd7df70fa7e5258a057aac0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14541ceecd7df70fa7e5258a057aac0a">&#9670;&nbsp;</a></span>lastValidGame</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char lastValidGame[<a class="el" href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Last valid game folder used. </p>

<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00320">320</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df7/qcommon_8h.html#a697fd2c8fa7a3bb47ec8bd73385c40ed">FS_ConditionalRestart()</a>, <a class="el" href="../../d1/df7/qcommon_8h.html#aa392470e1a37d86f0a2fdb60d5f9210e">FS_InitFilesystem()</a>, and <a class="el" href="../../d1/df7/qcommon_8h.html#a7859424617923fdf80df33e240fdb893">FS_Restart()</a>.</p>

</div>
</div>
<a id="ac6af732036ed49564ce032e345f5b405"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6af732036ed49564ce032e345f5b405">&#9670;&nbsp;</a></span>missionpak_checksums</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> missionpak_checksums[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">=</div>
<div class="line">{</div>
<div class="line">    2430342401u,</div>
<div class="line">    511014160u,</div>
<div class="line">    2662638993u,</div>
<div class="line">    1438664554u</div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00180">180</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0()</a>.</p>

</div>
</div>
<a id="a2851e3b9ecde9cfb96796ec8cc696053"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2851e3b9ecde9cfb96796ec8cc696053">&#9670;&nbsp;</a></span>pak_checksums</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const unsigned <a class="el" href="../../d2/db7/ioapi_8h.html#a787fa3cf048117ba7123753c1e74fcd6">int</a> pak_checksums[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    1566731103u,</div>
<div class="line">    298122907u,</div>
<div class="line">    412165236u,</div>
<div class="line">    2991495316u,</div>
<div class="line">    1197932710u,</div>
<div class="line">    4087071573u,</div>
<div class="line">    3709064859u,</div>
<div class="line">    908855077u,</div>
<div class="line">    977125798u</div>
<div class="line">}</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../d8/d8c/files_8c_source.html#l00165">165</a> of file <a class="el" href="../../d8/d8c/files_8c_source.html">files.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="afiles_8c_html_ae62c89198cb4fe6dce52715350cb5017"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ae62c89198cb4fe6dce52715350cb5017">FS_FileForHandle</a></div><div class="ttdeci">static FILE * FS_FileForHandle(fileHandle_t f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00427">files.c:427</a></div></div>
<div class="ttc" id="aq__platform_8h_html_ae0759b49dc9497aa5c04cd88fa316009"><div class="ttname"><a href="../../d7/de2/q__platform_8h.html#ae0759b49dc9497aa5c04cd88fa316009">DLL_EXT</a></div><div class="ttdeci">#define DLL_EXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/q__platform_8h_source.html#l00135">q_platform.h:135</a></div></div>
<div class="ttc" id="afiles_8c_html_ae74f0bcfc73dfe6783333835b1ea27ba"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ae74f0bcfc73dfe6783333835b1ea27ba">MAX_SEARCH_PATHS</a></div><div class="ttdeci">#define MAX_SEARCH_PATHS</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00198">files.c:198</a></div></div>
<div class="ttc" id="aioapi_8h_html_a8ad8a13c88886b9f623034ff88570adb"><div class="ttname"><a href="../../d2/db7/ioapi_8h.html#a8ad8a13c88886b9f623034ff88570adb">buf</a></div><div class="ttdeci">voidpf void * buf</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ioapi_8h_source.html#l00039">ioapi.h:39</a></div></div>
<div class="ttc" id="afiles_8c_html_a6d35e4aedee94ce5450b455873bfca2e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a6d35e4aedee94ce5450b455873bfca2e">FS_GetModDescription</a></div><div class="ttdeci">void FS_GetModDescription(const char *modDir, char *description, int descriptionLen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02503">files.c:2503</a></div></div>
<div class="ttc" id="acvar_8c_html_a51a7517b79d52f9a2df8e4db18c1e52b"><div class="ttname"><a href="../../d7/de8/cvar_8c.html#a51a7517b79d52f9a2df8e4db18c1e52b">Cvar_Set</a></div><div class="ttdeci">void Cvar_Set(const char *var_name, const char *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de8/cvar_8c_source.html#l00628">cvar.c:628</a></div></div>
<div class="ttc" id="afiles_8c_html_ac8a7248e8a691f0165dd1b1cc58721ef"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ac8a7248e8a691f0165dd1b1cc58721ef">fs_serverPaks</a></div><div class="ttdeci">static int fs_serverPaks[MAX_SEARCH_PATHS]</div><div class="ttdoc">checksums.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00308">files.c:308</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a617a3d7c94e51a30d739ce7cc6f34c92"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a617a3d7c94e51a30d739ce7cc6f34c92">NUM_TA_PAKS</a></div><div class="ttdeci">#define NUM_TA_PAKS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00598">qcommon.h:598</a></div></div>
<div class="ttc" id="aq__shared_8h_html_abd4ae30fcfdcbbff51bbf3f4e6daeee7"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#abd4ae30fcfdcbbff51bbf3f4e6daeee7">MAX_QPATH</a></div><div class="ttdeci">#define MAX_QPATH</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00262">q_shared.h:262</a></div></div>
<div class="ttc" id="astructfile_handle_data__t_html_ada96ff7227d971cf9b2beb4da846dfef"><div class="ttname"><a href="../../d8/dbc/structfile_handle_data__t.html#ada96ff7227d971cf9b2beb4da846dfef">fileHandleData_t::handleSync</a></div><div class="ttdeci">qboolean handleSync</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00292">files.c:292</a></div></div>
<div class="ttc" id="afiles_8c_html_aa6b5456b3205acbacc0c5556e57f0daa"><div class="ttname"><a href="../../d8/d8c/files_8c.html#aa6b5456b3205acbacc0c5556e57f0daa">fs_serverReferencedPakNames</a></div><div class="ttdeci">static char * fs_serverReferencedPakNames[MAX_SEARCH_PATHS]</div><div class="ttdoc">pk3 names.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00315">files.c:315</a></div></div>
<div class="ttc" id="afiles_8c_html_ac081b293868efda8f11bde4a39a0792e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ac081b293868efda8f11bde4a39a0792e">FS_ClearPakReferences</a></div><div class="ttdeci">void FS_ClearPakReferences(int flags)</div><div class="ttdoc">clears referenced booleans on loaded pk3s.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03800">files.c:3800</a></div></div>
<div class="ttc" id="afiles_8c_html_ae393231887d5369c01fda36cdf1d2af8"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ae393231887d5369c01fda36cdf1d2af8">FS_AddGameDirectory</a></div><div class="ttdeci">void FS_AddGameDirectory(const char *path, const char *dir)</div><div class="ttdoc">Sets fs_gamedir, adds the directory to the head of the path, then loads the zip headers.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02910">files.c:2910</a></div></div>
<div class="ttc" id="afiles_8c_html_ac259dfbc6260f1056d4a2b82c8d788db"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ac259dfbc6260f1056d4a2b82c8d788db">FS_PureServerSetLoadedPaks</a></div><div class="ttdeci">void FS_PureServerSetLoadedPaks(const char *pakSums, const char *pakNames)</div><div class="ttdoc">If the string is empty, all data sources will be allowed.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03829">files.c:3829</a></div></div>
<div class="ttc" id="afiles_8c_html_a9641c907249b3e772a5165ecc58b065e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a9641c907249b3e772a5165ecc58b065e">lastValidComBaseGame</a></div><div class="ttdeci">char lastValidComBaseGame[MAX_OSPATH]</div><div class="ttdoc">Last valid game folder used.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00318">files.c:318</a></div></div>
<div class="ttc" id="afiles_8c_html_aed9b00d4e7637e781a7757538adf1dd2"><div class="ttname"><a href="../../d8/d8c/files_8c.html#aed9b00d4e7637e781a7757538adf1dd2">FS_Path_f</a></div><div class="ttdeci">void FS_Path_f(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02786">files.c:2786</a></div></div>
<div class="ttc" id="acommon_8c_html_a30e51dc31a5b9d27f44e42d8dea6ff8a"><div class="ttname"><a href="../../d8/d19/common_8c.html#a30e51dc31a5b9d27f44e42d8dea6ff8a">Com_SafeMode</a></div><div class="ttdeci">qboolean Com_SafeMode(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00460">common.c:460</a></div></div>
<div class="ttc" id="aq__shared_8h_html_aeb5f6f6ff73cdbb085db970c33d2b9cbab7f080d71bee180296706c77d2cf3383"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbab7f080d71bee180296706c77d2cf3383">FS_SEEK_CUR</a></div><div class="ttdeci">@ FS_SEEK_CUR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00816">q_shared.h:816</a></div></div>
<div class="ttc" id="astructpack__t_html_af85f9a022f6a140f509a22c5d1de7e62"><div class="ttname"><a href="../../dc/dad/structpack__t.html#af85f9a022f6a140f509a22c5d1de7e62">pack_t::buildBuffer</a></div><div class="ttdeci">fileInPack_t * buildBuffer</div><div class="ttdoc">buffer with the filenames etc.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00226">files.c:226</a></div></div>
<div class="ttc" id="astructdirectory__t_html"><div class="ttname"><a href="../../d4/de3/structdirectory__t.html">directory_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00232">files.c:232</a></div></div>
<div class="ttc" id="acmd_8c_html_a93726aad83fc281293e890274ae75dde"><div class="ttname"><a href="../../da/d32/cmd_8c.html#a93726aad83fc281293e890274ae75dde">Cmd_RemoveCommand</a></div><div class="ttdeci">void Cmd_RemoveCommand(const char *cmd_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/cmd_8c_source.html#l00680">cmd.c:680</a></div></div>
<div class="ttc" id="afiles_8c_html_a94716234fc9383efe0af2b1286b4a677"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a94716234fc9383efe0af2b1286b4a677">FS_filelength</a></div><div class="ttdeci">long FS_filelength(fileHandle_t f)</div><div class="ttdoc">doesn't work for files that are opened from a pack file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00482">files.c:482</a></div></div>
<div class="ttc" id="afiles_8c_html_ae978c586cc2c42c3351d74281bbe64b3"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ae978c586cc2c42c3351d74281bbe64b3">fs_loadStack</a></div><div class="ttdeci">static int fs_loadStack</div><div class="ttdoc">total files in memory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00266">files.c:266</a></div></div>
<div class="ttc" id="astructfile_in_pack__s_html_ac5e1c82cc21f82ae7b1da2a8466969bb"><div class="ttname"><a href="../../d1/d16/structfile_in_pack__s.html#ac5e1c82cc21f82ae7b1da2a8466969bb">fileInPack_s::name</a></div><div class="ttdeci">char * name</div><div class="ttdoc">name of the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00205">files.c:205</a></div></div>
<div class="ttc" id="afiles_8c_html_a938c473ecd04cd5f883e6da32d9e7e4a"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a938c473ecd04cd5f883e6da32d9e7e4a">fs_basepath</a></div><div class="ttdeci">static cvar_t * fs_basepath</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00260">files.c:260</a></div></div>
<div class="ttc" id="afiles_8c_html_ad7ba8f4e667339f48746407580f90d0e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ad7ba8f4e667339f48746407580f90d0e">Com_AppendCDKey</a></div><div class="ttdeci">void Com_AppendCDKey(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l02533">common.c:2533</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a06533b0b40b1ccf0fc08f76fc75d5327"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a06533b0b40b1ccf0fc08f76fc75d5327">Sys_ListFiles</a></div><div class="ttdeci">char ** Sys_ListFiles(const char *directory, const char *extension, char *filter, int *numfiles, qboolean wantsubs)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00507">sys_win32.c:507</a></div></div>
<div class="ttc" id="afiles_8c_html_aabc6200b9a726797dfbed9738199459c"><div class="ttname"><a href="../../d8/d8c/files_8c.html#aabc6200b9a726797dfbed9738199459c">FS_CheckFilenameIsMutable</a></div><div class="ttdeci">static void FS_CheckFilenameIsMutable(const char *filename, const char *function)</div><div class="ttdoc">ERR_FATAL if trying to maniuplate a file with the platform library, QVM, or pk3 extension.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00593">files.c:593</a></div></div>
<div class="ttc" id="aqcommon_8h_html_aed21bf3c863714c04ffac47ebf9a9fbb"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#aed21bf3c863714c04ffac47ebf9a9fbb">Sys_Mkfifo</a></div><div class="ttdeci">FILE * Sys_Mkfifo(const char *ospath)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00393">sys_win32.c:393</a></div></div>
<div class="ttc" id="astructcvar__s_html_a5f1df4d8bd348465e156d90ff061cf48"><div class="ttname"><a href="../../d8/d20/structcvar__s.html#a5f1df4d8bd348465e156d90ff061cf48">cvar_s::modified</a></div><div class="ttdeci">qboolean modified</div><div class="ttdoc">set each time the cvar is changed.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00957">q_shared.h:957</a></div></div>
<div class="ttc" id="afiles_8c_html_a671ffbf506ea8d57d193c072ade04343"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a671ffbf506ea8d57d193c072ade04343">FS_ReadFile</a></div><div class="ttdeci">long FS_ReadFile(const char *qpath, void **buffer)</div><div class="ttdoc">Read the file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01943">files.c:1943</a></div></div>
<div class="ttc" id="astructpack__t_html_ad8150938ef90694f4621a31443f06f69"><div class="ttname"><a href="../../dc/dad/structpack__t.html#ad8150938ef90694f4621a31443f06f69">pack_t::pakPathname</a></div><div class="ttdeci">char pakPathname[MAX_OSPATH]</div><div class="ttdoc">c:\quake3\baseq3.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00215">files.c:215</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a3c94e41e22bd0daf27402798c809cd85"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a3c94e41e22bd0daf27402798c809cd85">Sys_DllExtension</a></div><div class="ttdeci">qboolean Sys_DllExtension(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00861">sys_win32.c:861</a></div></div>
<div class="ttc" id="afiles_8c_html_a3cd37cc08d045674e76f674ae6a03051"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3cd37cc08d045674e76f674ae6a03051">fs_steampath</a></div><div class="ttdeci">static cvar_t * fs_steampath</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00257">files.c:257</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a375eeb5d9e57783a5a6d602d8647dd1b"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a375eeb5d9e57783a5a6d602d8647dd1b">Sys_InitPIDFile</a></div><div class="ttdeci">void Sys_InitPIDFile(const char *gamedir)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd6/sys__main_8c_source.html#l00236">sys_main.c:236</a></div></div>
<div class="ttc" id="acvar_8c_html_a7a65b2c02a2762f4784e2a644e105c71"><div class="ttname"><a href="../../d7/de8/cvar_8c.html#a7a65b2c02a2762f4784e2a644e105c71">Cvar_Get</a></div><div class="ttdeci">cvar_t * Cvar_Get(const char *var_name, const char *var_value, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de8/cvar_8c_source.html#l00310">cvar.c:310</a></div></div>
<div class="ttc" id="astructunz__file__info__s_html_a7696a98511bc57e389485e5313a9c2bf"><div class="ttname"><a href="../../dc/dbc/structunz__file__info__s.html#a7696a98511bc57e389485e5313a9c2bf">unz_file_info_s::uncompressed_size</a></div><div class="ttdeci">uLong uncompressed_size</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5c/unzip_8h_source.html#l00111">unzip.h:111</a></div></div>
<div class="ttc" id="afiles_8c_html_a13b37fc93130136e7921cf1f1a4283f1"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a13b37fc93130136e7921cf1f1a4283f1">FS_GetModList</a></div><div class="ttdeci">int FS_GetModList(char *listbuf, int bufsize)</div><div class="ttdoc">Returns a list of mod directory names.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02537">files.c:2537</a></div></div>
<div class="ttc" id="acmd_8c_html_a64f2928056fbc22633bf72cadc92e16a"><div class="ttname"><a href="../../da/d32/cmd_8c.html#a64f2928056fbc22633bf72cadc92e16a">Cbuf_AddText</a></div><div class="ttdeci">void Cbuf_AddText(const char *text)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/cmd_8c_source.html#l00090">cmd.c:90</a></div></div>
<div class="ttc" id="afiles_8c_html_a14541ceecd7df70fa7e5258a057aac0a"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a14541ceecd7df70fa7e5258a057aac0a">lastValidGame</a></div><div class="ttdeci">char lastValidGame[MAX_OSPATH]</div><div class="ttdoc">Last valid game folder used.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00320">files.c:320</a></div></div>
<div class="ttc" id="astructpack__t_html_ae09f7e8de5bc8e9e1533dfd5e53ed443"><div class="ttname"><a href="../../dc/dad/structpack__t.html#ae09f7e8de5bc8e9e1533dfd5e53ed443">pack_t::hashSize</a></div><div class="ttdeci">int hashSize</div><div class="ttdoc">hash table size (power of 2).</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00224">files.c:224</a></div></div>
<div class="ttc" id="afiles_8c_html_aa3c5469d16b3b5b09a1e0fa39c2a0e24"><div class="ttname"><a href="../../d8/d8c/files_8c.html#aa3c5469d16b3b5b09a1e0fa39c2a0e24">FS_idPak</a></div><div class="ttdeci">qboolean FS_idPak(char *pak, char *base, int numPaks)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03048">files.c:3048</a></div></div>
<div class="ttc" id="aq__shared_8h_html_aeb5f6f6ff73cdbb085db970c33d2b9cbaf39a070ab167a90b3c87ab6b058469cd"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cbaf39a070ab167a90b3c87ab6b058469cd">FS_SEEK_SET</a></div><div class="ttdeci">@ FS_SEEK_SET</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00818">q_shared.h:818</a></div></div>
<div class="ttc" id="afiles_8c_html_a2f8d7dda752ca630c38cc2abcb44a95f"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a2f8d7dda752ca630c38cc2abcb44a95f">FS_FOpenFileAppend</a></div><div class="ttdeci">fileHandle_t FS_FOpenFileAppend(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00950">files.c:950</a></div></div>
<div class="ttc" id="afiles_8c_html_a6e0550cf0dc49189ddff506b01687d38"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a6e0550cf0dc49189ddff506b01687d38">FS_FreeFileList</a></div><div class="ttdeci">void FS_FreeFileList(char **list)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02377">files.c:2377</a></div></div>
<div class="ttc" id="afiles_8c_html_a8ad68e370f10bfef0736c91e2fc74a86"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a8ad68e370f10bfef0736c91e2fc74a86">FS_BuildOSPath</a></div><div class="ttdeci">char * FS_BuildOSPath(const char *base, const char *game, const char *qpath)</div><div class="ttdoc">Qpath may have either forward or backwards slashes.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00526">files.c:526</a></div></div>
<div class="ttc" id="astructcvar__s_html_adb4a4f5cdd70988e14780b79a6e32e0a"><div class="ttname"><a href="../../d8/d20/structcvar__s.html#adb4a4f5cdd70988e14780b79a6e32e0a">cvar_s::string</a></div><div class="ttdeci">char * string</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00953">q_shared.h:953</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a365c7380a4f5454e7a51ec401282eff4"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a365c7380a4f5454e7a51ec401282eff4">NUM_ID_PAKS</a></div><div class="ttdeci">#define NUM_ID_PAKS</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00597">qcommon.h:597</a></div></div>
<div class="ttc" id="afiles_8c_html_a9ff51d1c7623edd3d80b4b46fb56d467"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a9ff51d1c7623edd3d80b4b46fb56d467">FS_Which</a></div><div class="ttdeci">qboolean FS_Which(const char *filename, void *searchPath)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02840">files.c:2840</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a110846a9664bbd925f955266e60e9136"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136">qboolean</a></div><div class="ttdeci">qboolean</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00204">q_shared.h:204</a></div></div>
<div class="ttc" id="aunzip_8c_html_a17362e5016023e9424a318d93c0475d4"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a17362e5016023e9424a318d93c0475d4">unztell</a></div><div class="ttdeci">z_off_t ZEXPORT unztell(unzFile file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l01396">unzip.c:1396</a></div></div>
<div class="ttc" id="astructdirectory__t_html_ae0df1ca6183fef0c65acd01a6278c1bc"><div class="ttname"><a href="../../d4/de3/structdirectory__t.html#ae0df1ca6183fef0c65acd01a6278c1bc">directory_t::path</a></div><div class="ttdeci">char path[MAX_OSPATH]</div><div class="ttdoc">c:\quake3.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00233">files.c:233</a></div></div>
<div class="ttc" id="afiles_8c_html_a55de3ab916ba6dfd40c0f5f819dbb37b"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a55de3ab916ba6dfd40c0f5f819dbb37b">FS_FOpenFileReadDir</a></div><div class="ttdeci">long FS_FOpenFileReadDir(const char *filename, searchpath_t *search, fileHandle_t *file, qboolean uniqueFILE, qboolean unpure)</div><div class="ttdoc">Tries opening file &quot;filename&quot; in searchpath &quot;search&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01133">files.c:1133</a></div></div>
<div class="ttc" id="astructpack__t_html_abbfde30d3a483ff1e191ab864b2a41ee"><div class="ttname"><a href="../../dc/dad/structpack__t.html#abbfde30d3a483ff1e191ab864b2a41ee">pack_t::checksum</a></div><div class="ttdeci">int checksum</div><div class="ttdoc">regular checksum.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00220">files.c:220</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a71a1b73d68bfe1ebb079417c587c5df9"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a71a1b73d68bfe1ebb079417c587c5df9">CVAR_PROTECTED</a></div><div class="ttdeci">#define CVAR_PROTECTED</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00936">q_shared.h:936</a></div></div>
<div class="ttc" id="aq__shared_8h_html_adf9097a01af0067c10d749471dbdbe34"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#adf9097a01af0067c10d749471dbdbe34">MAX_STRING_CHARS</a></div><div class="ttdeci">#define MAX_STRING_CHARS</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00249">q_shared.h:249</a></div></div>
<div class="ttc" id="afiles_8c_html_a14db47fd7a399697847cdd67685c5426"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a14db47fd7a399697847cdd67685c5426">FS_Dir_f</a></div><div class="ttdeci">void FS_Dir_f(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02636">files.c:2636</a></div></div>
<div class="ttc" id="afiles_8c_html_a4e635a7a368bbd1ef3dbd99140c69e39"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a4e635a7a368bbd1ef3dbd99140c69e39">FS_Read</a></div><div class="ttdeci">int FS_Read(void *buffer, int len, fileHandle_t f)</div><div class="ttdoc">Properly handles partial reads.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01501">files.c:1501</a></div></div>
<div class="ttc" id="astructpack__t_html_a0a5041adb1336a5ff6b8a22a1fe80949"><div class="ttname"><a href="../../dc/dad/structpack__t.html#a0a5041adb1336a5ff6b8a22a1fe80949">pack_t::numfiles</a></div><div class="ttdeci">int numfiles</div><div class="ttdoc">number of files in pk3.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00222">files.c:222</a></div></div>
<div class="ttc" id="afiles_8c_html_a57f26ffcc37676a8213c96762a07458a"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a57f26ffcc37676a8213c96762a07458a">FS_ListFiles</a></div><div class="ttdeci">char ** FS_ListFiles(const char *path, const char *extension, int *numfiles)</div><div class="ttdoc">Directory should not have either a leading or trailing '/' , if extension is &quot;/&quot;, only subdirectories...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02368">files.c:2368</a></div></div>
<div class="ttc" id="acmd_8c_html_a9a231f06054959dab78df7335a8d2a47"><div class="ttname"><a href="../../da/d32/cmd_8c.html#a9a231f06054959dab78df7335a8d2a47">Cmd_AddCommand</a></div><div class="ttdeci">void Cmd_AddCommand(const char *cmd_name, xcommand_t function)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/cmd_8c_source.html#l00638">cmd.c:638</a></div></div>
<div class="ttc" id="aioapi_8h_html_ac964b0cf0c94deb3fd1b75f58fe84c11"><div class="ttname"><a href="../../d2/db7/ioapi_8h.html#ac964b0cf0c94deb3fd1b75f58fe84c11">mode</a></div><div class="ttdeci">const char int mode</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ioapi_8h_source.html#l00038">ioapi.h:38</a></div></div>
<div class="ttc" id="astructunz__global__info__s_html_a827d1cd1d09f12acd6c2ee12494cb320"><div class="ttname"><a href="../../db/d9c/structunz__global__info__s.html#a827d1cd1d09f12acd6c2ee12494cb320">unz_global_info_s::number_entry</a></div><div class="ttdeci">uLong number_entry</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5c/unzip_8h_source.html#l00095">unzip.h:95</a></div></div>
<div class="ttc" id="afiles_8c_html_a1a1f8b60e7b74de9e8370a54c0e13fb6"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a1a1f8b60e7b74de9e8370a54c0e13fb6">Sys_CountFileList</a></div><div class="ttdeci">static unsigned int Sys_CountFileList(char **list)</div><div class="ttdoc">Count file list.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02442">files.c:2442</a></div></div>
<div class="ttc" id="astructfile_handle_data__t_html_ab74c94ba839c4c7aa9df8207bf02d43a"><div class="ttname"><a href="../../d8/dbc/structfile_handle_data__t.html#ab74c94ba839c4c7aa9df8207bf02d43a">fileHandleData_t::zipFileLen</a></div><div class="ttdeci">int zipFileLen</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00295">files.c:295</a></div></div>
<div class="ttc" id="afiles_8c_html_a3b5954e21375aa787d541039dd33681b"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3b5954e21375aa787d541039dd33681b">fs_reordered</a></div><div class="ttdeci">static qboolean fs_reordered</div><div class="ttdoc">Whether we did a reorder on the current search path when joining the server.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00304">files.c:304</a></div></div>
<div class="ttc" id="afiles_8c_html_a3e64d1d88a399fb3d1dcfc582326ccde"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3e64d1d88a399fb3d1dcfc582326ccde">fs_debug</a></div><div class="ttdeci">static cvar_t * fs_debug</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00249">files.c:249</a></div></div>
<div class="ttc" id="afiles_8c_html_ad06f3a08b27ffe3a721b0d726e0fa8f7"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ad06f3a08b27ffe3a721b0d726e0fa8f7">Sys_ConcatenateFileLists</a></div><div class="ttdeci">static char ** Sys_ConcatenateFileLists(char **list0, char **list1)</div><div class="ttdoc">mkv: Naive implementation.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02465">files.c:2465</a></div></div>
<div class="ttc" id="acommon_8c_html_a99567963210a2ec41e730bce7f13dcd5"><div class="ttname"><a href="../../d8/d19/common_8c.html#a99567963210a2ec41e730bce7f13dcd5">com_basegame</a></div><div class="ttdeci">cvar_t * com_basegame</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00098">common.c:98</a></div></div>
<div class="ttc" id="afiles_8c_html_a14d05f54011f03ca6fb928a1931f35eb"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a14d05f54011f03ca6fb928a1931f35eb">FS_Startup</a></div><div class="ttdeci">static void FS_Startup(const char *gameName)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03306">files.c:3306</a></div></div>
<div class="ttc" id="aq__platform_8h_html_a837df2c29aacf37cb96c2b65acb312a6"><div class="ttname"><a href="../../d7/de2/q__platform_8h.html#a837df2c29aacf37cb96c2b65acb312a6">PATH_SEP</a></div><div class="ttdeci">#define PATH_SEP</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/q__platform_8h_source.html#l00125">q_platform.h:125</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a45f4d4299c4ddb16a5f83506c0865764"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a45f4d4299c4ddb16a5f83506c0865764">BASETA</a></div><div class="ttdeci">#define BASETA</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00071">q_shared.h:71</a></div></div>
<div class="ttc" id="aqcommon_8h_html_aae6e0b2caf30a7978021b344ca90148d"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#aae6e0b2caf30a7978021b344ca90148d">Q3CONFIG_CFG</a></div><div class="ttdeci">#define Q3CONFIG_CFG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00605">qcommon.h:605</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a8ffc60e84daf6f160ab3c6250c9e38e5a27ca42205a92c1e7250ccca442a54e63"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a8ffc60e84daf6f160ab3c6250c9e38e5a27ca42205a92c1e7250ccca442a54e63">VMI_COMPILED</a></div><div class="ttdeci">@ VMI_COMPILED</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00337">qcommon.h:337</a></div></div>
<div class="ttc" id="afiles_8c_html_a2cbd9bc46024eeafe267d1e3a4dfad06"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a2cbd9bc46024eeafe267d1e3a4dfad06">fs_loadCount</a></div><div class="ttdeci">static int fs_loadCount</div><div class="ttdoc">total files read.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00265">files.c:265</a></div></div>
<div class="ttc" id="astructfile_handle_data__t_html_a1ad22a4c1058f3f280bfad284fee7423"><div class="ttname"><a href="../../d8/dbc/structfile_handle_data__t.html#a1ad22a4c1058f3f280bfad284fee7423">fileHandleData_t::zipFile</a></div><div class="ttdeci">qboolean zipFile</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00296">files.c:296</a></div></div>
<div class="ttc" id="afiles_8c_html_a5dcb6aeb63861669677dec37c033f807"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a5dcb6aeb63861669677dec37c033f807">FS_FTell</a></div><div class="ttdeci">int FS_FTell(fileHandle_t f)</div><div class="ttdoc">Tell where we are.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l04124">files.c:4124</a></div></div>
<div class="ttc" id="aioapi_8h_html_a7a03a664b090ce5c848ecb31cb4a2fa8"><div class="ttname"><a href="../../d2/db7/ioapi_8h.html#a7a03a664b090ce5c848ecb31cb4a2fa8">filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ioapi_8h_source.html#l00038">ioapi.h:38</a></div></div>
<div class="ttc" id="afiles_8c_html_ad6f954ef4612e6512fe03502b1e279ec"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ad6f954ef4612e6512fe03502b1e279ec">fs_gogpath</a></div><div class="ttdeci">static cvar_t * fs_gogpath</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00258">files.c:258</a></div></div>
<div class="ttc" id="astructpack__t_html"><div class="ttname"><a href="../../dc/dad/structpack__t.html">pack_t</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00214">files.c:214</a></div></div>
<div class="ttc" id="astructsearchpath__s_html_a97ab49f3888a1049ac4ed04723ce6c31"><div class="ttname"><a href="../../df/da7/structsearchpath__s.html#a97ab49f3888a1049ac4ed04723ce6c31">searchpath_s::dir</a></div><div class="ttdeci">directory_t * dir</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00245">files.c:245</a></div></div>
<div class="ttc" id="afiles_8c_html_aa1cd6e2d2ec0cfb811788155f7c52689"><div class="ttname"><a href="../../d8/d8c/files_8c.html#aa1cd6e2d2ec0cfb811788155f7c52689">FS_FreePak</a></div><div class="ttdeci">static void FS_FreePak(pack_t *thepak)</div><div class="ttdoc">Frees a pak structure and releases all associated resources.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02121">files.c:2121</a></div></div>
<div class="ttc" id="afiles_8c_html_a7be0ae4731fad3841a854c2de22ef3b6"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a7be0ae4731fad3841a854c2de22ef3b6">DEMO_PAK0_CHECKSUM</a></div><div class="ttdeci">#define DEMO_PAK0_CHECKSUM</div><div class="ttdoc">Every time a new demo pk3 file is built, this checksum must be updated.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00164">files.c:164</a></div></div>
<div class="ttc" id="astructfile_in_pack__s_html_afaa140582c89cb6fd7893946ea51a25b"><div class="ttname"><a href="../../d1/d16/structfile_in_pack__s.html#afaa140582c89cb6fd7893946ea51a25b">fileInPack_s::len</a></div><div class="ttdeci">unsigned long len</div><div class="ttdoc">uncompress file size.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00207">files.c:207</a></div></div>
<div class="ttc" id="afiles_8c_html_a0bac3dbf64742f2e95e53600288d6d5c"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a0bac3dbf64742f2e95e53600288d6d5c">FS_CheckPak0</a></div><div class="ttdeci">static void FS_CheckPak0(void)</div><div class="ttdoc">Check whether any of the original id pak files is present, and start up in standalone mode,...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03448">files.c:3448</a></div></div>
<div class="ttc" id="afiles_8c_html_ab93fddea633353e7697001f72a5a833a"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ab93fddea633353e7697001f72a5a833a">fs_numServerReferencedPaks</a></div><div class="ttdeci">static int fs_numServerReferencedPaks</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00313">files.c:313</a></div></div>
<div class="ttc" id="afiles_8c_html_a3d9f952e589557b6e08b3ab2fd90852e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3d9f952e589557b6e08b3ab2fd90852e">fs_packFiles</a></div><div class="ttdeci">static int fs_packFiles</div><div class="ttdoc">total number of files in packs.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00267">files.c:267</a></div></div>
<div class="ttc" id="aqcommon_8h_html_aec78579bf1761ed72ee12b1eeb4b8626"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#aec78579bf1761ed72ee12b1eeb4b8626">Sys_FOpen</a></div><div class="ttdeci">FILE * Sys_FOpen(const char *ospath, const char *mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00359">sys_win32.c:359</a></div></div>
<div class="ttc" id="astructfile_in_pack__s_html"><div class="ttname"><a href="../../d1/d16/structfile_in_pack__s.html">fileInPack_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00204">files.c:204</a></div></div>
<div class="ttc" id="aqcommon_8h_html_ab8b6a83a99eb8a03f77b3ec7f827835c"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#ab8b6a83a99eb8a03f77b3ec7f827835c">FS_GENERAL_REF</a></div><div class="ttdeci">#define FS_GENERAL_REF</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00593">qcommon.h:593</a></div></div>
<div class="ttc" id="astructfile_in_pack__s_html_a055a92c21a22e5d2498c926adfb4ef69"><div class="ttname"><a href="../../d1/d16/structfile_in_pack__s.html#a055a92c21a22e5d2498c926adfb4ef69">fileInPack_s::next</a></div><div class="ttdeci">struct fileInPack_s * next</div><div class="ttdoc">next file in the hash.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00208">files.c:208</a></div></div>
<div class="ttc" id="acmd_8c_html_a1734574e90e7819673500355d4758877"><div class="ttname"><a href="../../da/d32/cmd_8c.html#a1734574e90e7819673500355d4758877">Cmd_Argv</a></div><div class="ttdeci">char * Cmd_Argv(int arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/cmd_8c_source.html#l00370">cmd.c:370</a></div></div>
<div class="ttc" id="afiles_8c_html_a95f53b203279a4babb672e39ddac3f83"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a95f53b203279a4babb672e39ddac3f83">FS_IsExt</a></div><div class="ttdeci">qboolean FS_IsExt(const char *filename, const char *ext, int namelen)</div><div class="ttdoc">Return qtrue if ext matches file extension filename.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01077">files.c:1077</a></div></div>
<div class="ttc" id="afiles_8c_html_ab467f65f1b3661215ecb4ec7784d816e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ab467f65f1b3661215ecb4ec7784d816e">FS_Shutdown</a></div><div class="ttdeci">void FS_Shutdown(qboolean closemfp)</div><div class="ttdoc">Frees all resources.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03219">files.c:3219</a></div></div>
<div class="ttc" id="astructfile_handle_data__t_html_a7d700514ee28041cf7a87cb8e079bfdc"><div class="ttname"><a href="../../d8/dbc/structfile_handle_data__t.html#a7d700514ee28041cf7a87cb8e079bfdc">fileHandleData_t::fileSize</a></div><div class="ttdeci">int fileSize</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00293">files.c:293</a></div></div>
<div class="ttc" id="acmd_8c_html_aaf7e5eaecf2386bacf67dafb8cdcba33"><div class="ttname"><a href="../../da/d32/cmd_8c.html#aaf7e5eaecf2386bacf67dafb8cdcba33">Cmd_Argc</a></div><div class="ttdeci">int Cmd_Argc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/cmd_8c_source.html#l00361">cmd.c:361</a></div></div>
<div class="ttc" id="afiles_8c_html_a25a8e0c344d0b412acb449c3076d5274"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a25a8e0c344d0b412acb449c3076d5274">paksort</a></div><div class="ttdeci">static int QDECL paksort(const void *a, const void *b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02894">files.c:2894</a></div></div>
<div class="ttc" id="afiles_8c_html_a1d9456f921dcffa56a7f62c18675d033"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a1d9456f921dcffa56a7f62c18675d033">fs_serverReferencedPaks</a></div><div class="ttdeci">static int fs_serverReferencedPaks[MAX_SEARCH_PATHS]</div><div class="ttdoc">checksums.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00314">files.c:314</a></div></div>
<div class="ttc" id="aq__shared_8h_html_aeb5f6f6ff73cdbb085db970c33d2b9cba36dd416e193650f2c191423d3e3dad6d"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#aeb5f6f6ff73cdbb085db970c33d2b9cba36dd416e193650f2c191423d3e3dad6d">FS_SEEK_END</a></div><div class="ttdeci">@ FS_SEEK_END</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00817">q_shared.h:817</a></div></div>
<div class="ttc" id="acommon_8c_html_aface39ec30682758a3e0ce07d2edb571"><div class="ttname"><a href="../../d8/d19/common_8c.html#aface39ec30682758a3e0ce07d2edb571">Hunk_FreeTempMemory</a></div><div class="ttdeci">void Hunk_FreeTempMemory(void *buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l01880">common.c:1880</a></div></div>
<div class="ttc" id="afiles_8c_html_a6b74272893392639294195e6e3b07914"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a6b74272893392639294195e6e3b07914">FS_ConvertPath</a></div><div class="ttdeci">void FS_ConvertPath(char *s)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02672">files.c:2672</a></div></div>
<div class="ttc" id="astructsearchpath__s_html_a78eda2ee0729948e453d844d828c8259"><div class="ttname"><a href="../../df/da7/structsearchpath__s.html#a78eda2ee0729948e453d844d828c8259">searchpath_s::next</a></div><div class="ttdeci">struct searchpath_s * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00242">files.c:242</a></div></div>
<div class="ttc" id="aq__shared_8c_html_a32013b18bc4669ec14149817776fbfad"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#a32013b18bc4669ec14149817776fbfad">Q_strcat</a></div><div class="ttdeci">void Q_strcat(char *dest, int size, const char *src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00904">q_shared.c:904</a></div></div>
<div class="ttc" id="aunzip_8c_html_af6ab0ba88ab5da62747df8f9336f1bb3"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#af6ab0ba88ab5da62747df8f9336f1bb3">unzClose</a></div><div class="ttdeci">int ZEXPORT unzClose(unzFile file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00506">unzip.c:506</a></div></div>
<div class="ttc" id="astructunz__file__info__s_html"><div class="ttname"><a href="../../dc/dbc/structunz__file__info__s.html">unz_file_info_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5c/unzip_8h_source.html#l00102">unzip.h:102</a></div></div>
<div class="ttc" id="afiles_8c_html_ad5b07871465d84bfd80a97dc24093151"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ad5b07871465d84bfd80a97dc24093151">MAX_FOUND_FILES</a></div><div class="ttdeci">#define MAX_FOUND_FILES</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02163">files.c:2163</a></div></div>
<div class="ttc" id="afiles_8c_html_a2e9ce2243dcda4094a06df205ec3f24d"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a2e9ce2243dcda4094a06df205ec3f24d">FS_Which_f</a></div><div class="ttdeci">void FS_Which_f(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02860">files.c:2860</a></div></div>
<div class="ttc" id="afiles_8c_html_a3c4ec3bde86c3cb7549952febebbbc9b"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3c4ec3bde86c3cb7549952febebbbc9b">FS_FCloseFile</a></div><div class="ttdeci">void FS_FCloseFile(fileHandle_t f)</div><div class="ttdoc">If the FILE pointer is an open pak file, leave it open.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00880">files.c:880</a></div></div>
<div class="ttc" id="afiles_8c_html_ab003187b06c3851b2e4650616ba8d67d"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ab003187b06c3851b2e4650616ba8d67d">FS_TouchFile_f</a></div><div class="ttdeci">void FS_TouchFile_f(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02819">files.c:2819</a></div></div>
<div class="ttc" id="acommon_8c_html_a2063ee236b7b5b79899a81047e5e0400"><div class="ttname"><a href="../../d8/d19/common_8c.html#a2063ee236b7b5b79899a81047e5e0400">Com_DPrintf</a></div><div class="ttdeci">void QDECL Com_DPrintf(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00243">common.c:243</a></div></div>
<div class="ttc" id="astructsearchpath__s_html"><div class="ttname"><a href="../../df/da7/structsearchpath__s.html">searchpath_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00241">files.c:241</a></div></div>
<div class="ttc" id="aq__shared_8c_html_a8c68b6486c8e49831592d9f46aadaaa2"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#a8c68b6486c8e49831592d9f46aadaaa2">Q_vsnprintf</a></div><div class="ttdeci">int Q_vsnprintf(char *str, size_t size, const char *format, va_list ap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00769">q_shared.c:769</a></div></div>
<div class="ttc" id="aunzip_8c_html_a782029e380dc5ab5dab00361c9c14f58"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a782029e380dc5ab5dab00361c9c14f58">unzReadCurrentFile</a></div><div class="ttdeci">int ZEXPORT unzReadCurrentFile(unzFile file, voidp buf, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l01235">unzip.c:1235</a></div></div>
<div class="ttc" id="astructfile_handle_data__t_html_a4a2d47b4ac20b0856125be4bc229017a"><div class="ttname"><a href="../../d8/dbc/structfile_handle_data__t.html#a4a2d47b4ac20b0856125be4bc229017a">fileHandleData_t::zipFilePos</a></div><div class="ttdeci">int zipFilePos</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00294">files.c:294</a></div></div>
<div class="ttc" id="afiles_8c_html_a7859424617923fdf80df33e240fdb893"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a7859424617923fdf80df33e240fdb893">FS_Restart</a></div><div class="ttdeci">void FS_Restart(int checksumFeed)</div><div class="ttdoc">Shutdown and restart the filesystem so changes to fs_gamedir can take effect.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03969">files.c:3969</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a35deb8ef816a08fb1bc8feac8db020c5"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a35deb8ef816a08fb1bc8feac8db020c5">Z_Malloc</a></div><div class="ttdeci">#define Z_Malloc(size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00886">qcommon.h:886</a></div></div>
<div class="ttc" id="astructpack__t_html_a00b8b7e3e43ebb0aeb0626f9a5ec862b"><div class="ttname"><a href="../../dc/dad/structpack__t.html#a00b8b7e3e43ebb0aeb0626f9a5ec862b">pack_t::referenced</a></div><div class="ttdeci">int referenced</div><div class="ttdoc">referenced file flags.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00223">files.c:223</a></div></div>
<div class="ttc" id="aioapi_8h_html_a3c7b35ad9dab18b8310343c201f7b27e"><div class="ttname"><a href="../../d2/db7/ioapi_8h.html#a3c7b35ad9dab18b8310343c201f7b27e">long</a></div><div class="ttdeci">typedef long(ZCALLBACK *tell_file_func) OF((voidpf opaque</div></div>
<div class="ttc" id="acg__main_8c_html_ac5a47034a0c2a1c1eba5f1acd22987a2"><div class="ttname"><a href="../../d9/d47/cg__main_8c.html#ac5a47034a0c2a1c1eba5f1acd22987a2">Com_Printf</a></div><div class="ttdeci">void QDECL Com_Printf(const char *msg,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cg__main_8c_source.html#l00465">cg_main.c:465</a></div></div>
<div class="ttc" id="aioapi_8h_html_a6ad5e17860121e666df109329b95c83e"><div class="ttname"><a href="../../d2/db7/ioapi_8h.html#a6ad5e17860121e666df109329b95c83e">origin</a></div><div class="ttdeci">voidpf uLong int origin</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ioapi_8h_source.html#l00042">ioapi.h:42</a></div></div>
<div class="ttc" id="aq__shared_8h_html_aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a1c6bf755d394a50c551150ea2135c551">ERR_DROP</a></div><div class="ttdeci">@ ERR_DROP</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00304">q_shared.h:304</a></div></div>
<div class="ttc" id="afiles_8c_html_a2774c2469ce0036a9f1b09737eed5066"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a2774c2469ce0036a9f1b09737eed5066">FS_PakIsPure</a></div><div class="ttdeci">qboolean FS_PakIsPure(pack_t *pack)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00350">files.c:350</a></div></div>
<div class="ttc" id="aunzip_8c_html_a12c4062aa3dae4cddf7527c3caf8c519"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a12c4062aa3dae4cddf7527c3caf8c519">unzSetOffset</a></div><div class="ttdeci">int ZEXPORT unzSetOffset(unzFile file, uLong pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l01590">unzip.c:1590</a></div></div>
<div class="ttc" id="afiles_8c_html_a0d875191082cf26460654f6fb6d6e662"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a0d875191082cf26460654f6fb6d6e662">FS_ReorderPurePaks</a></div><div class="ttdeci">static void FS_ReorderPurePaks(void)</div><div class="ttdoc">FS_ReorderPurePaks.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03269">files.c:3269</a></div></div>
<div class="ttc" id="aunzip_8h_html_ada043545f95ccd4dae93fa44d95e39a8"><div class="ttname"><a href="../../d2/d5c/unzip_8h.html#ada043545f95ccd4dae93fa44d95e39a8">UNZ_OK</a></div><div class="ttdeci">#define UNZ_OK</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5c/unzip_8h_source.html#l00071">unzip.h:71</a></div></div>
<div class="ttc" id="acommon_8c_html_accd6e59ffb1ddbc8b7975e74345db7e5"><div class="ttname"><a href="../../d8/d19/common_8c.html#accd6e59ffb1ddbc8b7975e74345db7e5">CopyString</a></div><div class="ttdeci">char * CopyString(const char *in)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l01227">common.c:1227</a></div></div>
<div class="ttc" id="afiles_8c_html_a41577d0c844f4e801242c4c17343e0da"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a41577d0c844f4e801242c4c17343e0da">FS_HashFileName</a></div><div class="ttdeci">static long FS_HashFileName(const char *fname, int hashSize)</div><div class="ttdoc">return a hash value for the filename.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00384">files.c:384</a></div></div>
<div class="ttc" id="afiles_8c_html_a92854eddea9f8e06383c850a57ac918a"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a92854eddea9f8e06383c850a57ac918a">MAX_FILEHASH_SIZE</a></div><div class="ttdeci">#define MAX_FILEHASH_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00199">files.c:199</a></div></div>
<div class="ttc" id="aq__shared_8c_html_a0860b4d8d99e417446074a0162fb7b6d"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#a0860b4d8d99e417446074a0162fb7b6d">COM_GetExtension</a></div><div class="ttdeci">const char * COM_GetExtension(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00084">q_shared.c:84</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a20a4e527723200df6bdd5aeb08ea86fb"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a20a4e527723200df6bdd5aeb08ea86fb">fileHandle_t</a></div><div class="ttdeci">int fileHandle_t</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00214">q_shared.h:214</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a4c31ebc9163957944f0c21c72f83bf95"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a4c31ebc9163957944f0c21c72f83bf95">FS_UI_REF</a></div><div class="ttdeci">#define FS_UI_REF</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00594">qcommon.h:594</a></div></div>
<div class="ttc" id="afiles_8c_html_ab531c515d93bd273104648ca6e06d3e9"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ab531c515d93bd273104648ca6e06d3e9">fs_homepath</a></div><div class="ttdeci">static cvar_t * fs_homepath</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00250">files.c:250</a></div></div>
<div class="ttc" id="afiles_8c_html_a2851e3b9ecde9cfb96796ec8cc696053"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a2851e3b9ecde9cfb96796ec8cc696053">pak_checksums</a></div><div class="ttdeci">static const unsigned int pak_checksums[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00165">files.c:165</a></div></div>
<div class="ttc" id="aqgl_8h_html_aa5448648ec759eaffc4fa7a5ac276ed7"><div class="ttname"><a href="../../d9/d11/qgl_8h.html#aa5448648ec759eaffc4fa7a5ac276ed7">s</a></div><div class="ttdeci">GLfloat s</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d11/qgl_8h_source.html#l00037">qgl.h:37</a></div></div>
<div class="ttc" id="aunionqfile__gus_html_a6ad8421dfb8437ac0ee0a290a4583808"><div class="ttname"><a href="../../d4/d60/unionqfile__gus.html#a6ad8421dfb8437ac0ee0a290a4583808">qfile_gus::z</a></div><div class="ttdeci">unzFile z</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00276">files.c:276</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a2a2142fd21a23d46716d023c7badd8b0"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a2a2142fd21a23d46716d023c7badd8b0">Sys_FreeFileList</a></div><div class="ttdeci">void Sys_FreeFileList(char **list)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00619">sys_win32.c:619</a></div></div>
<div class="ttc" id="aq__shared_8c_html_a711fb3836fafdfcdbb57bfc08e75a056"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#a711fb3836fafdfcdbb57bfc08e75a056">Q_stricmpn</a></div><div class="ttdeci">int Q_stricmpn(const char *s1, const char *s2, int n)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00814">q_shared.c:814</a></div></div>
<div class="ttc" id="afiles_8c_html_a83603ac5600d0e36b364125755ebacca"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a83603ac5600d0e36b364125755ebacca">FS_LoadZipFile</a></div><div class="ttdeci">static pack_t * FS_LoadZipFile(const char *zipfile, const char *basename)</div><div class="ttdoc">Creates a new pak_t in the search chain for the contents of a zip file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02018">files.c:2018</a></div></div>
<div class="ttc" id="afiles_8c_html_a3fbd31416bb8711f264a06d133a9273d"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3fbd31416bb8711f264a06d133a9273d">PK3_SEEK_BUFFER_SIZE</a></div><div class="ttdeci">#define PK3_SEEK_BUFFER_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01622">files.c:1622</a></div></div>
<div class="ttc" id="afiles_8c_html_af3c0fdcf6f42a8c443fc5c924b72e40d"><div class="ttname"><a href="../../d8/d8c/files_8c.html#af3c0fdcf6f42a8c443fc5c924b72e40d">FS_NewDir_f</a></div><div class="ttdeci">void FS_NewDir_f(void)</div><div class="ttdoc">Cmd_AddCommand(&quot;fdir&quot;, FS_NewDir_f);.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02754">files.c:2754</a></div></div>
<div class="ttc" id="astructdirectory__t_html_afdfdd6fd83c213334cf5be1279a4439d"><div class="ttname"><a href="../../d4/de3/structdirectory__t.html#afdfdd6fd83c213334cf5be1279a4439d">directory_t::gamedir</a></div><div class="ttdeci">char gamedir[MAX_OSPATH]</div><div class="ttdoc">baseq3.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00235">files.c:235</a></div></div>
<div class="ttc" id="afiles_8c_html_a893ba65b550aec713c7954e948bad98f"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a893ba65b550aec713c7954e948bad98f">FS_CreatePath</a></div><div class="ttdeci">qboolean FS_CreatePath(char *OSPath)</div><div class="ttdoc">Creates any directories needed to store the given filename.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00551">files.c:551</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a7be3e8ed0151b858862dac2259654d01"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a7be3e8ed0151b858862dac2259654d01">BASEGAME</a></div><div class="ttdeci">#define BASEGAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00048">q_shared.h:48</a></div></div>
<div class="ttc" id="aq__shared_8c_html_a3cd6e05c5ab0c4e57e9655d91d3a689d"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#a3cd6e05c5ab0c4e57e9655d91d3a689d">Q_strncpyz</a></div><div class="ttdeci">void Q_strncpyz(char *dest, const char *src, int destsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00798">q_shared.c:798</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a1d63847eb5a8c046655fe8ba8a3ff85b"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a1d63847eb5a8c046655fe8ba8a3ff85b">MAX_OSPATH</a></div><div class="ttdeci">#define MAX_OSPATH</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00266">q_shared.h:266</a></div></div>
<div class="ttc" id="aq__shared_8c_html_ad3e9eb4ad33935ff8f263c167b0ae3dc"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#ad3e9eb4ad33935ff8f263c167b0ae3dc">Q_stricmp</a></div><div class="ttdeci">int Q_stricmp(const char *s1, const char *s2)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00872">q_shared.c:872</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a137a12c218c78399558b41cb435949cd"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a137a12c218c78399558b41cb435949cd">Sys_SteamPath</a></div><div class="ttdeci">char * Sys_SteamPath(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00144">sys_win32.c:144</a></div></div>
<div class="ttc" id="aunzip_8c_html_a54821c0b6da683800164a56f2ae14f33"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a54821c0b6da683800164a56f2ae14f33">unzGoToFirstFile</a></div><div class="ttdeci">int ZEXPORT unzGoToFirstFile(unzFile file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00770">unzip.c:770</a></div></div>
<div class="ttc" id="afiles_8c_html_a62e052f74b4964c2e9a712b12efb288e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a62e052f74b4964c2e9a712b12efb288e">fsh</a></div><div class="ttdeci">static fileHandleData_t fsh[MAX_FILE_HANDLES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00300">files.c:300</a></div></div>
<div class="ttc" id="acg__main_8c_html_a645b2fc38fed59a52db3c5e467853722"><div class="ttname"><a href="../../d9/d47/cg__main_8c.html#a645b2fc38fed59a52db3c5e467853722">Com_Error</a></div><div class="ttdeci">void QDECL Com_Error(int level, const char *error,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d47/cg__main_8c_source.html#l00453">cg_main.c:453</a></div></div>
<div class="ttc" id="acommon_8c_html_abc338c50e3434371acbd05714bc732b2"><div class="ttname"><a href="../../d8/d19/common_8c.html#abc338c50e3434371acbd05714bc732b2">cl_cdkey</a></div><div class="ttdeci">char cl_cdkey[34]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l02491">common.c:2491</a></div></div>
<div class="ttc" id="asnd__main_8c_html_a2ee987527fcd3ce92171f1ae7fa8d62b"><div class="ttname"><a href="../../d0/d27/snd__main_8c.html#a2ee987527fcd3ce92171f1ae7fa8d62b">S_ClearSoundBuffer</a></div><div class="ttdeci">void S_ClearSoundBuffer(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d27/snd__main_8c_source.html#l00299">snd_main.c:299</a></div></div>
<div class="ttc" id="afiles_8c_html_af2a6bd66a22d9da08effd972d87e9f5b"><div class="ttname"><a href="../../d8/d8c/files_8c.html#af2a6bd66a22d9da08effd972d87e9f5b">FS_PathCmp</a></div><div class="ttdeci">int FS_PathCmp(const char *s1, const char *s2)</div><div class="ttdoc">Ignore case and seprator char distinctions.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02689">files.c:2689</a></div></div>
<div class="ttc" id="aq__shared_8c_html_a59829788e34ecd790d8e512b224b52d8"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#a59829788e34ecd790d8e512b224b52d8">COM_CompareExtension</a></div><div class="ttdeci">qboolean COM_CompareExtension(const char *in, const char *ext)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00119">q_shared.c:119</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00229">q_shared.h:229</a></div></div>
<div class="ttc" id="acommon_8c_html_a5a0fb0e6f63c56cbf766ea79f1f9a662"><div class="ttname"><a href="../../d8/d19/common_8c.html#a5a0fb0e6f63c56cbf766ea79f1f9a662">Com_GameRestart</a></div><div class="ttdeci">void Com_GameRestart(int checksumFeed, qboolean disconnect)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l02429">common.c:2429</a></div></div>
<div class="ttc" id="aunionqfile__gus_html_a38126c07e8edb472dfbaf77fcb673b71"><div class="ttname"><a href="../../d4/d60/unionqfile__gus.html#a38126c07e8edb472dfbaf77fcb673b71">qfile_gus::o</a></div><div class="ttdeci">FILE * o</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00275">files.c:275</a></div></div>
<div class="ttc" id="acommon_8c_html_a54bf828ce12f3b4cb64a651e088fcc36"><div class="ttname"><a href="../../d8/d19/common_8c.html#a54bf828ce12f3b4cb64a651e088fcc36">com_journalDataFile</a></div><div class="ttdeci">fileHandle_t com_journalDataFile</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00059">common.c:59</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a841615a63f4a3aa18337897953874909"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a841615a63f4a3aa18337897953874909">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(x)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00239">q_shared.h:239</a></div></div>
<div class="ttc" id="afiles_8c_html_ac5f39eddf80c89df5f1f9f0b6b48b482"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ac5f39eddf80c89df5f1f9f0b6b48b482">FS_FOpenFileRead</a></div><div class="ttdeci">long FS_FOpenFileRead(const char *filename, fileHandle_t *file, qboolean uniqueFILE)</div><div class="ttdoc">Finds the file in the search path.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01366">files.c:1366</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a139894f499a591481b514402e7fcd210"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a139894f499a591481b514402e7fcd210">MAX_FILE_HANDLES</a></div><div class="ttdeci">#define MAX_FILE_HANDLES</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00600">qcommon.h:600</a></div></div>
<div class="ttc" id="afiles_8c_html_a1de8ef7048063ff2bd814d66f47d74e0"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a1de8ef7048063ff2bd814d66f47d74e0">Com_ReadCDKey</a></div><div class="ttdeci">void Com_ReadCDKey(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l02502">common.c:2502</a></div></div>
<div class="ttc" id="acommon_8c_html_a891cc946899ce89d20947241bd3d1edb"><div class="ttname"><a href="../../d8/d19/common_8c.html#a891cc946899ce89d20947241bd3d1edb">com_journal</a></div><div class="ttdeci">cvar_t * com_journal</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00066">common.c:66</a></div></div>
<div class="ttc" id="afiles_8c_html_a7d6e1cf1a8d53f38471e9e9db3faf740"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a7d6e1cf1a8d53f38471e9e9db3faf740">__func__</a></div><div class="ttdeci">#define __func__</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00331">files.c:331</a></div></div>
<div class="ttc" id="astructqfile__us_html_abe51094b301d3ff4ef30047d1cb94d36"><div class="ttname"><a href="../../de/d47/structqfile__us.html#abe51094b301d3ff4ef30047d1cb94d36">qfile_us::unique</a></div><div class="ttdeci">qboolean unique</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00284">files.c:284</a></div></div>
<div class="ttc" id="aunzip_8h_html_ad578db1d36691a2a244482a3b2360ca3"><div class="ttname"><a href="../../d2/d5c/unzip_8h.html#ad578db1d36691a2a244482a3b2360ca3">unzFile</a></div><div class="ttdeci">voidp unzFile</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5c/unzip_8h_source.html#l00067">unzip.h:67</a></div></div>
<div class="ttc" id="astructunz__file__info__s_html_a6d741cb2df07794d7a4794841148893b"><div class="ttname"><a href="../../dc/dbc/structunz__file__info__s.html#a6d741cb2df07794d7a4794841148893b">unz_file_info_s::crc</a></div><div class="ttdeci">uLong crc</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5c/unzip_8h_source.html#l00109">unzip.h:109</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a9a60e3a3b7123e30c470bd5823cde09d">qtrue</a></div><div class="ttdeci">@ qtrue</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00204">q_shared.h:204</a></div></div>
<div class="ttc" id="acommon_8c_html_a7eb1d10a704d4f8996292a012c1050c5"><div class="ttname"><a href="../../d8/d19/common_8c.html#a7eb1d10a704d4f8996292a012c1050c5">com_protocol</a></div><div class="ttdeci">cvar_t * com_protocol</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00094">common.c:94</a></div></div>
<div class="ttc" id="afiles_8c_html_a146c14808e970bc75796397ccec06eb5"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a146c14808e970bc75796397ccec06eb5">FS_AddFileToList</a></div><div class="ttdeci">static int FS_AddFileToList(char *name, char *list[MAX_FOUND_FILES], int nfiles)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02202">files.c:2202</a></div></div>
<div class="ttc" id="aioapi_8h_html_af69bf0eca00f413fb4808febcbaf6f5c"><div class="ttname"><a href="../../d2/db7/ioapi_8h.html#af69bf0eca00f413fb4808febcbaf6f5c">offset</a></div><div class="ttdeci">voidpf uLong offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ioapi_8h_source.html#l00042">ioapi.h:42</a></div></div>
<div class="ttc" id="aunzip_8c_html_a65deebb4ecb3ba110c343c21a4cd9a75"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a65deebb4ecb3ba110c343c21a4cd9a75">unzOpenCurrentFile</a></div><div class="ttdeci">int ZEXPORT unzOpenCurrentFile(unzFile file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l01203">unzip.c:1203</a></div></div>
<div class="ttc" id="aunzip_8c_html_ac99166540260b60340f4787af0a90029"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#ac99166540260b60340f4787af0a90029">unzGetCurrentFileInfo</a></div><div class="ttdeci">int ZEXPORT unzGetCurrentFileInfo(unzFile file, unz_file_info *pfile_info, char *szFileName, uLong fileNameBufferSize, void *extraField, uLong extraFieldBufferSize, char *szComment, uLong commentBufferSize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00746">unzip.c:746</a></div></div>
<div class="ttc" id="afiles_8c_html_a786cbe7f1d25c6eceab37a60823ac73e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a786cbe7f1d25c6eceab37a60823ac73e">lastValidBase</a></div><div class="ttdeci">char lastValidBase[MAX_OSPATH]</div><div class="ttdoc">Last valid game folder used.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00317">files.c:317</a></div></div>
<div class="ttc" id="afiles_8c_html_a78ced81260ee2821fa8d398830e55855"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a78ced81260ee2821fa8d398830e55855">FS_HandleForFile</a></div><div class="ttdeci">static fileHandle_t FS_HandleForFile(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00409">files.c:409</a></div></div>
<div class="ttc" id="aioapi_8c_html_a4c8d0b76b470ba65a43ca46a88320f39"><div class="ttname"><a href="../../d5/d84/ioapi_8c.html#a4c8d0b76b470ba65a43ca46a88320f39">SEEK_CUR</a></div><div class="ttdeci">#define SEEK_CUR</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d84/ioapi_8c_source.html#l00026">ioapi.c:26</a></div></div>
<div class="ttc" id="aq__shared_8c_html_abb28e4bfc5e70aa5cbedc383741c6faf"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#abb28e4bfc5e70aa5cbedc383741c6faf">va</a></div><div class="ttdeci">char *QDECL va(char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l01023">q_shared.c:1023</a></div></div>
<div class="ttc" id="aioapi_8c_html_ad2a2e6c114780c3071efd24f16c7f7d8"><div class="ttname"><a href="../../d5/d84/ioapi_8c.html#ad2a2e6c114780c3071efd24f16c7f7d8">SEEK_END</a></div><div class="ttdeci">#define SEEK_END</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d84/ioapi_8c_source.html#l00030">ioapi.c:30</a></div></div>
<div class="ttc" id="aunzip_8c_html_af05d6e3eac6ec396d9d134ca140fec61"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#af05d6e3eac6ec396d9d134ca140fec61">unzGetGlobalInfo</a></div><div class="ttdeci">int ZEXPORT unzGetGlobalInfo(unzFile file, unz_global_info *pglobal_info)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00527">unzip.c:527</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a8ffc60e84daf6f160ab3c6250c9e38e5ad3aad61376e7f4e53de20fc12732f9af"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a8ffc60e84daf6f160ab3c6250c9e38e5ad3aad61376e7f4e53de20fc12732f9af">VMI_NATIVE</a></div><div class="ttdeci">@ VMI_NATIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00335">qcommon.h:335</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a34f6a8f28b94b0c0263dea3dea07cb01"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a34f6a8f28b94b0c0263dea3dea07cb01">Sys_DefaultInstallPath</a></div><div class="ttdeci">char * Sys_DefaultInstallPath(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd6/sys__main_8c_source.html#l00084">sys_main.c:84</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a4753fe3ebffba810d7755c0ea03490d4"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a4753fe3ebffba810d7755c0ea03490d4">CVAR_INIT</a></div><div class="ttdeci">#define CVAR_INIT</div><div class="ttdoc">Don't allow change from console at all, but can be set from the command line.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00921">q_shared.h:921</a></div></div>
<div class="ttc" id="acommon_8c_html_aa61f8a8a391cfb842265fa5a141f3e59"><div class="ttname"><a href="../../d8/d19/common_8c.html#aa61f8a8a391cfb842265fa5a141f3e59">demo_protocols</a></div><div class="ttdeci">int demo_protocols[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00037">common.c:37</a></div></div>
<div class="ttc" id="astructpack__t_html_afe7d4b8e26a759135f8155c2e4801de0"><div class="ttname"><a href="../../dc/dad/structpack__t.html#afe7d4b8e26a759135f8155c2e4801de0">pack_t::pure_checksum</a></div><div class="ttdeci">int pure_checksum</div><div class="ttdoc">checksum for pure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00221">files.c:221</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a37cc40de446272f34ecc34de151323aba82e0a3b4b9ab26ffe6c17be816b6fd0e"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323aba82e0a3b4b9ab26ffe6c17be816b6fd0e">FS_APPEND</a></div><div class="ttdeci">@ FS_APPEND</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00811">q_shared.h:811</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a331d56054b8d2cc3b4be5aaa79f9258c"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a331d56054b8d2cc3b4be5aaa79f9258c">Com_Memset</a></div><div class="ttdeci">#define Com_Memset</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00350">q_shared.h:350</a></div></div>
<div class="ttc" id="afiles_8c_html_a58f6907cd9c9231ef7991b341ddf5807"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a58f6907cd9c9231ef7991b341ddf5807">FS_FileInPathExists</a></div><div class="ttdeci">qboolean FS_FileInPathExists(const char *testpath)</div><div class="ttdoc">Tests if path and file exists.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00634">files.c:634</a></div></div>
<div class="ttc" id="acommon_8c_html_a1e46859d6986c50c28862949ad452c26"><div class="ttname"><a href="../../d8/d19/common_8c.html#a1e46859d6986c50c28862949ad452c26">Hunk_ClearTempMemory</a></div><div class="ttdeci">void Hunk_ClearTempMemory(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l01928">common.c:1928</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a37cc40de446272f34ecc34de151323abace9b0c88352359a6ab35a182409a926c"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323abace9b0c88352359a6ab35a182409a926c">FS_APPEND_SYNC</a></div><div class="ttdeci">@ FS_APPEND_SYNC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00812">q_shared.h:812</a></div></div>
<div class="ttc" id="aunzip_8c_html_a1c325877d63ca4e205424add563ae01d"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a1c325877d63ca4e205424add563ae01d">unzGetOffset</a></div><div class="ttdeci">uLong ZEXPORT unzGetOffset(unzFile file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l01574">unzip.c:1574</a></div></div>
<div class="ttc" id="astructdirectory__t_html_a10624bf46544c6ad25465b0b49eab102"><div class="ttname"><a href="../../d4/de3/structdirectory__t.html#a10624bf46544c6ad25465b0b49eab102">directory_t::fullpath</a></div><div class="ttdeci">char fullpath[MAX_OSPATH]</div><div class="ttdoc">c:\quake3\baseq3.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00234">files.c:234</a></div></div>
<div class="ttc" id="acl__avi_8c_html_abec397a4b4f398bca2ffc96b0b522e40"><div class="ttname"><a href="../../dc/d92/cl__avi_8c.html#abec397a4b4f398bca2ffc96b0b522e40">buffer</a></div><div class="ttdeci">static byte buffer[MAX_AVI_BUFFER]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d92/cl__avi_8c_source.html#l00074">cl_avi.c:74</a></div></div>
<div class="ttc" id="acommon_8c_html_abc0aa580e0729cd4040ec4d9d07c46b7"><div class="ttname"><a href="../../d8/d19/common_8c.html#abc0aa580e0729cd4040ec4d9d07c46b7">CL_CDKeyValidate</a></div><div class="ttdeci">qboolean CL_CDKeyValidate(const char *key, const char *checksum)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/cl__main_8c_source.html#l04585">cl_main.c:4585</a></div></div>
<div class="ttc" id="aqcommon_8h_html_ab7f347e6426456fcc8702ac02da8307b"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#ab7f347e6426456fcc8702ac02da8307b">MAXPRINTMSG</a></div><div class="ttdeci">#define MAXPRINTMSG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00745">qcommon.h:745</a></div></div>
<div class="ttc" id="aq__shared_8h_html_ae04565b0ef2c0bc3b0bb84c7a75bcd4e"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#ae04565b0ef2c0bc3b0bb84c7a75bcd4e">S_COLOR_YELLOW</a></div><div class="ttdeci">#define S_COLOR_YELLOW</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00433">q_shared.h:433</a></div></div>
<div class="ttc" id="acommon_8c_html_abd714e31b23fa6f1df5d475e2ec7e4b2"><div class="ttname"><a href="../../d8/d19/common_8c.html#abd714e31b23fa6f1df5d475e2ec7e4b2">Z_Free</a></div><div class="ttdeci">void Z_Free(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00849">common.c:849</a></div></div>
<div class="ttc" id="astructsearchpath__s_html_a353e3e83079a16515098aa9e3cc9c671"><div class="ttname"><a href="../../df/da7/structsearchpath__s.html#a353e3e83079a16515098aa9e3cc9c671">searchpath_s::pack</a></div><div class="ttdeci">pack_t * pack</div><div class="ttdoc">only one of pack / dir will be non NULL.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00244">files.c:244</a></div></div>
<div class="ttc" id="afiles_8c_html_a708b7c81b06465508d84fee7e40aa257"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a708b7c81b06465508d84fee7e40aa257">fs_searchpaths</a></div><div class="ttdeci">static searchpath_t * fs_searchpaths</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00263">files.c:263</a></div></div>
<div class="ttc" id="astructfile_in_pack__s_html_a78de898acc4a12eb1e833de902be74f1"><div class="ttname"><a href="../../d1/d16/structfile_in_pack__s.html#a78de898acc4a12eb1e833de902be74f1">fileInPack_s::pos</a></div><div class="ttdeci">unsigned long pos</div><div class="ttdoc">file info position in zip.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00206">files.c:206</a></div></div>
<div class="ttc" id="afiles_8c_html_a17b0350b6ca9a5cbdddb50ba177f9862"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a17b0350b6ca9a5cbdddb50ba177f9862">fileInPack_t</a></div><div class="ttdeci">struct fileInPack_s fileInPack_t</div></div>
<div class="ttc" id="astructpack__t_html_a7e4b0981f0168a46ecb8c08cbcf9ee5d"><div class="ttname"><a href="../../dc/dad/structpack__t.html#a7e4b0981f0168a46ecb8c08cbcf9ee5d">pack_t::handle</a></div><div class="ttdeci">unzFile handle</div><div class="ttdoc">handle to zip file.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00219">files.c:219</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a37cc40de446272f34ecc34de151323aba16e40511e654a299d4374c25a6f5d577"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323aba16e40511e654a299d4374c25a6f5d577">FS_READ</a></div><div class="ttdeci">@ FS_READ</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00809">q_shared.h:809</a></div></div>
<div class="ttc" id="aqcommon_8h_html_abbc0e268738cb137929c72843d501a53"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#abbc0e268738cb137929c72843d501a53">Sys_Mkdir</a></div><div class="ttdeci">qboolean Sys_Mkdir(const char *path)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00376">sys_win32.c:376</a></div></div>
<div class="ttc" id="aqcommon_8h_html_ac25952608c50e3c39548267ee82ff8f2"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#ac25952608c50e3c39548267ee82ff8f2">FS_CGAME_REF</a></div><div class="ttdeci">#define FS_CGAME_REF</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/df7/qcommon_8h_source.html#l00595">qcommon.h:595</a></div></div>
<div class="ttc" id="aq__shared_8c_html_ac5559db84415463975aeaa060f618f7d"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#ac5559db84415463975aeaa060f618f7d">COM_StripExtension</a></div><div class="ttdeci">void COM_StripExtension(const char *in, char *out, int destsize)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00099">q_shared.c:99</a></div></div>
<div class="ttc" id="afiles_8c_html_af2f02a32d713bda5d8907bb011c22b75"><div class="ttname"><a href="../../d8/d8c/files_8c.html#af2f02a32d713bda5d8907bb011c22b75">FS_Write</a></div><div class="ttdeci">int FS_Write(const void *buffer, int len, fileHandle_t h)</div><div class="ttdoc">Properly handles partial writes.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01556">files.c:1556</a></div></div>
<div class="ttc" id="astructcvar__s_html_ae873b26596ff98802364d80bbb71c72a"><div class="ttname"><a href="../../d8/d20/structcvar__s.html#ae873b26596ff98802364d80bbb71c72a">cvar_s::integer</a></div><div class="ttdeci">int integer</div><div class="ttdoc">atoi( string ).</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00960">q_shared.h:960</a></div></div>
<div class="ttc" id="aunzip_8c_html_ac48279e5325cfdabbc67a312b1d32700"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#ac48279e5325cfdabbc67a312b1d32700">unzCloseCurrentFile</a></div><div class="ttdeci">int ZEXPORT unzCloseCurrentFile(unzFile file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l01500">unzip.c:1500</a></div></div>
<div class="ttc" id="afiles_8c_html_a3a7653feeeb72d09401102400c55f6f3"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3a7653feeeb72d09401102400c55f6f3">fs_readCount</a></div><div class="ttdeci">static int fs_readCount</div><div class="ttdoc">total bytes read.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00264">files.c:264</a></div></div>
<div class="ttc" id="aq__shared_8c_html_ad93d94d7048c649d11a5eea9729842a3"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#ad93d94d7048c649d11a5eea9729842a3">Q_strlwr</a></div><div class="ttdeci">char * Q_strlwr(char *s1)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l00878">q_shared.c:878</a></div></div>
<div class="ttc" id="afiles_8c_html_a40b145fdbc84b66bb8d3a901c09c79ef"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a40b145fdbc84b66bb8d3a901c09c79ef">fs_checksumFeed</a></div><div class="ttdeci">static int fs_checksumFeed</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00269">files.c:269</a></div></div>
<div class="ttc" id="afiles_8c_html_ad2381b59cd3dba516a289108f96b77d3"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ad2381b59cd3dba516a289108f96b77d3">FS_IsDemoExt</a></div><div class="ttdeci">qboolean FS_IsDemoExt(const char *filename, int namelen)</div><div class="ttdoc">Return qtrue if filename has a demo extension.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01097">files.c:1097</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a6fc918049f77c94085ee49d663f66ee4"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a6fc918049f77c94085ee49d663f66ee4">Sys_DefaultHomePath</a></div><div class="ttdeci">char * Sys_DefaultHomePath(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00097">sys_win32.c:97</a></div></div>
<div class="ttc" id="afiles_8c_html_a2fb9e1b8c14757cfe172a3ebf022bcd6"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a2fb9e1b8c14757cfe172a3ebf022bcd6">FS_GetCurrentGameDir</a></div><div class="ttdeci">const char * FS_GetCurrentGameDir(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l04183">files.c:4183</a></div></div>
<div class="ttc" id="afiles_8c_html_ad406d41c306abb12491df47192457990"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ad406d41c306abb12491df47192457990">FS_SV_FOpenFileRead</a></div><div class="ttdeci">long FS_SV_FOpenFileRead(const char *filename, fileHandle_t *fp)</div><div class="ttdoc">Search for a file somewhere below the home path then base path in that order.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00728">files.c:728</a></div></div>
<div class="ttc" id="afiles_8c_html_a349dcf043719b25af7d268ebcf553da0"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a349dcf043719b25af7d268ebcf553da0">fs_serverPakNames</a></div><div class="ttdeci">static char * fs_serverPakNames[MAX_SEARCH_PATHS]</div><div class="ttdoc">pk3 names.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00309">files.c:309</a></div></div>
<div class="ttc" id="amd4_8c_html_aacc6f230ca3f48954f6546e9d26ac4fc"><div class="ttname"><a href="../../d8/d71/md4_8c.html#aacc6f230ca3f48954f6546e9d26ac4fc">Com_BlockChecksum</a></div><div class="ttdeci">unsigned Com_BlockChecksum(const void *buffer, int length)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d71/md4_8c_source.html#l00199">md4.c:199</a></div></div>
<div class="ttc" id="afiles_8c_html_a53b5e83245e636947c7b951c869fd91e"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a53b5e83245e636947c7b951c869fd91e">FS_FOpenFileWrite</a></div><div class="ttdeci">fileHandle_t FS_FOpenFileWrite(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00907">files.c:907</a></div></div>
<div class="ttc" id="afiles_8c_html_a900505aca395309f53085ae0ce5663f7"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a900505aca395309f53085ae0ce5663f7">FS_InvalidGameDir</a></div><div class="ttdeci">qboolean FS_InvalidGameDir(const char *gamedir)</div><div class="ttdoc">return true if path is a reference to current directory or directory traversal or a sub-directory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03082">files.c:3082</a></div></div>
<div class="ttc" id="afiles_8c_html_a3776903aa012bf28a0107683c8d9a1b7"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a3776903aa012bf28a0107683c8d9a1b7">FS_ListFilteredFiles</a></div><div class="ttdeci">char ** FS_ListFilteredFiles(const char *path, const char *extension, char *filter, int *numfiles, qboolean allowNonPureFilesOnDisk)</div><div class="ttdoc">Returns a uniqued list of files that match the given criteria from all search paths.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02230">files.c:2230</a></div></div>
<div class="ttc" id="astructqfile__us_html_aa9383cb5bc1dafa7d9e9cda77935e504"><div class="ttname"><a href="../../de/d47/structqfile__us.html#aa9383cb5bc1dafa7d9e9cda77935e504">qfile_us::file</a></div><div class="ttdeci">qfile_gut file</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00283">files.c:283</a></div></div>
<div class="ttc" id="astructfile_handle_data__t_html_a120dd1d4d3e6cf500e4e39042a7820ec"><div class="ttname"><a href="../../d8/dbc/structfile_handle_data__t.html#a120dd1d4d3e6cf500e4e39042a7820ec">fileHandleData_t::handleFiles</a></div><div class="ttdeci">qfile_ut handleFiles</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00291">files.c:291</a></div></div>
<div class="ttc" id="acommon_8c_html_a42a92adf0430f1d0c4b0c078226aef09"><div class="ttname"><a href="../../d8/d19/common_8c.html#a42a92adf0430f1d0c4b0c078226aef09">com_legacyprotocol</a></div><div class="ttdeci">cvar_t * com_legacyprotocol</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00096">common.c:96</a></div></div>
<div class="ttc" id="afiles_8c_html_ac6af732036ed49564ce032e345f5b405"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ac6af732036ed49564ce032e345f5b405">missionpak_checksums</a></div><div class="ttdeci">static const unsigned int missionpak_checksums[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00180">files.c:180</a></div></div>
<div class="ttc" id="afiles_8c_html_ab8090de10f7d898f9365e63c2bc97291"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ab8090de10f7d898f9365e63c2bc97291">FS_Flush</a></div><div class="ttdeci">void FS_Flush(fileHandle_t f)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l04139">files.c:4139</a></div></div>
<div class="ttc" id="acvar_8c_html_a47803524e8f002b6540d91b8cccc7e0e"><div class="ttname"><a href="../../d7/de8/cvar_8c.html#a47803524e8f002b6540d91b8cccc7e0e">Cvar_VariableString</a></div><div class="ttdeci">char * Cvar_VariableString(const char *var_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de8/cvar_8c_source.html#l00135">cvar.c:135</a></div></div>
<div class="ttc" id="afiles_8c_html_a9b7aef69f91c6fd24c87dc983cfee937"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a9b7aef69f91c6fd24c87dc983cfee937">fs_basegame</a></div><div class="ttdeci">static cvar_t * fs_basegame</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00261">files.c:261</a></div></div>
<div class="ttc" id="aq__shared_8h_html_aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#aae573e3e6a2cbf05f3485f215403c9c2a182e80681e784dc5d8dbb1897617bd6e">ERR_FATAL</a></div><div class="ttdeci">@ ERR_FATAL</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00303">q_shared.h:303</a></div></div>
<div class="ttc" id="afiles_8c_html_af3a6b4d4279a3b9029391ddf12f1610f"><div class="ttname"><a href="../../d8/d8c/files_8c.html#af3a6b4d4279a3b9029391ddf12f1610f">FS_FilenameCompare</a></div><div class="ttdeci">qboolean FS_FilenameCompare(const char *s1, const char *s2)</div><div class="ttdoc">Ignore case and seprator char distinctions.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01039">files.c:1039</a></div></div>
<div class="ttc" id="acvar_8c_html_a9d7b23b195518b2a196a3cc013f4d11a"><div class="ttname"><a href="../../d7/de8/cvar_8c.html#a9d7b23b195518b2a196a3cc013f4d11a">Cvar_ForceReset</a></div><div class="ttdeci">void Cvar_ForceReset(const char *var_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de8/cvar_8c_source.html#l00709">cvar.c:709</a></div></div>
<div class="ttc" id="asnd__wavelet_8c_html_a09ebd310e71d5c5075c8631ceee3033d"><div class="ttname"><a href="../../de/d9f/snd__wavelet_8c.html#a09ebd310e71d5c5075c8631ceee3033d">a</a></div><div class="ttdeci">#define a(x)</div></div>
<div class="ttc" id="aq__shared_8h_html_a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a110846a9664bbd925f955266e60e9136a0e538a5d43e68d2de4eb96c77855de40">qfalse</a></div><div class="ttdeci">@ qfalse</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00204">q_shared.h:204</a></div></div>
<div class="ttc" id="aioapi_8c_html_a0d112bae8fd35be772185b6ec6bcbe64"><div class="ttname"><a href="../../d5/d84/ioapi_8c.html#a0d112bae8fd35be772185b6ec6bcbe64">SEEK_SET</a></div><div class="ttdeci">#define SEEK_SET</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d84/ioapi_8c_source.html#l00034">ioapi.c:34</a></div></div>
<div class="ttc" id="astructunz__global__info__s_html"><div class="ttname"><a href="../../db/d9c/structunz__global__info__s.html">unz_global_info_s</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d5c/unzip_8h_source.html#l00093">unzip.h:93</a></div></div>
<div class="ttc" id="asys__win32_8c_html_a1755babf3186c0439fafdc560562d97a"><div class="ttname"><a href="../../db/db6/sys__win32_8c.html#a1755babf3186c0439fafdc560562d97a">homePath</a></div><div class="ttdeci">static char homePath[MAX_OSPATH]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00047">sys_win32.c:47</a></div></div>
<div class="ttc" id="acmd_8c_html_aff8c983f8d2d2c161cdc35f8cafcfbe6"><div class="ttname"><a href="../../da/d32/cmd_8c.html#aff8c983f8d2d2c161cdc35f8cafcfbe6">Cmd_TokenizeString</a></div><div class="ttdeci">void Cmd_TokenizeString(const char *text_in)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d32/cmd_8c_source.html#l00606">cmd.c:606</a></div></div>
<div class="ttc" id="aq__platform_8h_html_ae86909c78fbe3c1e12c8f5500d640e01"><div class="ttname"><a href="../../d7/de2/q__platform_8h.html#ae86909c78fbe3c1e12c8f5500d640e01">LittleLong</a></div><div class="ttdeci">#define LittleLong</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/de2/q__platform_8h_source.html#l00350">q_platform.h:350</a></div></div>
<div class="ttc" id="afiles_8c_html_a8db53983b9e96ec4774b5b702427e23f"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a8db53983b9e96ec4774b5b702427e23f">FS_CheckDirTraversal</a></div><div class="ttdeci">qboolean FS_CheckDirTraversal(const char *checkdir)</div><div class="ttdoc">Check whether the string contains stuff like &quot;../&quot; to prevent directory traversal bugs and return qtr...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l03068">files.c:3068</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a37cc40de446272f34ecc34de151323abab0017622d7011e9c191ddc8422dbb4cf"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a37cc40de446272f34ecc34de151323abab0017622d7011e9c191ddc8422dbb4cf">FS_WRITE</a></div><div class="ttdeci">@ FS_WRITE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00810">q_shared.h:810</a></div></div>
<div class="ttc" id="astructpack__t_html_a842ba3f9b4fd284d4418439316c8c205"><div class="ttname"><a href="../../dc/dad/structpack__t.html#a842ba3f9b4fd284d4418439316c8c205">pack_t::hashTable</a></div><div class="ttdeci">fileInPack_t ** hashTable</div><div class="ttdoc">hash table.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00225">files.c:225</a></div></div>
<div class="ttc" id="afiles_8c_html_a60b9d8c773b74225a800532bbb0a3779"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a60b9d8c773b74225a800532bbb0a3779">FS_ReturnPath</a></div><div class="ttdeci">static int FS_ReturnPath(const char *zname, char *zpath, int *depth)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02172">files.c:2172</a></div></div>
<div class="ttc" id="afiles_8c_html_a8c412643fabf5a6d0a2b30ac3f7876f6"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a8c412643fabf5a6d0a2b30ac3f7876f6">FS_fplength</a></div><div class="ttdeci">long FS_fplength(FILE *h)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00460">files.c:460</a></div></div>
<div class="ttc" id="acommon_8c_html_a2e77a0dee4708a102d3c6ad795ae5b6a"><div class="ttname"><a href="../../d8/d19/common_8c.html#a2e77a0dee4708a102d3c6ad795ae5b6a">com_fullyInitialized</a></div><div class="ttdeci">qboolean com_fullyInitialized</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00122">common.c:122</a></div></div>
<div class="ttc" id="aq__shared_8h_html_ac7b24ebb5f889a3101ae83331cbfd358"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#ac7b24ebb5f889a3101ae83331cbfd358">DEMOEXT</a></div><div class="ttdeci">#define DEMOEXT</div><div class="ttdoc">standard demo extension.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00086">q_shared.h:86</a></div></div>
<div class="ttc" id="afiles_8c_html_a7385f187221b07141649520937000a15"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a7385f187221b07141649520937000a15">MAX_ZPATH</a></div><div class="ttdeci">#define MAX_ZPATH</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00197">files.c:197</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a0701630965c52ce0cc99eda50fbb8235"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a0701630965c52ce0cc99eda50fbb8235">Com_Memcpy</a></div><div class="ttdeci">#define Com_Memcpy</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00351">q_shared.h:351</a></div></div>
<div class="ttc" id="aunzip_8c_html_a614a4ee72e9055e5657d28487c2a7936"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#a614a4ee72e9055e5657d28487c2a7936">unzOpen</a></div><div class="ttdeci">unzFile ZEXPORT unzOpen(char *path) const</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00495">unzip.c:495</a></div></div>
<div class="ttc" id="aioapi_8h_html_a014d89bd76f74ef3a29c8f04b473eb76"><div class="ttname"><a href="../../d2/db7/ioapi_8h.html#a014d89bd76f74ef3a29c8f04b473eb76">size</a></div><div class="ttdeci">voidpf void uLong size</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ioapi_8h_source.html#l00039">ioapi.h:39</a></div></div>
<div class="ttc" id="astructpack__t_html_a98b2e035cc384c5963565905fb65fcb2"><div class="ttname"><a href="../../dc/dad/structpack__t.html#a98b2e035cc384c5963565905fb65fcb2">pack_t::pakFilename</a></div><div class="ttdeci">char pakFilename[MAX_OSPATH]</div><div class="ttdoc">c:\quake3\baseq3\pak0.pk3.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00216">files.c:216</a></div></div>
<div class="ttc" id="aunzip_8c_html_acb457ebeaee7cb850c11a4a3d4b58201"><div class="ttname"><a href="../../d6/da7/unzip_8c.html#acb457ebeaee7cb850c11a4a3d4b58201">unzGoToNextFile</a></div><div class="ttdeci">int ZEXPORT unzGoToNextFile(unzFile file)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da7/unzip_8c_source.html#l00792">unzip.c:792</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a8c8cdd6a45dee8393d7c0c65d6df8b83"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a8c8cdd6a45dee8393d7c0c65d6df8b83">Sys_GogPath</a></div><div class="ttdeci">char * Sys_GogPath(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db6/sys__win32_8c_source.html#l00198">sys_win32.c:198</a></div></div>
<div class="ttc" id="acommon_8c_html_a29b5324017dad948331c674fa15e43a7"><div class="ttname"><a href="../../d8/d19/common_8c.html#a29b5324017dad948331c674fa15e43a7">Hunk_AllocateTempMemory</a></div><div class="ttdeci">void * Hunk_AllocateTempMemory(int size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l01831">common.c:1831</a></div></div>
<div class="ttc" id="afiles_8c_html_a0a0d4940920cae5cd03989225834c4bb"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a0a0d4940920cae5cd03989225834c4bb">fs_gamedir</a></div><div class="ttdeci">static char fs_gamedir[MAX_OSPATH]</div><div class="ttdoc">this will be a single file name with no separators.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00248">files.c:248</a></div></div>
<div class="ttc" id="afiles_8c_html_a97842b2a865eb7cfbcc222ae71c35063"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a97842b2a865eb7cfbcc222ae71c35063">FS_ReplaceSeparators</a></div><div class="ttdeci">static void FS_ReplaceSeparators(char *path)</div><div class="ttdoc">Fix things up differently for win/unix/mac.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00499">files.c:499</a></div></div>
<div class="ttc" id="afiles_8c_html_ae44989e789fb1adc7b885c6ef8688f23"><div class="ttname"><a href="../../d8/d8c/files_8c.html#ae44989e789fb1adc7b885c6ef8688f23">lastValidFsBaseGame</a></div><div class="ttdeci">char lastValidFsBaseGame[MAX_OSPATH]</div><div class="ttdoc">Last valid game folder used.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00319">files.c:319</a></div></div>
<div class="ttc" id="afiles_8c_html_a06e74b378ce96e91964bf188fd77ad59"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a06e74b378ce96e91964bf188fd77ad59">FS_SV_FileExists</a></div><div class="ttdeci">qboolean FS_SV_FileExists(const char *file)</div><div class="ttdoc">Tests if the file exists.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00669">files.c:669</a></div></div>
<div class="ttc" id="acommon_8c_html_a9ae978943aacf56718d9d873d439186b"><div class="ttname"><a href="../../d8/d19/common_8c.html#a9ae978943aacf56718d9d873d439186b">Com_FilterPath</a></div><div class="ttdeci">int Com_FilterPath(char *filter, char *name, int casesensitive)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00694">common.c:694</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a1f09e2e9635f385232ec297c685571b1"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a1f09e2e9635f385232ec297c685571b1">BIG_INFO_STRING</a></div><div class="ttdeci">#define BIG_INFO_STRING</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00257">q_shared.h:257</a></div></div>
<div class="ttc" id="afiles_8c_html_a1c1815394d013a4db34e8f7910039ba0"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a1c1815394d013a4db34e8f7910039ba0">FS_ReadFileDir</a></div><div class="ttdeci">long FS_ReadFileDir(const char *qpath, void *searchPath, qboolean unpure, void **buffer)</div><div class="ttdoc">Read the file directory.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l01810">files.c:1810</a></div></div>
<div class="ttc" id="afiles_8c_html_a40a7a15cecdc9d90a1c9156f76325ab2"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a40a7a15cecdc9d90a1c9156f76325ab2">fs_gamedirvar</a></div><div class="ttdeci">static cvar_t * fs_gamedirvar</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00262">files.c:262</a></div></div>
<div class="ttc" id="astructpack__t_html_acf9c08ac9b8fdbadb2376f76babb4aa0"><div class="ttname"><a href="../../dc/dad/structpack__t.html#acf9c08ac9b8fdbadb2376f76babb4aa0">pack_t::pakGamename</a></div><div class="ttdeci">char pakGamename[MAX_OSPATH]</div><div class="ttdoc">baseq3.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00218">files.c:218</a></div></div>
<div class="ttc" id="acommon_8c_html_a4cdc241a40649ca5b806e36e5b8c7fcc"><div class="ttname"><a href="../../d8/d19/common_8c.html#a4cdc241a40649ca5b806e36e5b8c7fcc">Com_StartupVariable</a></div><div class="ttdeci">void Com_StartupVariable(const char *match)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00487">common.c:487</a></div></div>
<div class="ttc" id="acommon_8c_html_a4a3fc59eece356bb6f4db037e33acf43"><div class="ttname"><a href="../../d8/d19/common_8c.html#a4a3fc59eece356bb6f4db037e33acf43">com_standalone</a></div><div class="ttdeci">cvar_t * com_standalone</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d19/common_8c_source.html#l00092">common.c:92</a></div></div>
<div class="ttc" id="aq__shared_8c_html_ac588f8840a6e947e3284578c52bd624d"><div class="ttname"><a href="../../d3/d86/q__shared_8c.html#ac588f8840a6e947e3284578c52bd624d">Com_sprintf</a></div><div class="ttdeci">int QDECL Com_sprintf(char *dest, int size, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d86/q__shared_8c_source.html#l01000">q_shared.c:1000</a></div></div>
<div class="ttc" id="astructpack__t_html_a6b6912c1d86e57717e1f52174825c0d6"><div class="ttname"><a href="../../dc/dad/structpack__t.html#a6b6912c1d86e57717e1f52174825c0d6">pack_t::pakBasename</a></div><div class="ttdeci">char pakBasename[MAX_OSPATH]</div><div class="ttdoc">pak0.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00217">files.c:217</a></div></div>
<div class="ttc" id="afiles_8c_html_a40e76dfd3d7fc3350e4622886146518f"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a40e76dfd3d7fc3350e4622886146518f">fs_numServerPaks</a></div><div class="ttdeci">static int fs_numServerPaks</div><div class="ttdoc">Never load anything from pk3 files that are not present at the server when pure.</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l00307">files.c:307</a></div></div>
<div class="ttc" id="afiles_8c_html_a4b00bf6d8a82595ed18b1d40f7a00fa9"><div class="ttname"><a href="../../d8/d8c/files_8c.html#a4b00bf6d8a82595ed18b1d40f7a00fa9">FS_SortFileList</a></div><div class="ttdeci">void FS_SortFileList(char **filelist, int numfiles)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/files_8c_source.html#l02727">files.c:2727</a></div></div>
<div class="ttc" id="aqcommon_8h_html_a8fc8943955da7142902847ba9c1a38cd"><div class="ttname"><a href="../../d1/df7/qcommon_8h.html#a8fc8943955da7142902847ba9c1a38cd">Sys_RemovePIDFile</a></div><div class="ttdeci">void Sys_RemovePIDFile(const char *gamedir)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd6/sys__main_8c_source.html#l00178">sys_main.c:178</a></div></div>
<div class="ttc" id="aq__shared_8h_html_a27611779736399fa9840bfcc3b50b6cc"><div class="ttname"><a href="../../de/d01/q__shared_8h.html#a27611779736399fa9840bfcc3b50b6cc">CVAR_SYSTEMINFO</a></div><div class="ttdeci">#define CVAR_SYSTEMINFO</div><div class="ttdoc">these cvars will be duplicated on all clients.</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d01/q__shared_8h_source.html#l00918">q_shared.h:918</a></div></div>
<div class="ttc" id="asys__main_8c_html_a7bd7b1d5ac55ea5c067398bccf4a85ca"><div class="ttname"><a href="../../d5/dd6/sys__main_8c.html#a7bd7b1d5ac55ea5c067398bccf4a85ca">Sys_DefaultAppPath</a></div><div class="ttdeci">char * Sys_DefaultAppPath(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dd6/sys__main_8c_source.html#l00095">sys_main.c:95</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_050edd66366d13764f98250ef6db77f6.html">code</a></li><li class="navelem"><a class="el" href="../../dir_db7d0fecb1be69bbc8acf14ab0a01f85.html">qcommon</a></li><li class="navelem"><a class="el" href="../../d8/d8c/files_8c.html">files.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
